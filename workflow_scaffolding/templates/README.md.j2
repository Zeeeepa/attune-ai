# {{ class_name }}

**{{ description }}**

---

## Overview

{% if patterns %}
**Patterns Used:**
{% for pattern in patterns %}
- `{{ pattern.id }}` - {{ pattern.description }}
{% endfor %}
{% endif %}

**Complexity:** {{ complexity }}

**Stages:**
{% for stage in stages %}
{{ loop.index }}. **{{ stage }}** - {{ tier_map[stage] }} tier
{% endfor %}

---

## Usage

```python
from empathy_os.workflows.{{ workflow_file }} import {{ class_name }}

# Initialize workflow
workflow = {{ class_name }}(
{% if init_params %}
{% for param in init_params %}
    {{ param.name }}={{ param.example if param.example else param.default }},
{% endfor %}
{% endif %}
)

# Execute
result = await workflow.execute(
    # Add your input data here
)

# Check result
print(f"Success: {result.success}")
{% if has_result_dataclass %}
print(f"Duration: {result.duration_seconds}s")
print(f"Cost: ${result.cost:.4f}")
{% endif %}
```

---

## CLI Usage

```bash
# Run via empathy CLI
empathy workflow run {{ workflow_name }} --input '{"key": "value"}'

# With options
{% if init_params %}
{% for param in init_params %}
empathy workflow run {{ workflow_name }} --{{ param.name|replace('_', '-') }} {{ param.example if param.example else param.default }}
{% endfor %}
{% endif %}
```

---

## Configuration

{% if has_config_driven %}
Add to `empathy.config.yml`:

```yaml
{{ workflow_name|replace('-', '_') }}:
{% if config_params %}
{% for param_name, param_value in config_params.items() %}
  {{ param_name }}: {{ param_value }}
{% endfor %}
{% endif %}
```
{% else %}
This workflow does not use configuration files.
{% endif %}

---

## Stages

{% for stage in stages %}
### {{ loop.index }}. {{ stage|replace('_', ' ')|title }}

**Tier:** {{ tier_map[stage] }}

**Purpose:** {% if stage_descriptions and stage_descriptions[stage] %}{{ stage_descriptions[stage] }}{% else %}TODO: Add description{% endif %}

**Input:** {% if stage_inputs and stage_inputs[stage] %}{{ stage_inputs[stage] }}{% else %}TODO: Add description{% endif %}

**Output:** {% if stage_outputs and stage_outputs[stage] %}{{ stage_outputs[stage] }}{% else %}TODO: Add description{% endif %}

{% endfor %}

---

## Testing

```bash
# Run tests
pytest tests/unit/workflows/test_{{ workflow_file }}.py -v

# Run with coverage
pytest tests/unit/workflows/test_{{ workflow_file }}.py --cov

# Run specific test
pytest tests/unit/workflows/test_{{ workflow_file }}.py::Test{{ class_name }}::test_workflow_execution_basic -v
```

---

## Cost Optimization

{% if has_conditional_tier %}
This workflow uses **conditional tier routing** to optimize costs:
- Cheap tier ({{ tier_map.values()|select('equalto', 'CHEAP')|list|length or 0 }} stages): Fast, inexpensive analysis
- Capable tier ({{ tier_map.values()|select('equalto', 'CAPABLE')|list|length or 0 }} stages): Balanced performance
- Premium tier ({{ tier_map.values()|select('equalto', 'PREMIUM')|list|length or 0 }} stages): Deep analysis (conditionally skipped)

Expected savings: **50-80%** compared to using premium tier for all stages.
{% else %}
**Tier Distribution:**
{% for tier in ['CHEAP', 'CAPABLE', 'PREMIUM'] %}
- {{ tier }}: {{ tier_map.values()|select('equalto', tier)|list|length }} stage(s)
{% endfor %}
{% endif %}

---

## Examples

### Example 1: Basic Usage

```python
workflow = {{ class_name }}()
result = await workflow.execute(
    # TODO: Add example input
)
```

### Example 2: With Custom Settings

```python
workflow = {{ class_name }}(
{% if init_params %}
{% for param in init_params %}
    {{ param.name }}={{ param.example if param.example else param.default }},
{% endfor %}
{% endif %}
)
result = await workflow.execute(
    # TODO: Add example input
)
```

---

## Troubleshooting

### Common Issues

**Issue:** Workflow fails with "X not found"
**Solution:** TODO: Add solution

**Issue:** High costs
**Solution:** {% if has_conditional_tier %}Review conditional tier routing logic{% else %}Consider adding conditional tier routing{% endif %}

---

## Related Workflows

- TODO: Add related workflows

---

**Generated:** {{ generation_date }}
**Patterns:** {{ patterns|map(attribute='id')|join(', ') }}
**Complexity:** {{ complexity }}

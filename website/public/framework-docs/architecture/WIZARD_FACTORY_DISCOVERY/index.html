
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Production-ready Level 4 Anticipatory Intelligence for AI-human collaboration. Build AI systems that predict problems before they happen.">
      
      
        <meta name="author" content="Patrick Roebuck">
      
      
        <link rel="canonical" href="https://smartaimemory.com/framework-docs/architecture/WIZARD_FACTORY_DISCOVERY/">
      
      
      
      
        
      
      
      <link rel="icon" href="../../assets/images/empathy-brain-logo.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.7.0">
    
    
      
        <title>WIZARD FACTORY DISCOVERY - Attune AI</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.618322db.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.ab4e12ef.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../assets/_mkdocstrings.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  <!-- Plausible Analytics - Privacy-respecting, no cookies -->
  <script defer data-domain="smartaimemory.com" src="https://plausible.io/js/script.js"></script>

  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#description-wizard-factory-enhancement-discovery-report-system-architecture-overview-with-components-data-flow-and-design-decisions-understand-the-framework-internals" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Attune AI" class="md-header__button md-logo" aria-label="Attune AI" data-md-component="logo">
      
  <img src="../../assets/images/empathy-brain-logo.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Attune AI
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              WIZARD FACTORY DISCOVERY
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/Smart-AI-Memory/attune-ai" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    Smart-AI-Memory/attune-ai
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../.." class="md-tabs__link">
        
  
  
    
  
  Home

      </a>
    </li>
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../getting-started/" class="md-tabs__link">
          
  
  
  Getting Started

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../tutorials/" class="md-tabs__link">
          
  
  
  Tutorials

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../how-to/" class="md-tabs__link">
          
  
  
  How-to

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../SECURITY.md" class="md-tabs__link">
          
  
  
  Security

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../explanation/" class="md-tabs__link">
          
  
  
  Explanation

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../reference/" class="md-tabs__link">
          
  
  
  Reference

        </a>
      </li>
    
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../contributing/" class="md-tabs__link">
        
  
  
    
  
  Contributing

      </a>
    </li>
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../get-the-book/" class="md-tabs__link">
          
  
  
  Book

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Attune AI" class="md-nav__button md-logo" aria-label="Attune AI" data-md-component="logo">
      
  <img src="../../assets/images/empathy-brain-logo.png" alt="logo">

    </a>
    Attune AI
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/Smart-AI-Memory/attune-ai" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    Smart-AI-Memory/attune-ai
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Home
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Getting Started
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    Getting Started
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../getting-started/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Getting Started
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../getting-started/installation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Installation
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../getting-started/first-steps/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    First Steps
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../getting-started/choose-your-path/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Choose Your Path
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../getting-started/redis-setup/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Redis Setup
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../getting-started/mcp-integration/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    MCP Integration
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Tutorials
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    Tutorials
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Index
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/quickstart/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Multi-Agent Team
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../blog/interactive-agent-creation-tutorial/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Interactive Agent Creation
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3_4" >
        
          
          <label class="md-nav__link" for="__nav_3_4" id="__nav_3_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Examples
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    Examples
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/examples/simple-chatbot/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Code Review Assistant
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/examples/sbar-clinical-handoff/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    SBAR Clinical Handoff
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/examples/multi-agent-team-coordination/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Multi-Agent Team
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/examples/adaptive-learning-system/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Adaptive Learning
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/examples/webhook-event-integration/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Webhook Integration
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    How-to
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    How-to
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../how-to/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Index
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4_2" >
        
          
          <label class="md-nav__link" for="__nav_4_2" id="__nav_4_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Memory System
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    Memory System
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../how-to/unified-memory-system/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Unified Memory
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../how-to/short-term-memory-implementation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Short-Term Memory
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../how-to/memory-graph/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Memory Graph
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4_3" >
        
          
          <label class="md-nav__link" for="__nav_4_3" id="__nav_4_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    AI Agents
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    AI Agents
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../how-to/agent-factory/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Agent Factory
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../how-to/smart-router/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Smart Router
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../how-to/auto-chaining/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Auto-Chaining
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4_4" >
        
          
          <label class="md-nav__link" for="__nav_4_4" id="__nav_4_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Integration
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    Integration
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../integration/claude-code-integration/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Claude Code
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../how-to/webhook-integration/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Webhooks
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../how-to/security-architecture/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Security
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../how-to/hipaa-compliance/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    HIPAA Compliance
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4_5" >
        
          
          <label class="md-nav__link" for="__nav_4_5" id="__nav_4_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Patterns
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_5">
            <span class="md-nav__icon md-icon"></span>
            
  
    Patterns
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../how-to/practical-patterns/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Practical Patterns
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../how-to/resilience-patterns/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Resilience Patterns
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../how-to/prerequisites/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Prerequisites
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Security
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            
  
    Security
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../SECURITY.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Overview
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_5_2" >
        
          
          <label class="md-nav__link" for="__nav_5_2" id="__nav_5_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Security Scanning
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    Security Scanning
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../DEVELOPER_SECURITY_WORKFLOW.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Developer Workflow
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../CI_SECURITY_SCANNING.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    CI/CD Integration
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../SECURITY_SCANNER_ARCHITECTURE.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Scanner Architecture
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../SECURITY_REMEDIATION_PROCESS.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Remediation Process
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api-reference/security-scanner/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    API Reference
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_5_3" >
        
          
          <label class="md-nav__link" for="__nav_5_3" id="__nav_5_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Implementation Journey
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    Implementation Journey
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../SECURITY_COMPLETE_SUMMARY.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Complete Summary
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../SECURITY_PHASE2_COMPLETE.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Phase 2 Details
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../SECURITY_PHASE3_COMPLETE.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Phase 3 Details
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_5_4" >
        
          
          <label class="md-nav__link" for="__nav_5_4" id="__nav_5_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Standards
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    Standards
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../CODING_STANDARDS/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Coding Standards
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../EXCEPTION_HANDLING_GUIDE/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Exception Handling
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_6" >
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Explanation
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            
  
    Explanation
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../explanation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Index
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_6_2" >
        
          
          <label class="md-nav__link" for="__nav_6_2" id="__nav_6_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Philosophy
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_6_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    Philosophy
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../explanation/ATTUNE_PHILOSOPHY/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    The Attune Philosophy
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../explanation/multi-agent-philosophy/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Multi-Agent Philosophy
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../explanation/HOW_CLAUDE_LEARNS/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    How Claude Learns
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_6_3" >
        
          
          <label class="md-nav__link" for="__nav_6_3" id="__nav_6_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Concepts
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_6_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    Concepts
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../explanation/TEACHING_AI_YOUR_PHILOSOPHY/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Teaching AI Your Philosophy
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../explanation/adaptive-learning/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Adaptive Learning
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../explanation/COMPARISON/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Comparison
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_6_4" >
        
          
          <label class="md-nav__link" for="__nav_6_4" id="__nav_6_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Integration
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_6_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    Integration
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../explanation/USING_ATTUNE_WITH_LLMS/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Using with LLMs
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../explanation/MEMDOCS_ATTUNE_INTEGRATION/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    MemDocs Integration
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../explanation/ATTUNE_AI_NON_TECHNICAL_GUIDE/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Non-Technical Guide
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_7" >
        
          
          <label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Reference
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7">
            <span class="md-nav__icon md-icon"></span>
            
  
    Reference
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Index
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_7_2" >
        
          
          <label class="md-nav__link" for="__nav_7_2" id="__nav_7_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    CLI
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_7_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    CLI
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/CLI_GUIDE/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    CLI Guide
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/CLI_CHEATSHEET/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    CLI Cheatsheet
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_7_3" >
        
          
          <label class="md-nav__link" for="__nav_7_3" id="__nav_7_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    API
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_7_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    API
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/API_REFERENCE/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Overview
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/empathy-os/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    EmpathyOS
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/configuration/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Configuration
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/core/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Core
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/config/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Config
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/pattern-library/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Pattern Library
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/multi-agent/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Multi-Agent
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/persistence/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Persistence
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/llm-toolkit/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    LLM Toolkit
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_7_4" >
        
          
          <label class="md-nav__link" for="__nav_7_4" id="__nav_7_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Wizards
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_7_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    Wizards
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/wizards/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Industry Wizards
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/software-wizards/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Software Wizards
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/ai-wizards.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    AI Wizards
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_7_5" >
        
          
          <label class="md-nav__link" for="__nav_7_5" id="__nav_7_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Help
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_7_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7_5">
            <span class="md-nav__icon md-icon"></span>
            
  
    Help
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/FAQ/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    FAQ
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/TROUBLESHOOTING/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Troubleshooting
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/glossary/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Glossary
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/USER_GUIDE/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    User Guide
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/SHORT_TERM_MEMORY/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Short-Term Memory
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../contributing/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Contributing
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_9" >
        
          
          <label class="md-nav__link" for="__nav_9" id="__nav_9_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Book
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_9_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_9">
            <span class="md-nav__icon md-icon"></span>
            
  
    Book
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../get-the-book/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Get the Book
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../book-cover/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Cover
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guides/how-to-read-this-book/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    How to Read
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guides/preface/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Preface
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guides/foreword/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Foreword by Claude
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#description-wizard-factory-enhancement-discovery-report-system-architecture-overview-with-components-data-flow-and-design-decisions-understand-the-framework-internals" class="md-nav__link">
    <span class="md-ellipsis">
      
        description: Wizard Factory Enhancement - Discovery Report: System architecture overview with components, data flow, and design decisions. Understand the framework internals.
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#wizard-factory-enhancement-discovery-report" class="md-nav__link">
    <span class="md-ellipsis">
      
        Wizard Factory Enhancement - Discovery Report
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Wizard Factory Enhancement - Discovery Report">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#executive-summary" class="md-nav__link">
    <span class="md-ellipsis">
      
        Executive Summary
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#1-existing-infrastructure-analysis" class="md-nav__link">
    <span class="md-ellipsis">
      
        1. Existing Infrastructure Analysis
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="1. Existing Infrastructure Analysis">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#11-wizard-inventory-78-total" class="md-nav__link">
    <span class="md-ellipsis">
      
        1.1 Wizard Inventory (78 Total)
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="1.1 Wizard Inventory (78 Total)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#healthcare-wizards-16-wizards" class="md-nav__link">
    <span class="md-ellipsis">
      
        Healthcare Wizards (16 wizards)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#domain-wizards-16-wizards" class="md-nav__link">
    <span class="md-ellipsis">
      
        Domain Wizards (16 wizards)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#coach-wizards-16-wizards" class="md-nav__link">
    <span class="md-ellipsis">
      
        Coach Wizards (16 wizards)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ai-software-wizards-12-wizards" class="md-nav__link">
    <span class="md-ellipsis">
      
        AI Software Wizards (12 wizards)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#coach-examples-18-wizards" class="md-nav__link">
    <span class="md-ellipsis">
      
        Coach Examples (18 wizards)
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#12-current-registration-system" class="md-nav__link">
    <span class="md-ellipsis">
      
        1.2 Current Registration System
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-extracted-patterns" class="md-nav__link">
    <span class="md-ellipsis">
      
        2. Extracted Patterns
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="2. Extracted Patterns">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#21-structural-patterns" class="md-nav__link">
    <span class="md-ellipsis">
      
        2.1 Structural Patterns
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="2.1 Structural Patterns">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#pattern-linear-flow" class="md-nav__link">
    <span class="md-ellipsis">
      
        Pattern: Linear Flow
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pattern-phased-processing" class="md-nav__link">
    <span class="md-ellipsis">
      
        Pattern: Phased Processing
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pattern-session-based-wizard" class="md-nav__link">
    <span class="md-ellipsis">
      
        Pattern: Session-Based Wizard
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#22-input-patterns" class="md-nav__link">
    <span class="md-ellipsis">
      
        2.2 Input Patterns
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="2.2 Input Patterns">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#pattern-structured-fields" class="md-nav__link">
    <span class="md-ellipsis">
      
        Pattern: Structured Fields
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pattern-code-analysis-input" class="md-nav__link">
    <span class="md-ellipsis">
      
        Pattern: Code Analysis Input
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pattern-context-based-input" class="md-nav__link">
    <span class="md-ellipsis">
      
        Pattern: Context-Based Input
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#23-validation-patterns" class="md-nav__link">
    <span class="md-ellipsis">
      
        2.3 Validation Patterns
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="2.3 Validation Patterns">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#pattern-config-validation" class="md-nav__link">
    <span class="md-ellipsis">
      
        Pattern: Config Validation
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pattern-step-validation" class="md-nav__link">
    <span class="md-ellipsis">
      
        Pattern: Step Validation
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pattern-user-approval" class="md-nav__link">
    <span class="md-ellipsis">
      
        Pattern: User Approval
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#24-behavior-patterns" class="md-nav__link">
    <span class="md-ellipsis">
      
        2.4 Behavior Patterns
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="2.4 Behavior Patterns">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#pattern-risk-assessment" class="md-nav__link">
    <span class="md-ellipsis">
      
        Pattern: Risk Assessment
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pattern-ai-enhancement" class="md-nav__link">
    <span class="md-ellipsis">
      
        Pattern: AI Enhancement
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pattern-prediction-level-4-anticipatory" class="md-nav__link">
    <span class="md-ellipsis">
      
        Pattern: Prediction (Level 4 Anticipatory)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pattern-fix-application" class="md-nav__link">
    <span class="md-ellipsis">
      
        Pattern: Fix Application
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#25-empathy-patterns" class="md-nav__link">
    <span class="md-ellipsis">
      
        2.5 Empathy Patterns
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="2.5 Empathy Patterns">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#pattern-empathy-levels-0-4" class="md-nav__link">
    <span class="md-ellipsis">
      
        Pattern: Empathy Levels (0-4)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pattern-educational-banners" class="md-nav__link">
    <span class="md-ellipsis">
      
        Pattern: Educational Banners
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-pydantic-based-pattern-library-design" class="md-nav__link">
    <span class="md-ellipsis">
      
        3. Pydantic-Based Pattern Library Design
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="3. Pydantic-Based Pattern Library Design">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#31-why-pydantic-over-xml" class="md-nav__link">
    <span class="md-ellipsis">
      
        3.1 Why Pydantic Over XML?
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#32-pattern-library-architecture" class="md-nav__link">
    <span class="md-ellipsis">
      
        3.2 Pattern Library Architecture
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#33-pattern-registry" class="md-nav__link">
    <span class="md-ellipsis">
      
        3.3 Pattern Registry
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4-phased-implementation-plan" class="md-nav__link">
    <span class="md-ellipsis">
      
        4. Phased Implementation Plan
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="4. Phased Implementation Plan">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#phase-1-pattern-library-2-weeks" class="md-nav__link">
    <span class="md-ellipsis">
      
        Phase 1: Pattern Library (2 weeks)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#phase-2-hot-reload-infrastructure-1-week" class="md-nav__link">
    <span class="md-ellipsis">
      
        Phase 2: Hot-Reload Infrastructure (1 week)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#phase-3-risk-driven-test-generator-2-weeks" class="md-nav__link">
    <span class="md-ellipsis">
      
        Phase 3: Risk-Driven Test Generator (2 weeks)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#phase-4-methodology-scaffolding-1-week" class="md-nav__link">
    <span class="md-ellipsis">
      
        Phase 4: Methodology Scaffolding (1 week)
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#5-implementation-timeline" class="md-nav__link">
    <span class="md-ellipsis">
      
        5. Implementation Timeline
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#6-success-metrics" class="md-nav__link">
    <span class="md-ellipsis">
      
        6. Success Metrics
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="6. Success Metrics">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#pattern-library-phase-1" class="md-nav__link">
    <span class="md-ellipsis">
      
        Pattern Library (Phase 1)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#hot-reload-phase-2" class="md-nav__link">
    <span class="md-ellipsis">
      
        Hot-Reload (Phase 2)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#test-generator-phase-3" class="md-nav__link">
    <span class="md-ellipsis">
      
        Test Generator (Phase 3)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#scaffolding-phase-4" class="md-nav__link">
    <span class="md-ellipsis">
      
        Scaffolding (Phase 4)
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#7-comparison-with-original-proposal" class="md-nav__link">
    <span class="md-ellipsis">
      
        7. Comparison with Original Proposal
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#8-next-steps" class="md-nav__link">
    <span class="md-ellipsis">
      
        8. Next Steps
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#9-appendices" class="md-nav__link">
    <span class="md-ellipsis">
      
        9. Appendices
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="9. Appendices">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#a-complete-wizard-list-78-total" class="md-nav__link">
    <span class="md-ellipsis">
      
        A. Complete Wizard List (78 Total)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#b-pattern-frequency-analysis" class="md-nav__link">
    <span class="md-ellipsis">
      
        B. Pattern Frequency Analysis
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#c-references" class="md-nav__link">
    <span class="md-ellipsis">
      
        C. References
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              
              <article class="md-content__inner md-typeset">
                
                  


  
  


<hr />
<h2 id="description-wizard-factory-enhancement-discovery-report-system-architecture-overview-with-components-data-flow-and-design-decisions-understand-the-framework-internals">description: Wizard Factory Enhancement - Discovery Report: System architecture overview with components, data flow, and design decisions. Understand the framework internals.<a class="headerlink" href="#description-wizard-factory-enhancement-discovery-report-system-architecture-overview-with-components-data-flow-and-design-decisions-understand-the-framework-internals" title="Permanent link">&para;</a></h2>
<h1 id="wizard-factory-enhancement-discovery-report">Wizard Factory Enhancement - Discovery Report<a class="headerlink" href="#wizard-factory-enhancement-discovery-report" title="Permanent link">&para;</a></h1>
<p><strong>Date:</strong> 2026-01-05
<strong>Phase:</strong> Discovery &amp; Pattern Extraction
<strong>Status:</strong> Complete</p>
<h2 id="executive-summary">Executive Summary<a class="headerlink" href="#executive-summary" title="Permanent link">&para;</a></h2>
<p>This report documents findings from analyzing the existing wizard infrastructure in Attune AI. We identified <strong>78 existing wizards</strong> across 4 categories and extracted <strong>5 major pattern categories</strong> that will form the foundation of the Wizard Factory enhancement.</p>
<p><strong>Key Finding:</strong> Rather than building an abstract pattern library from scratch, we can extract proven patterns from our existing 78 wizards and create a Pydantic-based system that makes wizard creation 10x faster.</p>
<p><strong>Recommended Approach:</strong> Phased implementation starting with Pattern Library (2 weeks), followed by Hot-Reload (1 week), Test Generator (2 weeks), and Methodology Scaffolding (1 week).</p>
<hr />
<h2 id="1-existing-infrastructure-analysis">1. Existing Infrastructure Analysis<a class="headerlink" href="#1-existing-infrastructure-analysis" title="Permanent link">&para;</a></h2>
<h3 id="11-wizard-inventory-78-total">1.1 Wizard Inventory (78 Total)<a class="headerlink" href="#11-wizard-inventory-78-total" title="Permanent link">&para;</a></h3>
<h4 id="healthcare-wizards-16-wizards">Healthcare Wizards (16 wizards)<a class="headerlink" href="#healthcare-wizards-16-wizards" title="Permanent link">&para;</a></h4>
<p>Located in: <code>wizards/</code></p>
<ul>
<li>SOAP Note Documentation</li>
<li>SBAR Communication</li>
<li>Shift Handoff</li>
<li>Admission Assessment</li>
<li>Discharge Summary</li>
<li>Discharge Planning</li>
<li>Care Planning</li>
<li>Clinical Assessment</li>
<li>Nursing Assessment</li>
<li>Treatment Planning</li>
<li>Patient Education</li>
<li>Medication Reconciliation</li>
<li>Dosage Calculation</li>
<li>Quality Improvement</li>
<li>Incident Reporting</li>
</ul>
<h4 id="domain-wizards-16-wizards">Domain Wizards (16 wizards)<a class="headerlink" href="#domain-wizards-16-wizards" title="Permanent link">&para;</a></h4>
<p>Located in: <code>attune_llm/wizards/</code></p>
<p>Base: <code>BaseWizard</code> class using <code>WizardConfig</code> dataclass</p>
<p>Domains:
- Healthcare
- Finance
- Legal
- Education
- Customer Support
- HR
- Sales
- Real Estate
- Insurance
- Accounting
- Research
- Government
- Retail
- Manufacturing
- Logistics
- Technology</p>
<p><strong>Pattern:</strong> All use <code>process(user_input, user_id, empathy_level, session_context)</code>  dict</p>
<h4 id="coach-wizards-16-wizards">Coach Wizards (16 wizards)<a class="headerlink" href="#coach-wizards-16-wizards" title="Permanent link">&para;</a></h4>
<p>Located in: <code>coach_wizards/</code></p>
<p>Base: <code>BaseCoachWizard</code> with Level 4 Anticipatory Empathy</p>
<p>Wizards:
- Debugging
- Testing
- Security
- Documentation
- Performance
- Refactoring
- Database
- API Design
- Compliance
- Monitoring
- CI/CD
- Accessibility
- Localization
- Migration
- Observability
- Scaling</p>
<p><strong>Pattern:</strong> All use <code>analyze_code(code, file_path, language)</code>  list[WizardIssue]</p>
<h4 id="ai-software-wizards-12-wizards">AI Software Wizards (12 wizards)<a class="headerlink" href="#ai-software-wizards-12-wizards" title="Permanent link">&para;</a></h4>
<p>Located in: <code>empathy_software_plugin/wizards/</code></p>
<p>Advanced wizards with protocol-based analysis:
- Advanced Debugging (Level 4)
- Agent Orchestration
- AI Collaboration
- AI Context Window
- AI Documentation
- Enhanced Testing
- Multi-Model
- Performance Profiling
- Prompt Engineering
- RAG Pattern
- Security Analysis</p>
<p><strong>Pattern:</strong> Complex <code>analyze(context)</code>  comprehensive dict with predictions, recommendations, patterns</p>
<h4 id="coach-examples-18-wizards">Coach Examples (18 wizards)<a class="headerlink" href="#coach-examples-18-wizards" title="Permanent link">&para;</a></h4>
<p>Located in: <code>examples/coach/wizards/</code></p>
<p>Reference implementations for various domains.</p>
<h3 id="12-current-registration-system">1.2 Current Registration System<a class="headerlink" href="#12-current-registration-system" title="Permanent link">&para;</a></h3>
<p><strong>File:</strong> <code>backend/api/wizard_api.py</code></p>
<p><strong>Architecture:</strong>
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="c1"># Simple dictionary-based registry</span>
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="n">WIZARDS</span> <span class="o">=</span> <span class="p">{}</span>
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a>
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a><span class="k">def</span><span class="w"> </span><span class="nf">register_wizard</span><span class="p">(</span><span class="n">wizard_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">wizard_class</span><span class="p">:</span> <span class="nb">type</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Register with graceful exception handling&quot;&quot;&quot;</span>
<a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a>    <span class="k">try</span><span class="p">:</span>
<a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a>        <span class="n">WIZARDS</span><span class="p">[</span><span class="n">wizard_id</span><span class="p">]</span> <span class="o">=</span> <span class="n">wizard_class</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
<a id="__codelineno-0-8" name="__codelineno-0-8" href="#__codelineno-0-8"></a>        <span class="k">return</span> <span class="kc">True</span>
<a id="__codelineno-0-9" name="__codelineno-0-9" href="#__codelineno-0-9"></a>    <span class="k">except</span> <span class="p">(</span><span class="ne">ImportError</span><span class="p">,</span> <span class="ne">ValueError</span><span class="p">,</span> <span class="ne">OSError</span><span class="p">,</span> <span class="ne">IOError</span><span class="p">)</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
<a id="__codelineno-0-10" name="__codelineno-0-10" href="#__codelineno-0-10"></a>        <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Wizard init failed: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-0-11" name="__codelineno-0-11" href="#__codelineno-0-11"></a>        <span class="k">return</span> <span class="kc">False</span>
<a id="__codelineno-0-12" name="__codelineno-0-12" href="#__codelineno-0-12"></a>    <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
<a id="__codelineno-0-13" name="__codelineno-0-13" href="#__codelineno-0-13"></a>        <span class="n">logger</span><span class="o">.</span><span class="n">exception</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Unexpected error&quot;</span><span class="p">)</span>
<a id="__codelineno-0-14" name="__codelineno-0-14" href="#__codelineno-0-14"></a>        <span class="k">return</span> <span class="kc">False</span>
</code></pre></div></p>
<p><strong>Interfaces Supported:</strong>
- <code>process()</code> - Domain wizards
- <code>analyze_code()</code> - Coach wizards
- <code>analyze()</code> - AI wizards</p>
<p><strong>Key Insight:</strong> Simple, file-based registration works well. Enhancement should preserve this simplicity while adding pattern reusability.</p>
<hr />
<h2 id="2-extracted-patterns">2. Extracted Patterns<a class="headerlink" href="#2-extracted-patterns" title="Permanent link">&para;</a></h2>
<h3 id="21-structural-patterns">2.1 Structural Patterns<a class="headerlink" href="#21-structural-patterns" title="Permanent link">&para;</a></h3>
<h4 id="pattern-linear-flow">Pattern: Linear Flow<a class="headerlink" href="#pattern-linear-flow" title="Permanent link">&para;</a></h4>
<p><strong>Example:</strong> SOAP Note Wizard
<strong>Structure:</strong> Step 1  Step 2  Step 3  Step 4  Review  Finalize</p>
<p><strong>Implementation:</strong>
<div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="n">SOAP_NOTE_STEPS</span> <span class="o">=</span> <span class="p">{</span>
<a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a>    <span class="mi">1</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;title&quot;</span><span class="p">:</span> <span class="s2">&quot;Subjective&quot;</span><span class="p">,</span> <span class="s2">&quot;fields&quot;</span><span class="p">:</span> <span class="p">[</span><span class="o">...</span><span class="p">],</span> <span class="s2">&quot;help_text&quot;</span><span class="p">:</span> <span class="s2">&quot;...&quot;</span><span class="p">},</span>
<a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a>    <span class="mi">2</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;title&quot;</span><span class="p">:</span> <span class="s2">&quot;Objective&quot;</span><span class="p">,</span> <span class="s2">&quot;fields&quot;</span><span class="p">:</span> <span class="p">[</span><span class="o">...</span><span class="p">],</span> <span class="s2">&quot;help_text&quot;</span><span class="p">:</span> <span class="s2">&quot;...&quot;</span><span class="p">},</span>
<a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a>    <span class="mi">3</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;title&quot;</span><span class="p">:</span> <span class="s2">&quot;Assessment&quot;</span><span class="p">,</span> <span class="s2">&quot;fields&quot;</span><span class="p">:</span> <span class="p">[</span><span class="o">...</span><span class="p">],</span> <span class="s2">&quot;help_text&quot;</span><span class="p">:</span> <span class="s2">&quot;...&quot;</span><span class="p">},</span>
<a id="__codelineno-1-5" name="__codelineno-1-5" href="#__codelineno-1-5"></a>    <span class="mi">4</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;title&quot;</span><span class="p">:</span> <span class="s2">&quot;Plan&quot;</span><span class="p">,</span> <span class="s2">&quot;fields&quot;</span><span class="p">:</span> <span class="p">[</span><span class="o">...</span><span class="p">],</span> <span class="s2">&quot;help_text&quot;</span><span class="p">:</span> <span class="s2">&quot;...&quot;</span><span class="p">},</span>
<a id="__codelineno-1-6" name="__codelineno-1-6" href="#__codelineno-1-6"></a>    <span class="mi">5</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;title&quot;</span><span class="p">:</span> <span class="s2">&quot;Review &amp; Finalize&quot;</span><span class="p">,</span> <span class="s2">&quot;is_review_step&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">},</span>
<a id="__codelineno-1-7" name="__codelineno-1-7" href="#__codelineno-1-7"></a><span class="p">}</span>
</code></pre></div></p>
<p><strong>Reusability:</strong> 80% of healthcare wizards use this pattern
<strong>Frequency:</strong> 16 wizards</p>
<hr />
<h4 id="pattern-phased-processing">Pattern: Phased Processing<a class="headerlink" href="#pattern-phased-processing" title="Permanent link">&para;</a></h4>
<p><strong>Example:</strong> Advanced Debugging Wizard
<strong>Structure:</strong> Parse  Load Config  Analyze  Group by Fixability  Apply Fixes  Verify</p>
<p><strong>Implementation:</strong>
<div class="highlight"><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">analyze</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">context</span><span class="p">):</span>
<a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a>    <span class="c1"># Phase 1: Parse inputs</span>
<a id="__codelineno-2-3" name="__codelineno-2-3" href="#__codelineno-2-3"></a>    <span class="n">all_issues</span> <span class="o">=</span> <span class="n">parse_linter_output</span><span class="p">(</span><span class="n">linter_name</span><span class="p">,</span> <span class="n">output</span><span class="p">)</span>
<a id="__codelineno-2-4" name="__codelineno-2-4" href="#__codelineno-2-4"></a>
<a id="__codelineno-2-5" name="__codelineno-2-5" href="#__codelineno-2-5"></a>    <span class="c1"># Phase 2: Load configs</span>
<a id="__codelineno-2-6" name="__codelineno-2-6" href="#__codelineno-2-6"></a>    <span class="n">config</span> <span class="o">=</span> <span class="n">load_config</span><span class="p">(</span><span class="n">linter_name</span><span class="p">,</span> <span class="n">start_dir</span><span class="o">=</span><span class="n">project_path</span><span class="p">)</span>
<a id="__codelineno-2-7" name="__codelineno-2-7" href="#__codelineno-2-7"></a>
<a id="__codelineno-2-8" name="__codelineno-2-8" href="#__codelineno-2-8"></a>    <span class="c1"># Phase 3: Risk analysis (Level 4)</span>
<a id="__codelineno-2-9" name="__codelineno-2-9" href="#__codelineno-2-9"></a>    <span class="n">risk_assessments</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">bug_analyzer</span><span class="o">.</span><span class="n">analyze</span><span class="p">(</span><span class="n">all_issues</span><span class="p">)</span>
<a id="__codelineno-2-10" name="__codelineno-2-10" href="#__codelineno-2-10"></a>
<a id="__codelineno-2-11" name="__codelineno-2-11" href="#__codelineno-2-11"></a>    <span class="c1"># Phase 4: Group by fixability</span>
<a id="__codelineno-2-12" name="__codelineno-2-12" href="#__codelineno-2-12"></a>    <span class="n">fixability</span> <span class="o">=</span> <span class="n">group_issues_by_fixability</span><span class="p">(</span><span class="n">linter_name</span><span class="p">,</span> <span class="n">issues</span><span class="p">)</span>
<a id="__codelineno-2-13" name="__codelineno-2-13" href="#__codelineno-2-13"></a>
<a id="__codelineno-2-14" name="__codelineno-2-14" href="#__codelineno-2-14"></a>    <span class="c1"># Phase 5: Apply fixes</span>
<a id="__codelineno-2-15" name="__codelineno-2-15" href="#__codelineno-2-15"></a>    <span class="k">if</span> <span class="n">auto_fix</span><span class="p">:</span>
<a id="__codelineno-2-16" name="__codelineno-2-16" href="#__codelineno-2-16"></a>        <span class="n">fixes</span> <span class="o">=</span> <span class="n">apply_fixes</span><span class="p">(</span><span class="n">linter_name</span><span class="p">,</span> <span class="n">issues</span><span class="p">,</span> <span class="n">auto_only</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<a id="__codelineno-2-17" name="__codelineno-2-17" href="#__codelineno-2-17"></a>
<a id="__codelineno-2-18" name="__codelineno-2-18" href="#__codelineno-2-18"></a>    <span class="c1"># Phase 6: Verification</span>
<a id="__codelineno-2-19" name="__codelineno-2-19" href="#__codelineno-2-19"></a>    <span class="k">if</span> <span class="n">verify</span><span class="p">:</span>
<a id="__codelineno-2-20" name="__codelineno-2-20" href="#__codelineno-2-20"></a>        <span class="n">verification</span> <span class="o">=</span> <span class="n">verify_fixes</span><span class="p">(</span><span class="n">linter_name</span><span class="p">,</span> <span class="n">project_path</span><span class="p">,</span> <span class="n">issues</span><span class="p">)</span>
<a id="__codelineno-2-21" name="__codelineno-2-21" href="#__codelineno-2-21"></a>
<a id="__codelineno-2-22" name="__codelineno-2-22" href="#__codelineno-2-22"></a>    <span class="k">return</span> <span class="p">{</span><span class="o">...</span><span class="p">}</span>
</code></pre></div></p>
<p><strong>Reusability:</strong> All AI wizards use variations of this
<strong>Frequency:</strong> 12 wizards</p>
<hr />
<h4 id="pattern-session-based-wizard">Pattern: Session-Based Wizard<a class="headerlink" href="#pattern-session-based-wizard" title="Permanent link">&para;</a></h4>
<p><strong>Example:</strong> SOAP Note Wizard
<strong>Structure:</strong> Session storage + multi-step state management + user approval</p>
<p><strong>Implementation:</strong>
<div class="highlight"><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a><span class="c1"># Start wizard  get wizard_id</span>
<a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a><span class="n">wizard_id</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">uuid4</span><span class="p">())</span>
<a id="__codelineno-3-3" name="__codelineno-3-3" href="#__codelineno-3-3"></a><span class="n">session_data</span> <span class="o">=</span> <span class="p">{</span>
<a id="__codelineno-3-4" name="__codelineno-3-4" href="#__codelineno-3-4"></a>    <span class="s2">&quot;wizard_id&quot;</span><span class="p">:</span> <span class="n">wizard_id</span><span class="p">,</span>
<a id="__codelineno-3-5" name="__codelineno-3-5" href="#__codelineno-3-5"></a>    <span class="s2">&quot;current_step&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
<a id="__codelineno-3-6" name="__codelineno-3-6" href="#__codelineno-3-6"></a>    <span class="s2">&quot;total_steps&quot;</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span>
<a id="__codelineno-3-7" name="__codelineno-3-7" href="#__codelineno-3-7"></a>    <span class="s2">&quot;collected_data&quot;</span><span class="p">:</span> <span class="p">{},</span>
<a id="__codelineno-3-8" name="__codelineno-3-8" href="#__codelineno-3-8"></a><span class="p">}</span>
<a id="__codelineno-3-9" name="__codelineno-3-9" href="#__codelineno-3-9"></a><span class="k">await</span> <span class="n">_store_wizard_session</span><span class="p">(</span><span class="n">wizard_id</span><span class="p">,</span> <span class="n">session_data</span><span class="p">)</span>
<a id="__codelineno-3-10" name="__codelineno-3-10" href="#__codelineno-3-10"></a>
<a id="__codelineno-3-11" name="__codelineno-3-11" href="#__codelineno-3-11"></a><span class="c1"># Submit each step</span>
<a id="__codelineno-3-12" name="__codelineno-3-12" href="#__codelineno-3-12"></a><span class="n">session</span><span class="p">[</span><span class="s2">&quot;collected_data&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">step_data</span><span class="p">)</span>
<a id="__codelineno-3-13" name="__codelineno-3-13" href="#__codelineno-3-13"></a><span class="n">session</span><span class="p">[</span><span class="s2">&quot;current_step&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">next_step</span>
<a id="__codelineno-3-14" name="__codelineno-3-14" href="#__codelineno-3-14"></a><span class="k">await</span> <span class="n">_store_wizard_session</span><span class="p">(</span><span class="n">wizard_id</span><span class="p">,</span> <span class="n">session</span><span class="p">)</span>
<a id="__codelineno-3-15" name="__codelineno-3-15" href="#__codelineno-3-15"></a>
<a id="__codelineno-3-16" name="__codelineno-3-16" href="#__codelineno-3-16"></a><span class="c1"># Preview  Approve  Finalize</span>
<a id="__codelineno-3-17" name="__codelineno-3-17" href="#__codelineno-3-17"></a><span class="n">preview</span> <span class="o">=</span> <span class="n">_generate_report</span><span class="p">(</span><span class="n">session</span><span class="p">[</span><span class="s2">&quot;collected_data&quot;</span><span class="p">])</span>
<a id="__codelineno-3-18" name="__codelineno-3-18" href="#__codelineno-3-18"></a><span class="k">if</span> <span class="n">user_approved</span><span class="p">:</span>
<a id="__codelineno-3-19" name="__codelineno-3-19" href="#__codelineno-3-19"></a>    <span class="n">session</span><span class="p">[</span><span class="s2">&quot;completed&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span>
<a id="__codelineno-3-20" name="__codelineno-3-20" href="#__codelineno-3-20"></a>    <span class="n">session</span><span class="p">[</span><span class="s2">&quot;final_report&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">preview</span>
</code></pre></div></p>
<p><strong>Reusability:</strong> All healthcare wizards with multi-step flows
<strong>Frequency:</strong> 16 wizards</p>
<hr />
<h3 id="22-input-patterns">2.2 Input Patterns<a class="headerlink" href="#22-input-patterns" title="Permanent link">&para;</a></h3>
<h4 id="pattern-structured-fields">Pattern: Structured Fields<a class="headerlink" href="#pattern-structured-fields" title="Permanent link">&para;</a></h4>
<p><strong>Example:</strong> SOAP Note, Care Plan, Assessment wizards
<strong>Fields:</strong> Defined per step with validation</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a><span class="p">{</span>
<a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a>    <span class="s2">&quot;step&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
<a id="__codelineno-4-3" name="__codelineno-4-3" href="#__codelineno-4-3"></a>    <span class="s2">&quot;fields&quot;</span><span class="p">:</span> <span class="p">[</span>
<a id="__codelineno-4-4" name="__codelineno-4-4" href="#__codelineno-4-4"></a>        <span class="s2">&quot;chief_complaint&quot;</span><span class="p">,</span>
<a id="__codelineno-4-5" name="__codelineno-4-5" href="#__codelineno-4-5"></a>        <span class="s2">&quot;history_present_illness&quot;</span><span class="p">,</span>
<a id="__codelineno-4-6" name="__codelineno-4-6" href="#__codelineno-4-6"></a>        <span class="s2">&quot;patient_reported_symptoms&quot;</span><span class="p">,</span>
<a id="__codelineno-4-7" name="__codelineno-4-7" href="#__codelineno-4-7"></a>        <span class="s2">&quot;pain_description&quot;</span><span class="p">,</span>
<a id="__codelineno-4-8" name="__codelineno-4-8" href="#__codelineno-4-8"></a>    <span class="p">],</span>
<a id="__codelineno-4-9" name="__codelineno-4-9" href="#__codelineno-4-9"></a><span class="p">}</span>
</code></pre></div>
<p><strong>Reusability:</strong> 90% of healthcare wizards
<strong>Frequency:</strong> 16 wizards</p>
<hr />
<h4 id="pattern-code-analysis-input">Pattern: Code Analysis Input<a class="headerlink" href="#pattern-code-analysis-input" title="Permanent link">&para;</a></h4>
<p><strong>Example:</strong> All coach wizards
<strong>Input:</strong> <code>(code: str, file_path: str, language: str)</code></p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a><span class="k">def</span><span class="w"> </span><span class="nf">analyze_code</span><span class="p">(</span>
<a id="__codelineno-5-2" name="__codelineno-5-2" href="#__codelineno-5-2"></a>    <span class="bp">self</span><span class="p">,</span>
<a id="__codelineno-5-3" name="__codelineno-5-3" href="#__codelineno-5-3"></a>    <span class="n">code</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
<a id="__codelineno-5-4" name="__codelineno-5-4" href="#__codelineno-5-4"></a>    <span class="n">file_path</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
<a id="__codelineno-5-5" name="__codelineno-5-5" href="#__codelineno-5-5"></a>    <span class="n">language</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-5-6" name="__codelineno-5-6" href="#__codelineno-5-6"></a><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">WizardIssue</span><span class="p">]:</span>
<a id="__codelineno-5-7" name="__codelineno-5-7" href="#__codelineno-5-7"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Analyze code for issues&quot;&quot;&quot;</span>
<a id="__codelineno-5-8" name="__codelineno-5-8" href="#__codelineno-5-8"></a>    <span class="k">pass</span>
</code></pre></div>
<p><strong>Reusability:</strong> All coach wizards
<strong>Frequency:</strong> 16 wizards</p>
<hr />
<h4 id="pattern-context-based-input">Pattern: Context-Based Input<a class="headerlink" href="#pattern-context-based-input" title="Permanent link">&para;</a></h4>
<p><strong>Example:</strong> AI wizards
<strong>Input:</strong> Flexible dict with wizard-specific keys</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a><span class="n">context</span> <span class="o">=</span> <span class="p">{</span>
<a id="__codelineno-6-2" name="__codelineno-6-2" href="#__codelineno-6-2"></a>    <span class="s2">&quot;project_path&quot;</span><span class="p">:</span> <span class="s2">&quot;.&quot;</span><span class="p">,</span>
<a id="__codelineno-6-3" name="__codelineno-6-3" href="#__codelineno-6-3"></a>    <span class="s2">&quot;linters&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;eslint&quot;</span><span class="p">:</span> <span class="s2">&quot;output.json&quot;</span><span class="p">},</span>
<a id="__codelineno-6-4" name="__codelineno-6-4" href="#__codelineno-6-4"></a>    <span class="s2">&quot;configs&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;eslint&quot;</span><span class="p">:</span> <span class="s2">&quot;.eslintrc.json&quot;</span><span class="p">},</span>
<a id="__codelineno-6-5" name="__codelineno-6-5" href="#__codelineno-6-5"></a>    <span class="s2">&quot;auto_fix&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
<a id="__codelineno-6-6" name="__codelineno-6-6" href="#__codelineno-6-6"></a>    <span class="s2">&quot;verify&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
<a id="__codelineno-6-7" name="__codelineno-6-7" href="#__codelineno-6-7"></a><span class="p">}</span>
<a id="__codelineno-6-8" name="__codelineno-6-8" href="#__codelineno-6-8"></a><span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="n">wizard</span><span class="o">.</span><span class="n">analyze</span><span class="p">(</span><span class="n">context</span><span class="p">)</span>
</code></pre></div>
<p><strong>Reusability:</strong> All AI wizards
<strong>Frequency:</strong> 12 wizards</p>
<hr />
<h3 id="23-validation-patterns">2.3 Validation Patterns<a class="headerlink" href="#23-validation-patterns" title="Permanent link">&para;</a></h3>
<h4 id="pattern-config-validation">Pattern: Config Validation<a class="headerlink" href="#pattern-config-validation" title="Permanent link">&para;</a></h4>
<p><strong>Example:</strong> BaseWizard</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a><span class="k">def</span><span class="w"> </span><span class="nf">_validate_config</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<a id="__codelineno-7-2" name="__codelineno-7-2" href="#__codelineno-7-2"></a>    <span class="k">if</span> <span class="ow">not</span> <span class="mi">0</span> <span class="o">&lt;=</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">default_empathy_level</span> <span class="o">&lt;=</span> <span class="mi">4</span><span class="p">:</span>
<a id="__codelineno-7-3" name="__codelineno-7-3" href="#__codelineno-7-3"></a>        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Empathy level must be 0-4&quot;</span><span class="p">)</span>
<a id="__codelineno-7-4" name="__codelineno-7-4" href="#__codelineno-7-4"></a>
<a id="__codelineno-7-5" name="__codelineno-7-5" href="#__codelineno-7-5"></a>    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">default_classification</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;PUBLIC&quot;</span><span class="p">,</span> <span class="s2">&quot;INTERNAL&quot;</span><span class="p">,</span> <span class="s2">&quot;SENSITIVE&quot;</span><span class="p">]:</span>
<a id="__codelineno-7-6" name="__codelineno-7-6" href="#__codelineno-7-6"></a>        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Invalid classification&quot;</span><span class="p">)</span>
</code></pre></div>
<p><strong>Reusability:</strong> All domain wizards
<strong>Frequency:</strong> 16 wizards</p>
<hr />
<h4 id="pattern-step-validation">Pattern: Step Validation<a class="headerlink" href="#pattern-step-validation" title="Permanent link">&para;</a></h4>
<p><strong>Example:</strong> SOAP Note Wizard</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a><span class="n">submitted_step</span> <span class="o">=</span> <span class="n">step_data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;step&quot;</span><span class="p">,</span> <span class="n">current_step</span><span class="p">)</span>
<a id="__codelineno-8-2" name="__codelineno-8-2" href="#__codelineno-8-2"></a><span class="k">if</span> <span class="n">submitted_step</span> <span class="o">!=</span> <span class="n">current_step</span><span class="p">:</span>
<a id="__codelineno-8-3" name="__codelineno-8-3" href="#__codelineno-8-3"></a>    <span class="k">raise</span> <span class="n">HTTPException</span><span class="p">(</span>
<a id="__codelineno-8-4" name="__codelineno-8-4" href="#__codelineno-8-4"></a>        <span class="n">status_code</span><span class="o">=</span><span class="mi">422</span><span class="p">,</span>
<a id="__codelineno-8-5" name="__codelineno-8-5" href="#__codelineno-8-5"></a>        <span class="n">detail</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;Expected step </span><span class="si">{</span><span class="n">current_step</span><span class="si">}</span><span class="s2">, got step </span><span class="si">{</span><span class="n">submitted_step</span><span class="si">}</span><span class="s2">&quot;</span>
<a id="__codelineno-8-6" name="__codelineno-8-6" href="#__codelineno-8-6"></a>    <span class="p">)</span>
</code></pre></div>
<p><strong>Reusability:</strong> All multi-step healthcare wizards
<strong>Frequency:</strong> 16 wizards</p>
<hr />
<h4 id="pattern-user-approval">Pattern: User Approval<a class="headerlink" href="#pattern-user-approval" title="Permanent link">&para;</a></h4>
<p><strong>Example:</strong> SOAP Note Wizard - Preview  Explicit Approval  Finalize</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a><span class="c1"># Generate preview (does NOT finalize)</span>
<a id="__codelineno-9-2" name="__codelineno-9-2" href="#__codelineno-9-2"></a><span class="n">preview</span> <span class="o">=</span> <span class="n">_generate_report</span><span class="p">(</span><span class="n">session</span><span class="p">[</span><span class="s2">&quot;collected_data&quot;</span><span class="p">])</span>
<a id="__codelineno-9-3" name="__codelineno-9-3" href="#__codelineno-9-3"></a>
<a id="__codelineno-9-4" name="__codelineno-9-4" href="#__codelineno-9-4"></a><span class="c1"># Verify user explicitly approved</span>
<a id="__codelineno-9-5" name="__codelineno-9-5" href="#__codelineno-9-5"></a><span class="k">if</span> <span class="ow">not</span> <span class="n">approval_data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;user_approved&quot;</span><span class="p">,</span> <span class="kc">False</span><span class="p">):</span>
<a id="__codelineno-9-6" name="__codelineno-9-6" href="#__codelineno-9-6"></a>    <span class="k">raise</span> <span class="n">HTTPException</span><span class="p">(</span>
<a id="__codelineno-9-7" name="__codelineno-9-7" href="#__codelineno-9-7"></a>        <span class="n">status_code</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span>
<a id="__codelineno-9-8" name="__codelineno-9-8" href="#__codelineno-9-8"></a>        <span class="n">detail</span><span class="o">=</span><span class="s2">&quot;User approval required&quot;</span>
<a id="__codelineno-9-9" name="__codelineno-9-9" href="#__codelineno-9-9"></a>    <span class="p">)</span>
<a id="__codelineno-9-10" name="__codelineno-9-10" href="#__codelineno-9-10"></a>
<a id="__codelineno-9-11" name="__codelineno-9-11" href="#__codelineno-9-11"></a><span class="c1"># NOW mark as complete</span>
<a id="__codelineno-9-12" name="__codelineno-9-12" href="#__codelineno-9-12"></a><span class="n">session</span><span class="p">[</span><span class="s2">&quot;completed&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span>
</code></pre></div>
<p><strong>Reusability:</strong> All healthcare wizards requiring review
<strong>Frequency:</strong> 16 wizards</p>
<hr />
<h3 id="24-behavior-patterns">2.4 Behavior Patterns<a class="headerlink" href="#24-behavior-patterns" title="Permanent link">&para;</a></h3>
<h4 id="pattern-risk-assessment">Pattern: Risk Assessment<a class="headerlink" href="#pattern-risk-assessment" title="Permanent link">&para;</a></h4>
<p><strong>Example:</strong> Advanced Debugging Wizard</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a><span class="n">risk_assessments</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">bug_analyzer</span><span class="o">.</span><span class="n">analyze</span><span class="p">(</span><span class="n">all_issues</span><span class="p">)</span>
<a id="__codelineno-10-2" name="__codelineno-10-2" href="#__codelineno-10-2"></a><span class="n">risk_summary</span> <span class="o">=</span> <span class="p">{</span>
<a id="__codelineno-10-3" name="__codelineno-10-3" href="#__codelineno-10-3"></a>    <span class="s2">&quot;alert_level&quot;</span><span class="p">:</span> <span class="s2">&quot;CRITICAL&quot;</span><span class="p">,</span>
<a id="__codelineno-10-4" name="__codelineno-10-4" href="#__codelineno-10-4"></a>    <span class="s2">&quot;by_risk_level&quot;</span><span class="p">:</span> <span class="p">{</span>
<a id="__codelineno-10-5" name="__codelineno-10-5" href="#__codelineno-10-5"></a>        <span class="s2">&quot;critical&quot;</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span>
<a id="__codelineno-10-6" name="__codelineno-10-6" href="#__codelineno-10-6"></a>        <span class="s2">&quot;high&quot;</span><span class="p">:</span> <span class="mi">12</span><span class="p">,</span>
<a id="__codelineno-10-7" name="__codelineno-10-7" href="#__codelineno-10-7"></a>        <span class="s2">&quot;medium&quot;</span><span class="p">:</span> <span class="mi">8</span><span class="p">,</span>
<a id="__codelineno-10-8" name="__codelineno-10-8" href="#__codelineno-10-8"></a>    <span class="p">},</span>
<a id="__codelineno-10-9" name="__codelineno-10-9" href="#__codelineno-10-9"></a><span class="p">}</span>
</code></pre></div>
<p><strong>Reusability:</strong> All coach wizards with Level 4 Anticipatory
<strong>Frequency:</strong> 16 wizards</p>
<hr />
<h4 id="pattern-ai-enhancement">Pattern: AI Enhancement<a class="headerlink" href="#pattern-ai-enhancement" title="Permanent link">&para;</a></h4>
<p><strong>Example:</strong> SOAP Note text enhancement</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-11-1" name="__codelineno-11-1" href="#__codelineno-11-1"></a><span class="nd">@router</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="s2">&quot;/</span><span class="si">{wizard_id}</span><span class="s2">/enhance&quot;</span><span class="p">)</span>
<a id="__codelineno-11-2" name="__codelineno-11-2" href="#__codelineno-11-2"></a><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">enhance_soap_note_text</span><span class="p">(</span><span class="n">wizard_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">text_data</span><span class="p">:</span> <span class="nb">dict</span><span class="p">):</span>
<a id="__codelineno-11-3" name="__codelineno-11-3" href="#__codelineno-11-3"></a>    <span class="n">enhancement_prompt</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;&quot;&quot;</span>
<a id="__codelineno-11-4" name="__codelineno-11-4" href="#__codelineno-11-4"></a><span class="s2">    Enhance the following text for clinical documentation:</span>
<a id="__codelineno-11-5" name="__codelineno-11-5" href="#__codelineno-11-5"></a>
<a id="__codelineno-11-6" name="__codelineno-11-6" href="#__codelineno-11-6"></a><span class="s2">    Original: </span><span class="si">{</span><span class="n">original_text</span><span class="si">}</span>
<a id="__codelineno-11-7" name="__codelineno-11-7" href="#__codelineno-11-7"></a>
<a id="__codelineno-11-8" name="__codelineno-11-8" href="#__codelineno-11-8"></a><span class="s2">    Provide enhanced version with:</span>
<a id="__codelineno-11-9" name="__codelineno-11-9" href="#__codelineno-11-9"></a><span class="s2">    - Clinical terminology</span>
<a id="__codelineno-11-10" name="__codelineno-11-10" href="#__codelineno-11-10"></a><span class="s2">    - Professional tone</span>
<a id="__codelineno-11-11" name="__codelineno-11-11" href="#__codelineno-11-11"></a><span class="s2">    - SOAP note standards</span>
<a id="__codelineno-11-12" name="__codelineno-11-12" href="#__codelineno-11-12"></a><span class="s2">    &quot;&quot;&quot;</span>
<a id="__codelineno-11-13" name="__codelineno-11-13" href="#__codelineno-11-13"></a>
<a id="__codelineno-11-14" name="__codelineno-11-14" href="#__codelineno-11-14"></a>    <span class="n">chat_response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">chat_service</span><span class="o">.</span><span class="n">chat</span><span class="p">(</span><span class="n">message</span><span class="o">=</span><span class="n">enhancement_prompt</span><span class="p">)</span>
<a id="__codelineno-11-15" name="__codelineno-11-15" href="#__codelineno-11-15"></a>    <span class="k">return</span> <span class="n">enhanced_text</span>
</code></pre></div>
<p><strong>Reusability:</strong> All healthcare wizards
<strong>Frequency:</strong> 16 wizards</p>
<hr />
<h4 id="pattern-prediction-level-4-anticipatory">Pattern: Prediction (Level 4 Anticipatory)<a class="headerlink" href="#pattern-prediction-level-4-anticipatory" title="Permanent link">&para;</a></h4>
<p><strong>Example:</strong> Coach wizards</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-12-1" name="__codelineno-12-1" href="#__codelineno-12-1"></a><span class="k">def</span><span class="w"> </span><span class="nf">predict_future_issues</span><span class="p">(</span>
<a id="__codelineno-12-2" name="__codelineno-12-2" href="#__codelineno-12-2"></a>    <span class="bp">self</span><span class="p">,</span>
<a id="__codelineno-12-3" name="__codelineno-12-3" href="#__codelineno-12-3"></a>    <span class="n">code</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
<a id="__codelineno-12-4" name="__codelineno-12-4" href="#__codelineno-12-4"></a>    <span class="n">file_path</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
<a id="__codelineno-12-5" name="__codelineno-12-5" href="#__codelineno-12-5"></a>    <span class="n">project_context</span><span class="p">:</span> <span class="nb">dict</span><span class="p">,</span>
<a id="__codelineno-12-6" name="__codelineno-12-6" href="#__codelineno-12-6"></a>    <span class="n">timeline_days</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">90</span>
<a id="__codelineno-12-7" name="__codelineno-12-7" href="#__codelineno-12-7"></a><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">WizardPrediction</span><span class="p">]:</span>
<a id="__codelineno-12-8" name="__codelineno-12-8" href="#__codelineno-12-8"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Predict issues 90 days ahead using historical patterns&quot;&quot;&quot;</span>
<a id="__codelineno-12-9" name="__codelineno-12-9" href="#__codelineno-12-9"></a>    <span class="n">predictions</span> <span class="o">=</span> <span class="p">[]</span>
<a id="__codelineno-12-10" name="__codelineno-12-10" href="#__codelineno-12-10"></a>
<a id="__codelineno-12-11" name="__codelineno-12-11" href="#__codelineno-12-11"></a>    <span class="c1"># Analyze trajectory</span>
<a id="__codelineno-12-12" name="__codelineno-12-12" href="#__codelineno-12-12"></a>    <span class="k">if</span> <span class="n">risk_summary</span><span class="p">[</span><span class="s2">&quot;critical&quot;</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
<a id="__codelineno-12-13" name="__codelineno-12-13" href="#__codelineno-12-13"></a>        <span class="n">predictions</span><span class="o">.</span><span class="n">append</span><span class="p">({</span>
<a id="__codelineno-12-14" name="__codelineno-12-14" href="#__codelineno-12-14"></a>            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;production_failure_risk&quot;</span><span class="p">,</span>
<a id="__codelineno-12-15" name="__codelineno-12-15" href="#__codelineno-12-15"></a>            <span class="s2">&quot;severity&quot;</span><span class="p">:</span> <span class="s2">&quot;critical&quot;</span><span class="p">,</span>
<a id="__codelineno-12-16" name="__codelineno-12-16" href="#__codelineno-12-16"></a>            <span class="s2">&quot;prevention_steps&quot;</span><span class="p">:</span> <span class="p">[</span><span class="o">...</span><span class="p">]</span>
<a id="__codelineno-12-17" name="__codelineno-12-17" href="#__codelineno-12-17"></a>        <span class="p">})</span>
<a id="__codelineno-12-18" name="__codelineno-12-18" href="#__codelineno-12-18"></a>
<a id="__codelineno-12-19" name="__codelineno-12-19" href="#__codelineno-12-19"></a>    <span class="k">return</span> <span class="n">predictions</span>
</code></pre></div>
<p><strong>Reusability:</strong> All coach wizards
<strong>Frequency:</strong> 16 wizards</p>
<hr />
<h4 id="pattern-fix-application">Pattern: Fix Application<a class="headerlink" href="#pattern-fix-application" title="Permanent link">&para;</a></h4>
<p><strong>Example:</strong> Advanced Debugging Wizard</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-13-1" name="__codelineno-13-1" href="#__codelineno-13-1"></a><span class="c1"># Group by fixability</span>
<a id="__codelineno-13-2" name="__codelineno-13-2" href="#__codelineno-13-2"></a><span class="n">fixability</span> <span class="o">=</span> <span class="n">group_issues_by_fixability</span><span class="p">(</span><span class="n">linter_name</span><span class="p">,</span> <span class="n">issues</span><span class="p">)</span>
<a id="__codelineno-13-3" name="__codelineno-13-3" href="#__codelineno-13-3"></a><span class="c1"># {</span>
<a id="__codelineno-13-4" name="__codelineno-13-4" href="#__codelineno-13-4"></a><span class="c1">#   &quot;auto_fixable&quot;: [issue1, issue2],</span>
<a id="__codelineno-13-5" name="__codelineno-13-5" href="#__codelineno-13-5"></a><span class="c1">#   &quot;manual&quot;: [issue3, issue4]</span>
<a id="__codelineno-13-6" name="__codelineno-13-6" href="#__codelineno-13-6"></a><span class="c1"># }</span>
<a id="__codelineno-13-7" name="__codelineno-13-7" href="#__codelineno-13-7"></a>
<a id="__codelineno-13-8" name="__codelineno-13-8" href="#__codelineno-13-8"></a><span class="c1"># Apply auto-fixes</span>
<a id="__codelineno-13-9" name="__codelineno-13-9" href="#__codelineno-13-9"></a><span class="k">if</span> <span class="n">auto_fix</span><span class="p">:</span>
<a id="__codelineno-13-10" name="__codelineno-13-10" href="#__codelineno-13-10"></a>    <span class="n">fixes</span> <span class="o">=</span> <span class="n">apply_fixes</span><span class="p">(</span><span class="n">linter_name</span><span class="p">,</span> <span class="n">issues</span><span class="p">,</span> <span class="n">auto_only</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<a id="__codelineno-13-11" name="__codelineno-13-11" href="#__codelineno-13-11"></a>    <span class="n">successful</span> <span class="o">=</span> <span class="p">[</span><span class="n">f</span> <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">fixes</span> <span class="k">if</span> <span class="n">f</span><span class="o">.</span><span class="n">success</span><span class="p">]</span>
</code></pre></div>
<p><strong>Reusability:</strong> All AI wizards with code modification
<strong>Frequency:</strong> 8 wizards</p>
<hr />
<h3 id="25-empathy-patterns">2.5 Empathy Patterns<a class="headerlink" href="#25-empathy-patterns" title="Permanent link">&para;</a></h3>
<h4 id="pattern-empathy-levels-0-4">Pattern: Empathy Levels (0-4)<a class="headerlink" href="#pattern-empathy-levels-0-4" title="Permanent link">&para;</a></h4>
<p><strong>Example:</strong> BaseWizard</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-14-1" name="__codelineno-14-1" href="#__codelineno-14-1"></a><span class="nd">@dataclass</span>
<a id="__codelineno-14-2" name="__codelineno-14-2" href="#__codelineno-14-2"></a><span class="k">class</span><span class="w"> </span><span class="nc">WizardConfig</span><span class="p">:</span>
<a id="__codelineno-14-3" name="__codelineno-14-3" href="#__codelineno-14-3"></a>    <span class="n">default_empathy_level</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">2</span>  <span class="c1"># 0-4</span>
<a id="__codelineno-14-4" name="__codelineno-14-4" href="#__codelineno-14-4"></a>
<a id="__codelineno-14-5" name="__codelineno-14-5" href="#__codelineno-14-5"></a><span class="c1"># Level 0: Pure data/computation</span>
<a id="__codelineno-14-6" name="__codelineno-14-6" href="#__codelineno-14-6"></a><span class="c1"># Level 1: Reactive - responds to explicit requests</span>
<a id="__codelineno-14-7" name="__codelineno-14-7" href="#__codelineno-14-7"></a><span class="c1"># Level 2: Responsive - understands context</span>
<a id="__codelineno-14-8" name="__codelineno-14-8" href="#__codelineno-14-8"></a><span class="c1"># Level 3: Proactive - suggests improvements</span>
<a id="__codelineno-14-9" name="__codelineno-14-9" href="#__codelineno-14-9"></a><span class="c1"># Level 4: Anticipatory - predicts future needs</span>
</code></pre></div>
<p><strong>Reusability:</strong> All domain wizards
<strong>Frequency:</strong> 16 wizards</p>
<hr />
<h4 id="pattern-educational-banners">Pattern: Educational Banners<a class="headerlink" href="#pattern-educational-banners" title="Permanent link">&para;</a></h4>
<p><strong>Example:</strong> SOAP Note Wizard</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-15-1" name="__codelineno-15-1" href="#__codelineno-15-1"></a><span class="n">EDU_BANNER</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;</span>
<a id="__codelineno-15-2" name="__codelineno-15-2" href="#__codelineno-15-2"></a><span class="s2"> EDUCATIONAL TOOL NOTICE </span>
<a id="__codelineno-15-3" name="__codelineno-15-3" href="#__codelineno-15-3"></a><span class="s2">This SOAP note wizard is an educational tool for healthcare professionals.</span>
<a id="__codelineno-15-4" name="__codelineno-15-4" href="#__codelineno-15-4"></a><span class="s2">All clinical documentation should be reviewed and validated by qualified providers.</span>
<a id="__codelineno-15-5" name="__codelineno-15-5" href="#__codelineno-15-5"></a><span class="s2">&quot;&quot;&quot;</span>
</code></pre></div>
<p><strong>Reusability:</strong> All healthcare wizards
<strong>Frequency:</strong> 16 wizards</p>
<hr />
<h2 id="3-pydantic-based-pattern-library-design">3. Pydantic-Based Pattern Library Design<a class="headerlink" href="#3-pydantic-based-pattern-library-design" title="Permanent link">&para;</a></h2>
<h3 id="31-why-pydantic-over-xml">3.1 Why Pydantic Over XML?<a class="headerlink" href="#31-why-pydantic-over-xml" title="Permanent link">&para;</a></h3>
<p><strong>Original Proposal:</strong> XML schemas for pattern definitions
<strong>Recommended:</strong> Pydantic models for pattern definitions</p>
<p><strong>Comparison:</strong></p>
<table>
<thead>
<tr>
<th>Aspect</th>
<th>XML Schemas</th>
<th>Pydantic Models</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Type Safety</strong></td>
<td>Runtime only</td>
<td>Compile-time + runtime</td>
</tr>
<tr>
<td><strong>IDE Support</strong></td>
<td>Minimal</td>
<td>Full autocomplete</td>
</tr>
<tr>
<td><strong>Validation</strong></td>
<td>Manual parsing</td>
<td>Automatic</td>
</tr>
<tr>
<td><strong>Python Integration</strong></td>
<td>External format</td>
<td>Native Python</td>
</tr>
<tr>
<td><strong>Learning Curve</strong></td>
<td>Steep (XML + schema)</td>
<td>Gentle (Python dataclasses)</td>
</tr>
<tr>
<td><strong>Serialization</strong></td>
<td>Custom</td>
<td>Built-in JSON</td>
</tr>
<tr>
<td><strong>Performance</strong></td>
<td>Slower parsing</td>
<td>Faster (Python native)</td>
</tr>
<tr>
<td><strong>Maintainability</strong></td>
<td>Harder (2 languages)</td>
<td>Easier (pure Python)</td>
</tr>
</tbody>
</table>
<p><strong>Decision:</strong> Use Pydantic for better Python integration, type safety, and developer experience.</p>
<hr />
<h3 id="32-pattern-library-architecture">3.2 Pattern Library Architecture<a class="headerlink" href="#32-pattern-library-architecture" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><a id="__codelineno-16-1" name="__codelineno-16-1" href="#__codelineno-16-1"></a><span class="c1"># patterns/core.py</span>
<a id="__codelineno-16-2" name="__codelineno-16-2" href="#__codelineno-16-2"></a><span class="kn">from</span><span class="w"> </span><span class="nn">pydantic</span><span class="w"> </span><span class="kn">import</span> <span class="n">BaseModel</span><span class="p">,</span> <span class="n">Field</span>
<a id="__codelineno-16-3" name="__codelineno-16-3" href="#__codelineno-16-3"></a><span class="kn">from</span><span class="w"> </span><span class="nn">typing</span><span class="w"> </span><span class="kn">import</span> <span class="n">Literal</span><span class="p">,</span> <span class="n">Union</span>
<a id="__codelineno-16-4" name="__codelineno-16-4" href="#__codelineno-16-4"></a><span class="kn">from</span><span class="w"> </span><span class="nn">enum</span><span class="w"> </span><span class="kn">import</span> <span class="n">Enum</span>
<a id="__codelineno-16-5" name="__codelineno-16-5" href="#__codelineno-16-5"></a>
<a id="__codelineno-16-6" name="__codelineno-16-6" href="#__codelineno-16-6"></a><span class="k">class</span><span class="w"> </span><span class="nc">PatternCategory</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span> <span class="n">Enum</span><span class="p">):</span>
<a id="__codelineno-16-7" name="__codelineno-16-7" href="#__codelineno-16-7"></a>    <span class="n">STRUCTURAL</span> <span class="o">=</span> <span class="s2">&quot;structural&quot;</span>
<a id="__codelineno-16-8" name="__codelineno-16-8" href="#__codelineno-16-8"></a>    <span class="n">INPUT</span> <span class="o">=</span> <span class="s2">&quot;input&quot;</span>
<a id="__codelineno-16-9" name="__codelineno-16-9" href="#__codelineno-16-9"></a>    <span class="n">VALIDATION</span> <span class="o">=</span> <span class="s2">&quot;validation&quot;</span>
<a id="__codelineno-16-10" name="__codelineno-16-10" href="#__codelineno-16-10"></a>    <span class="n">BEHAVIOR</span> <span class="o">=</span> <span class="s2">&quot;behavior&quot;</span>
<a id="__codelineno-16-11" name="__codelineno-16-11" href="#__codelineno-16-11"></a>    <span class="n">EMPATHY</span> <span class="o">=</span> <span class="s2">&quot;empathy&quot;</span>
<a id="__codelineno-16-12" name="__codelineno-16-12" href="#__codelineno-16-12"></a>
<a id="__codelineno-16-13" name="__codelineno-16-13" href="#__codelineno-16-13"></a><span class="k">class</span><span class="w"> </span><span class="nc">BasePattern</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-16-14" name="__codelineno-16-14" href="#__codelineno-16-14"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Base class for all wizard patterns&quot;&quot;&quot;</span>
<a id="__codelineno-16-15" name="__codelineno-16-15" href="#__codelineno-16-15"></a>
<a id="__codelineno-16-16" name="__codelineno-16-16" href="#__codelineno-16-16"></a>    <span class="nb">id</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="o">...</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Unique pattern identifier&quot;</span><span class="p">)</span>
<a id="__codelineno-16-17" name="__codelineno-16-17" href="#__codelineno-16-17"></a>    <span class="n">name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="o">...</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Human-readable pattern name&quot;</span><span class="p">)</span>
<a id="__codelineno-16-18" name="__codelineno-16-18" href="#__codelineno-16-18"></a>    <span class="n">category</span><span class="p">:</span> <span class="n">PatternCategory</span>
<a id="__codelineno-16-19" name="__codelineno-16-19" href="#__codelineno-16-19"></a>    <span class="n">description</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-16-20" name="__codelineno-16-20" href="#__codelineno-16-20"></a>    <span class="n">frequency</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="o">...</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Number of wizards using this pattern&quot;</span><span class="p">)</span>
<a id="__codelineno-16-21" name="__codelineno-16-21" href="#__codelineno-16-21"></a>    <span class="n">reusability_score</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">ge</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">le</span><span class="o">=</span><span class="mf">1.0</span><span class="p">)</span>
<a id="__codelineno-16-22" name="__codelineno-16-22" href="#__codelineno-16-22"></a>    <span class="n">examples</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">default_factory</span><span class="o">=</span><span class="nb">list</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Wizard IDs using this pattern&quot;</span><span class="p">)</span>
<a id="__codelineno-16-23" name="__codelineno-16-23" href="#__codelineno-16-23"></a>
<a id="__codelineno-16-24" name="__codelineno-16-24" href="#__codelineno-16-24"></a>    <span class="k">class</span><span class="w"> </span><span class="nc">Config</span><span class="p">:</span>
<a id="__codelineno-16-25" name="__codelineno-16-25" href="#__codelineno-16-25"></a>        <span class="n">use_enum_values</span> <span class="o">=</span> <span class="kc">True</span>
<a id="__codelineno-16-26" name="__codelineno-16-26" href="#__codelineno-16-26"></a>
<a id="__codelineno-16-27" name="__codelineno-16-27" href="#__codelineno-16-27"></a>
<a id="__codelineno-16-28" name="__codelineno-16-28" href="#__codelineno-16-28"></a><span class="c1"># patterns/structural.py</span>
<a id="__codelineno-16-29" name="__codelineno-16-29" href="#__codelineno-16-29"></a><span class="k">class</span><span class="w"> </span><span class="nc">StepConfig</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-16-30" name="__codelineno-16-30" href="#__codelineno-16-30"></a>    <span class="n">step</span><span class="p">:</span> <span class="nb">int</span>
<a id="__codelineno-16-31" name="__codelineno-16-31" href="#__codelineno-16-31"></a>    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-16-32" name="__codelineno-16-32" href="#__codelineno-16-32"></a>    <span class="n">prompt</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-16-33" name="__codelineno-16-33" href="#__codelineno-16-33"></a>    <span class="n">fields</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span>
<a id="__codelineno-16-34" name="__codelineno-16-34" href="#__codelineno-16-34"></a>    <span class="n">help_text</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-16-35" name="__codelineno-16-35" href="#__codelineno-16-35"></a>    <span class="n">is_review_step</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>
<a id="__codelineno-16-36" name="__codelineno-16-36" href="#__codelineno-16-36"></a>
<a id="__codelineno-16-37" name="__codelineno-16-37" href="#__codelineno-16-37"></a><span class="k">class</span><span class="w"> </span><span class="nc">LinearFlowPattern</span><span class="p">(</span><span class="n">BasePattern</span><span class="p">):</span>
<a id="__codelineno-16-38" name="__codelineno-16-38" href="#__codelineno-16-38"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Linear multi-step wizard pattern&quot;&quot;&quot;</span>
<a id="__codelineno-16-39" name="__codelineno-16-39" href="#__codelineno-16-39"></a>
<a id="__codelineno-16-40" name="__codelineno-16-40" href="#__codelineno-16-40"></a>    <span class="n">category</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="n">PatternCategory</span><span class="o">.</span><span class="n">STRUCTURAL</span><span class="p">]</span> <span class="o">=</span> <span class="n">PatternCategory</span><span class="o">.</span><span class="n">STRUCTURAL</span>
<a id="__codelineno-16-41" name="__codelineno-16-41" href="#__codelineno-16-41"></a>    <span class="n">total_steps</span><span class="p">:</span> <span class="nb">int</span>
<a id="__codelineno-16-42" name="__codelineno-16-42" href="#__codelineno-16-42"></a>    <span class="n">steps</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">StepConfig</span><span class="p">]</span>
<a id="__codelineno-16-43" name="__codelineno-16-43" href="#__codelineno-16-43"></a>    <span class="n">requires_approval</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span>
<a id="__codelineno-16-44" name="__codelineno-16-44" href="#__codelineno-16-44"></a>
<a id="__codelineno-16-45" name="__codelineno-16-45" href="#__codelineno-16-45"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">generate_endpoints</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<a id="__codelineno-16-46" name="__codelineno-16-46" href="#__codelineno-16-46"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Generate FastAPI endpoint code&quot;&quot;&quot;</span>
<a id="__codelineno-16-47" name="__codelineno-16-47" href="#__codelineno-16-47"></a>        <span class="k">return</span> <span class="p">[</span>
<a id="__codelineno-16-48" name="__codelineno-16-48" href="#__codelineno-16-48"></a>            <span class="s2">&quot;POST /start&quot;</span><span class="p">,</span>
<a id="__codelineno-16-49" name="__codelineno-16-49" href="#__codelineno-16-49"></a>            <span class="s2">&quot;POST /</span><span class="si">{wizard_id}</span><span class="s2">/step&quot;</span><span class="p">,</span>
<a id="__codelineno-16-50" name="__codelineno-16-50" href="#__codelineno-16-50"></a>            <span class="s2">&quot;POST /</span><span class="si">{wizard_id}</span><span class="s2">/preview&quot;</span><span class="p">,</span>
<a id="__codelineno-16-51" name="__codelineno-16-51" href="#__codelineno-16-51"></a>            <span class="s2">&quot;POST /</span><span class="si">{wizard_id}</span><span class="s2">/save&quot;</span><span class="p">,</span>
<a id="__codelineno-16-52" name="__codelineno-16-52" href="#__codelineno-16-52"></a>            <span class="s2">&quot;GET /</span><span class="si">{wizard_id}</span><span class="s2">/report&quot;</span><span class="p">,</span>
<a id="__codelineno-16-53" name="__codelineno-16-53" href="#__codelineno-16-53"></a>        <span class="p">]</span>
<a id="__codelineno-16-54" name="__codelineno-16-54" href="#__codelineno-16-54"></a>
<a id="__codelineno-16-55" name="__codelineno-16-55" href="#__codelineno-16-55"></a><span class="k">class</span><span class="w"> </span><span class="nc">PhasedProcessingPattern</span><span class="p">(</span><span class="n">BasePattern</span><span class="p">):</span>
<a id="__codelineno-16-56" name="__codelineno-16-56" href="#__codelineno-16-56"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Multi-phase processing pattern&quot;&quot;&quot;</span>
<a id="__codelineno-16-57" name="__codelineno-16-57" href="#__codelineno-16-57"></a>
<a id="__codelineno-16-58" name="__codelineno-16-58" href="#__codelineno-16-58"></a>    <span class="n">category</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="n">PatternCategory</span><span class="o">.</span><span class="n">STRUCTURAL</span><span class="p">]</span> <span class="o">=</span> <span class="n">PatternCategory</span><span class="o">.</span><span class="n">STRUCTURAL</span>
<a id="__codelineno-16-59" name="__codelineno-16-59" href="#__codelineno-16-59"></a>    <span class="n">phases</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span>
<a id="__codelineno-16-60" name="__codelineno-16-60" href="#__codelineno-16-60"></a>    <span class="n">parallel_phases</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">default_factory</span><span class="o">=</span><span class="nb">list</span><span class="p">)</span>
<a id="__codelineno-16-61" name="__codelineno-16-61" href="#__codelineno-16-61"></a>
<a id="__codelineno-16-62" name="__codelineno-16-62" href="#__codelineno-16-62"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">generate_analyze_method</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<a id="__codelineno-16-63" name="__codelineno-16-63" href="#__codelineno-16-63"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Generate analyze() method skeleton&quot;&quot;&quot;</span>
<a id="__codelineno-16-64" name="__codelineno-16-64" href="#__codelineno-16-64"></a>        <span class="n">code_lines</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;async def analyze(self, context: dict) -&gt; dict:&quot;</span><span class="p">]</span>
<a id="__codelineno-16-65" name="__codelineno-16-65" href="#__codelineno-16-65"></a>        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">phase</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">phases</span><span class="p">,</span> <span class="mi">1</span><span class="p">):</span>
<a id="__codelineno-16-66" name="__codelineno-16-66" href="#__codelineno-16-66"></a>            <span class="n">code_lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;    # Phase </span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">phase</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-16-67" name="__codelineno-16-67" href="#__codelineno-16-67"></a>            <span class="n">code_lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;    </span><span class="si">{</span><span class="n">phase</span><span class="si">}</span><span class="s2">_result = await self._</span><span class="si">{</span><span class="n">phase</span><span class="si">}</span><span class="s2">(context)&quot;</span><span class="p">)</span>
<a id="__codelineno-16-68" name="__codelineno-16-68" href="#__codelineno-16-68"></a>        <span class="n">code_lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;    return {...}&quot;</span><span class="p">)</span>
<a id="__codelineno-16-69" name="__codelineno-16-69" href="#__codelineno-16-69"></a>        <span class="k">return</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">code_lines</span><span class="p">)</span>
<a id="__codelineno-16-70" name="__codelineno-16-70" href="#__codelineno-16-70"></a>
<a id="__codelineno-16-71" name="__codelineno-16-71" href="#__codelineno-16-71"></a>
<a id="__codelineno-16-72" name="__codelineno-16-72" href="#__codelineno-16-72"></a><span class="c1"># patterns/input.py</span>
<a id="__codelineno-16-73" name="__codelineno-16-73" href="#__codelineno-16-73"></a><span class="k">class</span><span class="w"> </span><span class="nc">StructuredFieldsPattern</span><span class="p">(</span><span class="n">BasePattern</span><span class="p">):</span>
<a id="__codelineno-16-74" name="__codelineno-16-74" href="#__codelineno-16-74"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Structured field input pattern&quot;&quot;&quot;</span>
<a id="__codelineno-16-75" name="__codelineno-16-75" href="#__codelineno-16-75"></a>
<a id="__codelineno-16-76" name="__codelineno-16-76" href="#__codelineno-16-76"></a>    <span class="n">category</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="n">PatternCategory</span><span class="o">.</span><span class="n">INPUT</span><span class="p">]</span> <span class="o">=</span> <span class="n">PatternCategory</span><span class="o">.</span><span class="n">INPUT</span>
<a id="__codelineno-16-77" name="__codelineno-16-77" href="#__codelineno-16-77"></a>    <span class="n">fields_by_step</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span>
<a id="__codelineno-16-78" name="__codelineno-16-78" href="#__codelineno-16-78"></a>    <span class="n">field_types</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">default_factory</span><span class="o">=</span><span class="nb">dict</span><span class="p">)</span>
<a id="__codelineno-16-79" name="__codelineno-16-79" href="#__codelineno-16-79"></a>
<a id="__codelineno-16-80" name="__codelineno-16-80" href="#__codelineno-16-80"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">generate_request_model</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">step</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<a id="__codelineno-16-81" name="__codelineno-16-81" href="#__codelineno-16-81"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Generate Pydantic request model&quot;&quot;&quot;</span>
<a id="__codelineno-16-82" name="__codelineno-16-82" href="#__codelineno-16-82"></a>        <span class="n">fields</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">fields_by_step</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">step</span><span class="p">,</span> <span class="p">[])</span>
<a id="__codelineno-16-83" name="__codelineno-16-83" href="#__codelineno-16-83"></a>        <span class="n">field_defs</span> <span class="o">=</span> <span class="p">[</span>
<a id="__codelineno-16-84" name="__codelineno-16-84" href="#__codelineno-16-84"></a>            <span class="sa">f</span><span class="s2">&quot;    </span><span class="si">{</span><span class="n">field</span><span class="si">}</span><span class="s2">: str&quot;</span> <span class="k">for</span> <span class="n">field</span> <span class="ow">in</span> <span class="n">fields</span>
<a id="__codelineno-16-85" name="__codelineno-16-85" href="#__codelineno-16-85"></a>        <span class="p">]</span>
<a id="__codelineno-16-86" name="__codelineno-16-86" href="#__codelineno-16-86"></a>        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;class Step</span><span class="si">{</span><span class="n">step</span><span class="si">}</span><span class="s2">Request(BaseModel):</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">+</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">field_defs</span><span class="p">)</span>
<a id="__codelineno-16-87" name="__codelineno-16-87" href="#__codelineno-16-87"></a>
<a id="__codelineno-16-88" name="__codelineno-16-88" href="#__codelineno-16-88"></a>
<a id="__codelineno-16-89" name="__codelineno-16-89" href="#__codelineno-16-89"></a><span class="c1"># patterns/validation.py</span>
<a id="__codelineno-16-90" name="__codelineno-16-90" href="#__codelineno-16-90"></a><span class="k">class</span><span class="w"> </span><span class="nc">ApprovalPattern</span><span class="p">(</span><span class="n">BasePattern</span><span class="p">):</span>
<a id="__codelineno-16-91" name="__codelineno-16-91" href="#__codelineno-16-91"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;User approval before finalization pattern&quot;&quot;&quot;</span>
<a id="__codelineno-16-92" name="__codelineno-16-92" href="#__codelineno-16-92"></a>
<a id="__codelineno-16-93" name="__codelineno-16-93" href="#__codelineno-16-93"></a>    <span class="n">category</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="n">PatternCategory</span><span class="o">.</span><span class="n">VALIDATION</span><span class="p">]</span> <span class="o">=</span> <span class="n">PatternCategory</span><span class="o">.</span><span class="n">VALIDATION</span>
<a id="__codelineno-16-94" name="__codelineno-16-94" href="#__codelineno-16-94"></a>    <span class="n">requires_preview</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span>
<a id="__codelineno-16-95" name="__codelineno-16-95" href="#__codelineno-16-95"></a>    <span class="n">approval_field</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;user_approved&quot;</span>
<a id="__codelineno-16-96" name="__codelineno-16-96" href="#__codelineno-16-96"></a>
<a id="__codelineno-16-97" name="__codelineno-16-97" href="#__codelineno-16-97"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">generate_save_endpoint</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<a id="__codelineno-16-98" name="__codelineno-16-98" href="#__codelineno-16-98"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Generate save endpoint with approval check&quot;&quot;&quot;</span>
<a id="__codelineno-16-99" name="__codelineno-16-99" href="#__codelineno-16-99"></a>        <span class="k">return</span> <span class="s1">&#39;&#39;&#39;</span>
<a id="__codelineno-16-100" name="__codelineno-16-100" href="#__codelineno-16-100"></a><span class="s1">@router.post(&quot;/</span><span class="si">{wizard_id}</span><span class="s1">/save&quot;)</span>
<a id="__codelineno-16-101" name="__codelineno-16-101" href="#__codelineno-16-101"></a><span class="s1">async def save_report(wizard_id: str, approval: dict):</span>
<a id="__codelineno-16-102" name="__codelineno-16-102" href="#__codelineno-16-102"></a><span class="s1">    session = await get_session(wizard_id)</span>
<a id="__codelineno-16-103" name="__codelineno-16-103" href="#__codelineno-16-103"></a>
<a id="__codelineno-16-104" name="__codelineno-16-104" href="#__codelineno-16-104"></a><span class="s1">    if &quot;preview_report&quot; not in session:</span>
<a id="__codelineno-16-105" name="__codelineno-16-105" href="#__codelineno-16-105"></a><span class="s1">        raise HTTPException(400, &quot;Must generate preview first&quot;)</span>
<a id="__codelineno-16-106" name="__codelineno-16-106" href="#__codelineno-16-106"></a>
<a id="__codelineno-16-107" name="__codelineno-16-107" href="#__codelineno-16-107"></a><span class="s1">    if not approval.get(&quot;user_approved&quot;, False):</span>
<a id="__codelineno-16-108" name="__codelineno-16-108" href="#__codelineno-16-108"></a><span class="s1">        raise HTTPException(400, &quot;User approval required&quot;)</span>
<a id="__codelineno-16-109" name="__codelineno-16-109" href="#__codelineno-16-109"></a>
<a id="__codelineno-16-110" name="__codelineno-16-110" href="#__codelineno-16-110"></a><span class="s1">    session[&quot;completed&quot;] = True</span>
<a id="__codelineno-16-111" name="__codelineno-16-111" href="#__codelineno-16-111"></a><span class="s1">    return session[&quot;preview_report&quot;]</span>
<a id="__codelineno-16-112" name="__codelineno-16-112" href="#__codelineno-16-112"></a><span class="s1">&#39;&#39;&#39;</span>
<a id="__codelineno-16-113" name="__codelineno-16-113" href="#__codelineno-16-113"></a>
<a id="__codelineno-16-114" name="__codelineno-16-114" href="#__codelineno-16-114"></a>
<a id="__codelineno-16-115" name="__codelineno-16-115" href="#__codelineno-16-115"></a><span class="c1"># patterns/behavior.py</span>
<a id="__codelineno-16-116" name="__codelineno-16-116" href="#__codelineno-16-116"></a><span class="k">class</span><span class="w"> </span><span class="nc">RiskAssessmentPattern</span><span class="p">(</span><span class="n">BasePattern</span><span class="p">):</span>
<a id="__codelineno-16-117" name="__codelineno-16-117" href="#__codelineno-16-117"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Level 4 Anticipatory risk assessment pattern&quot;&quot;&quot;</span>
<a id="__codelineno-16-118" name="__codelineno-16-118" href="#__codelineno-16-118"></a>
<a id="__codelineno-16-119" name="__codelineno-16-119" href="#__codelineno-16-119"></a>    <span class="n">category</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="n">PatternCategory</span><span class="o">.</span><span class="n">BEHAVIOR</span><span class="p">]</span> <span class="o">=</span> <span class="n">PatternCategory</span><span class="o">.</span><span class="n">BEHAVIOR</span>
<a id="__codelineno-16-120" name="__codelineno-16-120" href="#__codelineno-16-120"></a>    <span class="n">risk_levels</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;critical&quot;</span><span class="p">,</span> <span class="s2">&quot;high&quot;</span><span class="p">,</span> <span class="s2">&quot;medium&quot;</span><span class="p">,</span> <span class="s2">&quot;low&quot;</span><span class="p">]</span>
<a id="__codelineno-16-121" name="__codelineno-16-121" href="#__codelineno-16-121"></a>    <span class="n">alert_thresholds</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">default_factory</span><span class="o">=</span><span class="nb">dict</span><span class="p">)</span>
<a id="__codelineno-16-122" name="__codelineno-16-122" href="#__codelineno-16-122"></a>
<a id="__codelineno-16-123" name="__codelineno-16-123" href="#__codelineno-16-123"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">generate_risk_analyzer</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<a id="__codelineno-16-124" name="__codelineno-16-124" href="#__codelineno-16-124"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Generate risk assessment code&quot;&quot;&quot;</span>
<a id="__codelineno-16-125" name="__codelineno-16-125" href="#__codelineno-16-125"></a>        <span class="k">return</span> <span class="s1">&#39;&#39;&#39;</span>
<a id="__codelineno-16-126" name="__codelineno-16-126" href="#__codelineno-16-126"></a><span class="s1">class RiskAnalyzer:</span>
<a id="__codelineno-16-127" name="__codelineno-16-127" href="#__codelineno-16-127"></a><span class="s1">    def analyze(self, issues: list) -&gt; dict:</span>
<a id="__codelineno-16-128" name="__codelineno-16-128" href="#__codelineno-16-128"></a><span class="s1">        by_level = {level: 0 for level in self.risk_levels}</span>
<a id="__codelineno-16-129" name="__codelineno-16-129" href="#__codelineno-16-129"></a><span class="s1">        for issue in issues:</span>
<a id="__codelineno-16-130" name="__codelineno-16-130" href="#__codelineno-16-130"></a><span class="s1">            by_level[issue.severity] += 1</span>
<a id="__codelineno-16-131" name="__codelineno-16-131" href="#__codelineno-16-131"></a>
<a id="__codelineno-16-132" name="__codelineno-16-132" href="#__codelineno-16-132"></a><span class="s1">        alert_level = self._determine_alert_level(by_level)</span>
<a id="__codelineno-16-133" name="__codelineno-16-133" href="#__codelineno-16-133"></a>
<a id="__codelineno-16-134" name="__codelineno-16-134" href="#__codelineno-16-134"></a><span class="s1">        return {</span>
<a id="__codelineno-16-135" name="__codelineno-16-135" href="#__codelineno-16-135"></a><span class="s1">            &quot;by_risk_level&quot;: by_level,</span>
<a id="__codelineno-16-136" name="__codelineno-16-136" href="#__codelineno-16-136"></a><span class="s1">            &quot;alert_level&quot;: alert_level,</span>
<a id="__codelineno-16-137" name="__codelineno-16-137" href="#__codelineno-16-137"></a><span class="s1">        }</span>
<a id="__codelineno-16-138" name="__codelineno-16-138" href="#__codelineno-16-138"></a><span class="s1">&#39;&#39;&#39;</span>
<a id="__codelineno-16-139" name="__codelineno-16-139" href="#__codelineno-16-139"></a>
<a id="__codelineno-16-140" name="__codelineno-16-140" href="#__codelineno-16-140"></a>
<a id="__codelineno-16-141" name="__codelineno-16-141" href="#__codelineno-16-141"></a><span class="c1"># patterns/empathy.py</span>
<a id="__codelineno-16-142" name="__codelineno-16-142" href="#__codelineno-16-142"></a><span class="k">class</span><span class="w"> </span><span class="nc">EmpathyLevelPattern</span><span class="p">(</span><span class="n">BasePattern</span><span class="p">):</span>
<a id="__codelineno-16-143" name="__codelineno-16-143" href="#__codelineno-16-143"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Empathy level configuration pattern&quot;&quot;&quot;</span>
<a id="__codelineno-16-144" name="__codelineno-16-144" href="#__codelineno-16-144"></a>
<a id="__codelineno-16-145" name="__codelineno-16-145" href="#__codelineno-16-145"></a>    <span class="n">category</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="n">PatternCategory</span><span class="o">.</span><span class="n">EMPATHY</span><span class="p">]</span> <span class="o">=</span> <span class="n">PatternCategory</span><span class="o">.</span><span class="n">EMPATHY</span>
<a id="__codelineno-16-146" name="__codelineno-16-146" href="#__codelineno-16-146"></a>    <span class="n">default_level</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">ge</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">le</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<a id="__codelineno-16-147" name="__codelineno-16-147" href="#__codelineno-16-147"></a>    <span class="n">level_descriptions</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">default_factory</span><span class="o">=</span><span class="nb">dict</span><span class="p">)</span>
<a id="__codelineno-16-148" name="__codelineno-16-148" href="#__codelineno-16-148"></a>
<a id="__codelineno-16-149" name="__codelineno-16-149" href="#__codelineno-16-149"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">generate_config_dataclass</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<a id="__codelineno-16-150" name="__codelineno-16-150" href="#__codelineno-16-150"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Generate WizardConfig with empathy&quot;&quot;&quot;</span>
<a id="__codelineno-16-151" name="__codelineno-16-151" href="#__codelineno-16-151"></a>        <span class="k">return</span> <span class="s1">&#39;&#39;&#39;</span>
<a id="__codelineno-16-152" name="__codelineno-16-152" href="#__codelineno-16-152"></a><span class="s1">@dataclass</span>
<a id="__codelineno-16-153" name="__codelineno-16-153" href="#__codelineno-16-153"></a><span class="s1">class WizardConfig:</span>
<a id="__codelineno-16-154" name="__codelineno-16-154" href="#__codelineno-16-154"></a><span class="s1">    name: str</span>
<a id="__codelineno-16-155" name="__codelineno-16-155" href="#__codelineno-16-155"></a><span class="s1">    description: str</span>
<a id="__codelineno-16-156" name="__codelineno-16-156" href="#__codelineno-16-156"></a><span class="s1">    domain: str</span>
<a id="__codelineno-16-157" name="__codelineno-16-157" href="#__codelineno-16-157"></a><span class="s1">    default_empathy_level: int = 2  # 0-4</span>
<a id="__codelineno-16-158" name="__codelineno-16-158" href="#__codelineno-16-158"></a>
<a id="__codelineno-16-159" name="__codelineno-16-159" href="#__codelineno-16-159"></a><span class="s1">    def _validate_config(self):</span>
<a id="__codelineno-16-160" name="__codelineno-16-160" href="#__codelineno-16-160"></a><span class="s1">        if not 0 &lt;= self.default_empathy_level &lt;= 4:</span>
<a id="__codelineno-16-161" name="__codelineno-16-161" href="#__codelineno-16-161"></a><span class="s1">            raise ValueError(f&quot;Empathy level must be 0-4&quot;)</span>
<a id="__codelineno-16-162" name="__codelineno-16-162" href="#__codelineno-16-162"></a><span class="s1">&#39;&#39;&#39;</span>
</code></pre></div>
<hr />
<h3 id="33-pattern-registry">3.3 Pattern Registry<a class="headerlink" href="#33-pattern-registry" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><a id="__codelineno-17-1" name="__codelineno-17-1" href="#__codelineno-17-1"></a><span class="c1"># patterns/registry.py</span>
<a id="__codelineno-17-2" name="__codelineno-17-2" href="#__codelineno-17-2"></a><span class="kn">from</span><span class="w"> </span><span class="nn">typing</span><span class="w"> </span><span class="kn">import</span> <span class="n">Dict</span><span class="p">,</span> <span class="n">Type</span><span class="p">,</span> <span class="n">List</span>
<a id="__codelineno-17-3" name="__codelineno-17-3" href="#__codelineno-17-3"></a><span class="kn">from</span><span class="w"> </span><span class="nn">.core</span><span class="w"> </span><span class="kn">import</span> <span class="n">BasePattern</span><span class="p">,</span> <span class="n">PatternCategory</span>
<a id="__codelineno-17-4" name="__codelineno-17-4" href="#__codelineno-17-4"></a><span class="kn">from</span><span class="w"> </span><span class="nn">.structural</span><span class="w"> </span><span class="kn">import</span> <span class="n">LinearFlowPattern</span><span class="p">,</span> <span class="n">PhasedProcessingPattern</span>
<a id="__codelineno-17-5" name="__codelineno-17-5" href="#__codelineno-17-5"></a><span class="kn">from</span><span class="w"> </span><span class="nn">.input</span><span class="w"> </span><span class="kn">import</span> <span class="n">StructuredFieldsPattern</span><span class="p">,</span> <span class="n">CodeAnalysisPattern</span><span class="p">,</span> <span class="n">ContextBasedPattern</span>
<a id="__codelineno-17-6" name="__codelineno-17-6" href="#__codelineno-17-6"></a><span class="kn">from</span><span class="w"> </span><span class="nn">.validation</span><span class="w"> </span><span class="kn">import</span> <span class="n">ConfigValidationPattern</span><span class="p">,</span> <span class="n">StepValidationPattern</span><span class="p">,</span> <span class="n">ApprovalPattern</span>
<a id="__codelineno-17-7" name="__codelineno-17-7" href="#__codelineno-17-7"></a><span class="kn">from</span><span class="w"> </span><span class="nn">.behavior</span><span class="w"> </span><span class="kn">import</span> <span class="n">RiskAssessmentPattern</span><span class="p">,</span> <span class="n">AIEnhancementPattern</span><span class="p">,</span> <span class="n">PredictionPattern</span>
<a id="__codelineno-17-8" name="__codelineno-17-8" href="#__codelineno-17-8"></a><span class="kn">from</span><span class="w"> </span><span class="nn">.empathy</span><span class="w"> </span><span class="kn">import</span> <span class="n">EmpathyLevelPattern</span><span class="p">,</span> <span class="n">EducationalBannerPattern</span>
<a id="__codelineno-17-9" name="__codelineno-17-9" href="#__codelineno-17-9"></a>
<a id="__codelineno-17-10" name="__codelineno-17-10" href="#__codelineno-17-10"></a><span class="k">class</span><span class="w"> </span><span class="nc">PatternRegistry</span><span class="p">:</span>
<a id="__codelineno-17-11" name="__codelineno-17-11" href="#__codelineno-17-11"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Central registry for all wizard patterns&quot;&quot;&quot;</span>
<a id="__codelineno-17-12" name="__codelineno-17-12" href="#__codelineno-17-12"></a>
<a id="__codelineno-17-13" name="__codelineno-17-13" href="#__codelineno-17-13"></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<a id="__codelineno-17-14" name="__codelineno-17-14" href="#__codelineno-17-14"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_patterns</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">BasePattern</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
<a id="__codelineno-17-15" name="__codelineno-17-15" href="#__codelineno-17-15"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_by_category</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="n">PatternCategory</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="n">BasePattern</span><span class="p">]]</span> <span class="o">=</span> <span class="p">{</span>
<a id="__codelineno-17-16" name="__codelineno-17-16" href="#__codelineno-17-16"></a>            <span class="n">cat</span><span class="p">:</span> <span class="p">[]</span> <span class="k">for</span> <span class="n">cat</span> <span class="ow">in</span> <span class="n">PatternCategory</span>
<a id="__codelineno-17-17" name="__codelineno-17-17" href="#__codelineno-17-17"></a>        <span class="p">}</span>
<a id="__codelineno-17-18" name="__codelineno-17-18" href="#__codelineno-17-18"></a>
<a id="__codelineno-17-19" name="__codelineno-17-19" href="#__codelineno-17-19"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">register</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pattern</span><span class="p">:</span> <span class="n">BasePattern</span><span class="p">):</span>
<a id="__codelineno-17-20" name="__codelineno-17-20" href="#__codelineno-17-20"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Register a pattern&quot;&quot;&quot;</span>
<a id="__codelineno-17-21" name="__codelineno-17-21" href="#__codelineno-17-21"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_patterns</span><span class="p">[</span><span class="n">pattern</span><span class="o">.</span><span class="n">id</span><span class="p">]</span> <span class="o">=</span> <span class="n">pattern</span>
<a id="__codelineno-17-22" name="__codelineno-17-22" href="#__codelineno-17-22"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_by_category</span><span class="p">[</span><span class="n">pattern</span><span class="o">.</span><span class="n">category</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">pattern</span><span class="p">)</span>
<a id="__codelineno-17-23" name="__codelineno-17-23" href="#__codelineno-17-23"></a>
<a id="__codelineno-17-24" name="__codelineno-17-24" href="#__codelineno-17-24"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pattern_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">BasePattern</span><span class="p">:</span>
<a id="__codelineno-17-25" name="__codelineno-17-25" href="#__codelineno-17-25"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Get pattern by ID&quot;&quot;&quot;</span>
<a id="__codelineno-17-26" name="__codelineno-17-26" href="#__codelineno-17-26"></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_patterns</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">pattern_id</span><span class="p">)</span>
<a id="__codelineno-17-27" name="__codelineno-17-27" href="#__codelineno-17-27"></a>
<a id="__codelineno-17-28" name="__codelineno-17-28" href="#__codelineno-17-28"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">list_by_category</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">category</span><span class="p">:</span> <span class="n">PatternCategory</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">BasePattern</span><span class="p">]:</span>
<a id="__codelineno-17-29" name="__codelineno-17-29" href="#__codelineno-17-29"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;List patterns in a category&quot;&quot;&quot;</span>
<a id="__codelineno-17-30" name="__codelineno-17-30" href="#__codelineno-17-30"></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_by_category</span><span class="p">[</span><span class="n">category</span><span class="p">]</span>
<a id="__codelineno-17-31" name="__codelineno-17-31" href="#__codelineno-17-31"></a>
<a id="__codelineno-17-32" name="__codelineno-17-32" href="#__codelineno-17-32"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">search</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">query</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">BasePattern</span><span class="p">]:</span>
<a id="__codelineno-17-33" name="__codelineno-17-33" href="#__codelineno-17-33"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Search patterns by name/description&quot;&quot;&quot;</span>
<a id="__codelineno-17-34" name="__codelineno-17-34" href="#__codelineno-17-34"></a>        <span class="n">results</span> <span class="o">=</span> <span class="p">[]</span>
<a id="__codelineno-17-35" name="__codelineno-17-35" href="#__codelineno-17-35"></a>        <span class="k">for</span> <span class="n">pattern</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_patterns</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
<a id="__codelineno-17-36" name="__codelineno-17-36" href="#__codelineno-17-36"></a>            <span class="k">if</span> <span class="n">query</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="ow">in</span> <span class="n">pattern</span><span class="o">.</span><span class="n">name</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="ow">or</span> <span class="n">query</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="ow">in</span> <span class="n">pattern</span><span class="o">.</span><span class="n">description</span><span class="o">.</span><span class="n">lower</span><span class="p">():</span>
<a id="__codelineno-17-37" name="__codelineno-17-37" href="#__codelineno-17-37"></a>                <span class="n">results</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">pattern</span><span class="p">)</span>
<a id="__codelineno-17-38" name="__codelineno-17-38" href="#__codelineno-17-38"></a>        <span class="k">return</span> <span class="n">results</span>
<a id="__codelineno-17-39" name="__codelineno-17-39" href="#__codelineno-17-39"></a>
<a id="__codelineno-17-40" name="__codelineno-17-40" href="#__codelineno-17-40"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">recommend_for_wizard</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">wizard_type</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">domain</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">BasePattern</span><span class="p">]:</span>
<a id="__codelineno-17-41" name="__codelineno-17-41" href="#__codelineno-17-41"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Recommend patterns for a new wizard&quot;&quot;&quot;</span>
<a id="__codelineno-17-42" name="__codelineno-17-42" href="#__codelineno-17-42"></a>        <span class="c1"># Simple recommendation based on domain and type</span>
<a id="__codelineno-17-43" name="__codelineno-17-43" href="#__codelineno-17-43"></a>        <span class="n">recommendations</span> <span class="o">=</span> <span class="p">[]</span>
<a id="__codelineno-17-44" name="__codelineno-17-44" href="#__codelineno-17-44"></a>
<a id="__codelineno-17-45" name="__codelineno-17-45" href="#__codelineno-17-45"></a>        <span class="k">if</span> <span class="n">domain</span> <span class="o">==</span> <span class="s2">&quot;healthcare&quot;</span><span class="p">:</span>
<a id="__codelineno-17-46" name="__codelineno-17-46" href="#__codelineno-17-46"></a>            <span class="n">recommendations</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span>
<a id="__codelineno-17-47" name="__codelineno-17-47" href="#__codelineno-17-47"></a>                <span class="bp">self</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;linear_flow&quot;</span><span class="p">),</span>
<a id="__codelineno-17-48" name="__codelineno-17-48" href="#__codelineno-17-48"></a>                <span class="bp">self</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;structured_fields&quot;</span><span class="p">),</span>
<a id="__codelineno-17-49" name="__codelineno-17-49" href="#__codelineno-17-49"></a>                <span class="bp">self</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;approval&quot;</span><span class="p">),</span>
<a id="__codelineno-17-50" name="__codelineno-17-50" href="#__codelineno-17-50"></a>                <span class="bp">self</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;educational_banner&quot;</span><span class="p">),</span>
<a id="__codelineno-17-51" name="__codelineno-17-51" href="#__codelineno-17-51"></a>            <span class="p">])</span>
<a id="__codelineno-17-52" name="__codelineno-17-52" href="#__codelineno-17-52"></a>
<a id="__codelineno-17-53" name="__codelineno-17-53" href="#__codelineno-17-53"></a>        <span class="k">if</span> <span class="n">wizard_type</span> <span class="o">==</span> <span class="s2">&quot;coach&quot;</span><span class="p">:</span>
<a id="__codelineno-17-54" name="__codelineno-17-54" href="#__codelineno-17-54"></a>            <span class="n">recommendations</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span>
<a id="__codelineno-17-55" name="__codelineno-17-55" href="#__codelineno-17-55"></a>                <span class="bp">self</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;code_analysis_input&quot;</span><span class="p">),</span>
<a id="__codelineno-17-56" name="__codelineno-17-56" href="#__codelineno-17-56"></a>                <span class="bp">self</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;risk_assessment&quot;</span><span class="p">),</span>
<a id="__codelineno-17-57" name="__codelineno-17-57" href="#__codelineno-17-57"></a>                <span class="bp">self</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;prediction&quot;</span><span class="p">),</span>
<a id="__codelineno-17-58" name="__codelineno-17-58" href="#__codelineno-17-58"></a>            <span class="p">])</span>
<a id="__codelineno-17-59" name="__codelineno-17-59" href="#__codelineno-17-59"></a>
<a id="__codelineno-17-60" name="__codelineno-17-60" href="#__codelineno-17-60"></a>        <span class="k">if</span> <span class="n">wizard_type</span> <span class="o">==</span> <span class="s2">&quot;ai&quot;</span><span class="p">:</span>
<a id="__codelineno-17-61" name="__codelineno-17-61" href="#__codelineno-17-61"></a>            <span class="n">recommendations</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span>
<a id="__codelineno-17-62" name="__codelineno-17-62" href="#__codelineno-17-62"></a>                <span class="bp">self</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;phased_processing&quot;</span><span class="p">),</span>
<a id="__codelineno-17-63" name="__codelineno-17-63" href="#__codelineno-17-63"></a>                <span class="bp">self</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;context_based_input&quot;</span><span class="p">),</span>
<a id="__codelineno-17-64" name="__codelineno-17-64" href="#__codelineno-17-64"></a>                <span class="bp">self</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;ai_enhancement&quot;</span><span class="p">),</span>
<a id="__codelineno-17-65" name="__codelineno-17-65" href="#__codelineno-17-65"></a>            <span class="p">])</span>
<a id="__codelineno-17-66" name="__codelineno-17-66" href="#__codelineno-17-66"></a>
<a id="__codelineno-17-67" name="__codelineno-17-67" href="#__codelineno-17-67"></a>        <span class="k">return</span> <span class="p">[</span><span class="n">p</span> <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">recommendations</span> <span class="k">if</span> <span class="n">p</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">]</span>
<a id="__codelineno-17-68" name="__codelineno-17-68" href="#__codelineno-17-68"></a>
<a id="__codelineno-17-69" name="__codelineno-17-69" href="#__codelineno-17-69"></a>
<a id="__codelineno-17-70" name="__codelineno-17-70" href="#__codelineno-17-70"></a><span class="c1"># Global registry instance</span>
<a id="__codelineno-17-71" name="__codelineno-17-71" href="#__codelineno-17-71"></a><span class="n">_registry</span> <span class="o">=</span> <span class="n">PatternRegistry</span><span class="p">()</span>
<a id="__codelineno-17-72" name="__codelineno-17-72" href="#__codelineno-17-72"></a>
<a id="__codelineno-17-73" name="__codelineno-17-73" href="#__codelineno-17-73"></a>
<a id="__codelineno-17-74" name="__codelineno-17-74" href="#__codelineno-17-74"></a><span class="k">def</span><span class="w"> </span><span class="nf">get_pattern_registry</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n">PatternRegistry</span><span class="p">:</span>
<a id="__codelineno-17-75" name="__codelineno-17-75" href="#__codelineno-17-75"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Get the global pattern registry&quot;&quot;&quot;</span>
<a id="__codelineno-17-76" name="__codelineno-17-76" href="#__codelineno-17-76"></a>    <span class="k">return</span> <span class="n">_registry</span>
<a id="__codelineno-17-77" name="__codelineno-17-77" href="#__codelineno-17-77"></a>
<a id="__codelineno-17-78" name="__codelineno-17-78" href="#__codelineno-17-78"></a>
<a id="__codelineno-17-79" name="__codelineno-17-79" href="#__codelineno-17-79"></a><span class="c1"># Load extracted patterns from existing wizards</span>
<a id="__codelineno-17-80" name="__codelineno-17-80" href="#__codelineno-17-80"></a><span class="k">def</span><span class="w"> </span><span class="nf">load_patterns</span><span class="p">():</span>
<a id="__codelineno-17-81" name="__codelineno-17-81" href="#__codelineno-17-81"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Load all extracted patterns into registry&quot;&quot;&quot;</span>
<a id="__codelineno-17-82" name="__codelineno-17-82" href="#__codelineno-17-82"></a>
<a id="__codelineno-17-83" name="__codelineno-17-83" href="#__codelineno-17-83"></a>    <span class="c1"># Structural patterns</span>
<a id="__codelineno-17-84" name="__codelineno-17-84" href="#__codelineno-17-84"></a>    <span class="n">_registry</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="n">LinearFlowPattern</span><span class="p">(</span>
<a id="__codelineno-17-85" name="__codelineno-17-85" href="#__codelineno-17-85"></a>        <span class="nb">id</span><span class="o">=</span><span class="s2">&quot;linear_flow&quot;</span><span class="p">,</span>
<a id="__codelineno-17-86" name="__codelineno-17-86" href="#__codelineno-17-86"></a>        <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Linear Flow&quot;</span><span class="p">,</span>
<a id="__codelineno-17-87" name="__codelineno-17-87" href="#__codelineno-17-87"></a>        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Step-by-step wizard with review and approval&quot;</span><span class="p">,</span>
<a id="__codelineno-17-88" name="__codelineno-17-88" href="#__codelineno-17-88"></a>        <span class="n">frequency</span><span class="o">=</span><span class="mi">16</span><span class="p">,</span>
<a id="__codelineno-17-89" name="__codelineno-17-89" href="#__codelineno-17-89"></a>        <span class="n">reusability_score</span><span class="o">=</span><span class="mf">0.9</span><span class="p">,</span>
<a id="__codelineno-17-90" name="__codelineno-17-90" href="#__codelineno-17-90"></a>        <span class="n">examples</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;soap_note&quot;</span><span class="p">,</span> <span class="s2">&quot;sbar&quot;</span><span class="p">,</span> <span class="s2">&quot;shift_handoff&quot;</span><span class="p">,</span> <span class="s2">&quot;care_plan&quot;</span><span class="p">],</span>
<a id="__codelineno-17-91" name="__codelineno-17-91" href="#__codelineno-17-91"></a>        <span class="n">total_steps</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span>
<a id="__codelineno-17-92" name="__codelineno-17-92" href="#__codelineno-17-92"></a>        <span class="n">steps</span><span class="o">=</span><span class="p">{</span>
<a id="__codelineno-17-93" name="__codelineno-17-93" href="#__codelineno-17-93"></a>            <span class="mi">1</span><span class="p">:</span> <span class="n">StepConfig</span><span class="p">(</span><span class="n">step</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Step 1&quot;</span><span class="p">,</span> <span class="n">prompt</span><span class="o">=</span><span class="s2">&quot;...&quot;</span><span class="p">,</span> <span class="n">fields</span><span class="o">=</span><span class="p">[],</span> <span class="n">help_text</span><span class="o">=</span><span class="s2">&quot;...&quot;</span><span class="p">),</span>
<a id="__codelineno-17-94" name="__codelineno-17-94" href="#__codelineno-17-94"></a>            <span class="c1"># ... more steps</span>
<a id="__codelineno-17-95" name="__codelineno-17-95" href="#__codelineno-17-95"></a>        <span class="p">},</span>
<a id="__codelineno-17-96" name="__codelineno-17-96" href="#__codelineno-17-96"></a>    <span class="p">))</span>
<a id="__codelineno-17-97" name="__codelineno-17-97" href="#__codelineno-17-97"></a>
<a id="__codelineno-17-98" name="__codelineno-17-98" href="#__codelineno-17-98"></a>    <span class="n">_registry</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="n">PhasedProcessingPattern</span><span class="p">(</span>
<a id="__codelineno-17-99" name="__codelineno-17-99" href="#__codelineno-17-99"></a>        <span class="nb">id</span><span class="o">=</span><span class="s2">&quot;phased_processing&quot;</span><span class="p">,</span>
<a id="__codelineno-17-100" name="__codelineno-17-100" href="#__codelineno-17-100"></a>        <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Phased Processing&quot;</span><span class="p">,</span>
<a id="__codelineno-17-101" name="__codelineno-17-101" href="#__codelineno-17-101"></a>        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Multi-phase analysis pipeline&quot;</span><span class="p">,</span>
<a id="__codelineno-17-102" name="__codelineno-17-102" href="#__codelineno-17-102"></a>        <span class="n">frequency</span><span class="o">=</span><span class="mi">12</span><span class="p">,</span>
<a id="__codelineno-17-103" name="__codelineno-17-103" href="#__codelineno-17-103"></a>        <span class="n">reusability_score</span><span class="o">=</span><span class="mf">0.85</span><span class="p">,</span>
<a id="__codelineno-17-104" name="__codelineno-17-104" href="#__codelineno-17-104"></a>        <span class="n">examples</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;advanced_debugging&quot;</span><span class="p">,</span> <span class="s2">&quot;security_analysis&quot;</span><span class="p">,</span> <span class="s2">&quot;performance_profiling&quot;</span><span class="p">],</span>
<a id="__codelineno-17-105" name="__codelineno-17-105" href="#__codelineno-17-105"></a>        <span class="n">phases</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;parse&quot;</span><span class="p">,</span> <span class="s2">&quot;load_config&quot;</span><span class="p">,</span> <span class="s2">&quot;analyze&quot;</span><span class="p">,</span> <span class="s2">&quot;fix&quot;</span><span class="p">,</span> <span class="s2">&quot;verify&quot;</span><span class="p">],</span>
<a id="__codelineno-17-106" name="__codelineno-17-106" href="#__codelineno-17-106"></a>    <span class="p">))</span>
<a id="__codelineno-17-107" name="__codelineno-17-107" href="#__codelineno-17-107"></a>
<a id="__codelineno-17-108" name="__codelineno-17-108" href="#__codelineno-17-108"></a>    <span class="c1"># Input patterns</span>
<a id="__codelineno-17-109" name="__codelineno-17-109" href="#__codelineno-17-109"></a>    <span class="n">_registry</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="n">StructuredFieldsPattern</span><span class="p">(</span>
<a id="__codelineno-17-110" name="__codelineno-17-110" href="#__codelineno-17-110"></a>        <span class="nb">id</span><span class="o">=</span><span class="s2">&quot;structured_fields&quot;</span><span class="p">,</span>
<a id="__codelineno-17-111" name="__codelineno-17-111" href="#__codelineno-17-111"></a>        <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Structured Fields&quot;</span><span class="p">,</span>
<a id="__codelineno-17-112" name="__codelineno-17-112" href="#__codelineno-17-112"></a>        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Predefined fields per step with validation&quot;</span><span class="p">,</span>
<a id="__codelineno-17-113" name="__codelineno-17-113" href="#__codelineno-17-113"></a>        <span class="n">frequency</span><span class="o">=</span><span class="mi">16</span><span class="p">,</span>
<a id="__codelineno-17-114" name="__codelineno-17-114" href="#__codelineno-17-114"></a>        <span class="n">reusability_score</span><span class="o">=</span><span class="mf">0.9</span><span class="p">,</span>
<a id="__codelineno-17-115" name="__codelineno-17-115" href="#__codelineno-17-115"></a>        <span class="n">examples</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;soap_note&quot;</span><span class="p">,</span> <span class="s2">&quot;care_plan&quot;</span><span class="p">,</span> <span class="s2">&quot;admission_assessment&quot;</span><span class="p">],</span>
<a id="__codelineno-17-116" name="__codelineno-17-116" href="#__codelineno-17-116"></a>        <span class="n">fields_by_step</span><span class="o">=</span><span class="p">{</span>
<a id="__codelineno-17-117" name="__codelineno-17-117" href="#__codelineno-17-117"></a>            <span class="mi">1</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;chief_complaint&quot;</span><span class="p">,</span> <span class="s2">&quot;history_present_illness&quot;</span><span class="p">],</span>
<a id="__codelineno-17-118" name="__codelineno-17-118" href="#__codelineno-17-118"></a>            <span class="mi">2</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;vital_signs&quot;</span><span class="p">,</span> <span class="s2">&quot;physical_exam_findings&quot;</span><span class="p">],</span>
<a id="__codelineno-17-119" name="__codelineno-17-119" href="#__codelineno-17-119"></a>        <span class="p">},</span>
<a id="__codelineno-17-120" name="__codelineno-17-120" href="#__codelineno-17-120"></a>    <span class="p">))</span>
<a id="__codelineno-17-121" name="__codelineno-17-121" href="#__codelineno-17-121"></a>
<a id="__codelineno-17-122" name="__codelineno-17-122" href="#__codelineno-17-122"></a>    <span class="c1"># Validation patterns</span>
<a id="__codelineno-17-123" name="__codelineno-17-123" href="#__codelineno-17-123"></a>    <span class="n">_registry</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="n">ApprovalPattern</span><span class="p">(</span>
<a id="__codelineno-17-124" name="__codelineno-17-124" href="#__codelineno-17-124"></a>        <span class="nb">id</span><span class="o">=</span><span class="s2">&quot;approval&quot;</span><span class="p">,</span>
<a id="__codelineno-17-125" name="__codelineno-17-125" href="#__codelineno-17-125"></a>        <span class="n">name</span><span class="o">=</span><span class="s2">&quot;User Approval&quot;</span><span class="p">,</span>
<a id="__codelineno-17-126" name="__codelineno-17-126" href="#__codelineno-17-126"></a>        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Preview  Explicit Approval  Finalize&quot;</span><span class="p">,</span>
<a id="__codelineno-17-127" name="__codelineno-17-127" href="#__codelineno-17-127"></a>        <span class="n">frequency</span><span class="o">=</span><span class="mi">16</span><span class="p">,</span>
<a id="__codelineno-17-128" name="__codelineno-17-128" href="#__codelineno-17-128"></a>        <span class="n">reusability_score</span><span class="o">=</span><span class="mf">0.95</span><span class="p">,</span>
<a id="__codelineno-17-129" name="__codelineno-17-129" href="#__codelineno-17-129"></a>        <span class="n">examples</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;soap_note&quot;</span><span class="p">,</span> <span class="s2">&quot;sbar&quot;</span><span class="p">,</span> <span class="s2">&quot;discharge_summary&quot;</span><span class="p">],</span>
<a id="__codelineno-17-130" name="__codelineno-17-130" href="#__codelineno-17-130"></a>        <span class="n">requires_preview</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
<a id="__codelineno-17-131" name="__codelineno-17-131" href="#__codelineno-17-131"></a>    <span class="p">))</span>
<a id="__codelineno-17-132" name="__codelineno-17-132" href="#__codelineno-17-132"></a>
<a id="__codelineno-17-133" name="__codelineno-17-133" href="#__codelineno-17-133"></a>    <span class="c1"># Behavior patterns</span>
<a id="__codelineno-17-134" name="__codelineno-17-134" href="#__codelineno-17-134"></a>    <span class="n">_registry</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="n">RiskAssessmentPattern</span><span class="p">(</span>
<a id="__codelineno-17-135" name="__codelineno-17-135" href="#__codelineno-17-135"></a>        <span class="nb">id</span><span class="o">=</span><span class="s2">&quot;risk_assessment&quot;</span><span class="p">,</span>
<a id="__codelineno-17-136" name="__codelineno-17-136" href="#__codelineno-17-136"></a>        <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Risk Assessment&quot;</span><span class="p">,</span>
<a id="__codelineno-17-137" name="__codelineno-17-137" href="#__codelineno-17-137"></a>        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Level 4 Anticipatory risk analysis&quot;</span><span class="p">,</span>
<a id="__codelineno-17-138" name="__codelineno-17-138" href="#__codelineno-17-138"></a>        <span class="n">frequency</span><span class="o">=</span><span class="mi">16</span><span class="p">,</span>
<a id="__codelineno-17-139" name="__codelineno-17-139" href="#__codelineno-17-139"></a>        <span class="n">reusability_score</span><span class="o">=</span><span class="mf">0.8</span><span class="p">,</span>
<a id="__codelineno-17-140" name="__codelineno-17-140" href="#__codelineno-17-140"></a>        <span class="n">examples</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;debugging&quot;</span><span class="p">,</span> <span class="s2">&quot;security&quot;</span><span class="p">,</span> <span class="s2">&quot;testing&quot;</span><span class="p">],</span>
<a id="__codelineno-17-141" name="__codelineno-17-141" href="#__codelineno-17-141"></a>        <span class="n">risk_levels</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;critical&quot;</span><span class="p">,</span> <span class="s2">&quot;high&quot;</span><span class="p">,</span> <span class="s2">&quot;medium&quot;</span><span class="p">,</span> <span class="s2">&quot;low&quot;</span><span class="p">],</span>
<a id="__codelineno-17-142" name="__codelineno-17-142" href="#__codelineno-17-142"></a>    <span class="p">))</span>
<a id="__codelineno-17-143" name="__codelineno-17-143" href="#__codelineno-17-143"></a>
<a id="__codelineno-17-144" name="__codelineno-17-144" href="#__codelineno-17-144"></a>    <span class="c1"># Empathy patterns</span>
<a id="__codelineno-17-145" name="__codelineno-17-145" href="#__codelineno-17-145"></a>    <span class="n">_registry</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="n">EmpathyLevelPattern</span><span class="p">(</span>
<a id="__codelineno-17-146" name="__codelineno-17-146" href="#__codelineno-17-146"></a>        <span class="nb">id</span><span class="o">=</span><span class="s2">&quot;empathy_level&quot;</span><span class="p">,</span>
<a id="__codelineno-17-147" name="__codelineno-17-147" href="#__codelineno-17-147"></a>        <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Empathy Level&quot;</span><span class="p">,</span>
<a id="__codelineno-17-148" name="__codelineno-17-148" href="#__codelineno-17-148"></a>        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;0-4 empathy level configuration&quot;</span><span class="p">,</span>
<a id="__codelineno-17-149" name="__codelineno-17-149" href="#__codelineno-17-149"></a>        <span class="n">frequency</span><span class="o">=</span><span class="mi">16</span><span class="p">,</span>
<a id="__codelineno-17-150" name="__codelineno-17-150" href="#__codelineno-17-150"></a>        <span class="n">reusability_score</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span>
<a id="__codelineno-17-151" name="__codelineno-17-151" href="#__codelineno-17-151"></a>        <span class="n">examples</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;healthcare&quot;</span><span class="p">,</span> <span class="s2">&quot;finance&quot;</span><span class="p">,</span> <span class="s2">&quot;legal&quot;</span><span class="p">],</span>
<a id="__codelineno-17-152" name="__codelineno-17-152" href="#__codelineno-17-152"></a>        <span class="n">default_level</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
<a id="__codelineno-17-153" name="__codelineno-17-153" href="#__codelineno-17-153"></a>    <span class="p">))</span>
</code></pre></div>
<hr />
<h2 id="4-phased-implementation-plan">4. Phased Implementation Plan<a class="headerlink" href="#4-phased-implementation-plan" title="Permanent link">&para;</a></h2>
<h3 id="phase-1-pattern-library-2-weeks">Phase 1: Pattern Library (2 weeks)<a class="headerlink" href="#phase-1-pattern-library-2-weeks" title="Permanent link">&para;</a></h3>
<p><strong>Goal:</strong> Create Pydantic-based pattern library with extracted patterns</p>
<p><strong>Deliverables:</strong>
1. Core pattern models (<code>patterns/core.py</code>)
2. Pattern implementations for all 5 categories
3. Pattern registry with search and recommendation
4. Documentation with examples
5. Unit tests for pattern validation</p>
<p><strong>Files to Create:</strong>
- <code>patterns/__init__.py</code>
- <code>patterns/core.py</code> - BasePattern, PatternCategory
- <code>patterns/structural.py</code> - LinearFlowPattern, PhasedProcessingPattern
- <code>patterns/input.py</code> - StructuredFieldsPattern, CodeAnalysisPattern, ContextBasedPattern
- <code>patterns/validation.py</code> - ConfigValidationPattern, StepValidationPattern, ApprovalPattern
- <code>patterns/behavior.py</code> - RiskAssessmentPattern, AIEnhancementPattern, PredictionPattern
- <code>patterns/empathy.py</code> - EmpathyLevelPattern, EducationalBannerPattern
- <code>patterns/registry.py</code> - PatternRegistry, load_patterns()
- <code>tests/unit/patterns/</code> - Comprehensive tests</p>
<p><strong>Success Criteria:</strong>
- [ ] All 15 patterns implemented with Pydantic
- [ ] Registry supports search and recommendation
- [ ] Code generation methods work for top 3 patterns
- [ ] 90%+ test coverage
- [ ] Documentation with real-world examples</p>
<hr />
<h3 id="phase-2-hot-reload-infrastructure-1-week">Phase 2: Hot-Reload Infrastructure (1 week)<a class="headerlink" href="#phase-2-hot-reload-infrastructure-1-week" title="Permanent link">&para;</a></h3>
<p><strong>Goal:</strong> Enable hot-reload for wizard development without server restarts</p>
<p><strong>Deliverables:</strong>
1. File watcher using <code>watchdog</code> library
2. Dynamic wizard reloading in <code>wizard_api.py</code>
3. WebSocket notifications for frontend
4. Error handling for reload failures
5. Development mode toggle</p>
<p><strong>Files to Create:</strong>
- <code>hot_reload/__init__.py</code>
- <code>hot_reload/watcher.py</code> - FileSystemWatcher
- <code>hot_reload/reloader.py</code> - WizardReloader
- <code>hot_reload/websocket.py</code> - WebSocket notification system
- <code>backend/api/wizard_api.py</code> - Add hot-reload support
- <code>tests/integration/test_hot_reload.py</code></p>
<p><strong>Implementation:</strong>
<div class="highlight"><pre><span></span><code><a id="__codelineno-18-1" name="__codelineno-18-1" href="#__codelineno-18-1"></a><span class="c1"># hot_reload/watcher.py</span>
<a id="__codelineno-18-2" name="__codelineno-18-2" href="#__codelineno-18-2"></a><span class="kn">from</span><span class="w"> </span><span class="nn">watchdog.observers</span><span class="w"> </span><span class="kn">import</span> <span class="n">Observer</span>
<a id="__codelineno-18-3" name="__codelineno-18-3" href="#__codelineno-18-3"></a><span class="kn">from</span><span class="w"> </span><span class="nn">watchdog.events</span><span class="w"> </span><span class="kn">import</span> <span class="n">FileSystemEventHandler</span>
<a id="__codelineno-18-4" name="__codelineno-18-4" href="#__codelineno-18-4"></a><span class="kn">from</span><span class="w"> </span><span class="nn">pathlib</span><span class="w"> </span><span class="kn">import</span> <span class="n">Path</span>
<a id="__codelineno-18-5" name="__codelineno-18-5" href="#__codelineno-18-5"></a>
<a id="__codelineno-18-6" name="__codelineno-18-6" href="#__codelineno-18-6"></a><span class="k">class</span><span class="w"> </span><span class="nc">WizardFileHandler</span><span class="p">(</span><span class="n">FileSystemEventHandler</span><span class="p">):</span>
<a id="__codelineno-18-7" name="__codelineno-18-7" href="#__codelineno-18-7"></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">reload_callback</span><span class="p">):</span>
<a id="__codelineno-18-8" name="__codelineno-18-8" href="#__codelineno-18-8"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">reload_callback</span> <span class="o">=</span> <span class="n">reload_callback</span>
<a id="__codelineno-18-9" name="__codelineno-18-9" href="#__codelineno-18-9"></a>
<a id="__codelineno-18-10" name="__codelineno-18-10" href="#__codelineno-18-10"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">on_modified</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
<a id="__codelineno-18-11" name="__codelineno-18-11" href="#__codelineno-18-11"></a>        <span class="k">if</span> <span class="n">event</span><span class="o">.</span><span class="n">src_path</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s1">&#39;.py&#39;</span><span class="p">):</span>
<a id="__codelineno-18-12" name="__codelineno-18-12" href="#__codelineno-18-12"></a>            <span class="n">wizard_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_extract_wizard_id</span><span class="p">(</span><span class="n">event</span><span class="o">.</span><span class="n">src_path</span><span class="p">)</span>
<a id="__codelineno-18-13" name="__codelineno-18-13" href="#__codelineno-18-13"></a>            <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Detected change in </span><span class="si">{</span><span class="n">wizard_id</span><span class="si">}</span><span class="s2">, reloading...&quot;</span><span class="p">)</span>
<a id="__codelineno-18-14" name="__codelineno-18-14" href="#__codelineno-18-14"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">reload_callback</span><span class="p">(</span><span class="n">wizard_id</span><span class="p">)</span>
<a id="__codelineno-18-15" name="__codelineno-18-15" href="#__codelineno-18-15"></a>
<a id="__codelineno-18-16" name="__codelineno-18-16" href="#__codelineno-18-16"></a><span class="k">class</span><span class="w"> </span><span class="nc">WizardHotReloader</span><span class="p">:</span>
<a id="__codelineno-18-17" name="__codelineno-18-17" href="#__codelineno-18-17"></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">wizard_dirs</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">Path</span><span class="p">]):</span>
<a id="__codelineno-18-18" name="__codelineno-18-18" href="#__codelineno-18-18"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">wizard_dirs</span> <span class="o">=</span> <span class="n">wizard_dirs</span>
<a id="__codelineno-18-19" name="__codelineno-18-19" href="#__codelineno-18-19"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">observer</span> <span class="o">=</span> <span class="n">Observer</span><span class="p">()</span>
<a id="__codelineno-18-20" name="__codelineno-18-20" href="#__codelineno-18-20"></a>
<a id="__codelineno-18-21" name="__codelineno-18-21" href="#__codelineno-18-21"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">start</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<a id="__codelineno-18-22" name="__codelineno-18-22" href="#__codelineno-18-22"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Start watching wizard directories&quot;&quot;&quot;</span>
<a id="__codelineno-18-23" name="__codelineno-18-23" href="#__codelineno-18-23"></a>        <span class="k">for</span> <span class="n">directory</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">wizard_dirs</span><span class="p">:</span>
<a id="__codelineno-18-24" name="__codelineno-18-24" href="#__codelineno-18-24"></a>            <span class="n">event_handler</span> <span class="o">=</span> <span class="n">WizardFileHandler</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_reload_wizard</span><span class="p">)</span>
<a id="__codelineno-18-25" name="__codelineno-18-25" href="#__codelineno-18-25"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">observer</span><span class="o">.</span><span class="n">schedule</span><span class="p">(</span><span class="n">event_handler</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">directory</span><span class="p">),</span> <span class="n">recursive</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<a id="__codelineno-18-26" name="__codelineno-18-26" href="#__codelineno-18-26"></a>
<a id="__codelineno-18-27" name="__codelineno-18-27" href="#__codelineno-18-27"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">observer</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
<a id="__codelineno-18-28" name="__codelineno-18-28" href="#__codelineno-18-28"></a>        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Hot-reload enabled for </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">wizard_dirs</span><span class="p">)</span><span class="si">}</span><span class="s2"> directories&quot;</span><span class="p">)</span>
<a id="__codelineno-18-29" name="__codelineno-18-29" href="#__codelineno-18-29"></a>
<a id="__codelineno-18-30" name="__codelineno-18-30" href="#__codelineno-18-30"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_reload_wizard</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">wizard_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
<a id="__codelineno-18-31" name="__codelineno-18-31" href="#__codelineno-18-31"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Reload a specific wizard&quot;&quot;&quot;</span>
<a id="__codelineno-18-32" name="__codelineno-18-32" href="#__codelineno-18-32"></a>        <span class="k">try</span><span class="p">:</span>
<a id="__codelineno-18-33" name="__codelineno-18-33" href="#__codelineno-18-33"></a>            <span class="c1"># Unload old module</span>
<a id="__codelineno-18-34" name="__codelineno-18-34" href="#__codelineno-18-34"></a>            <span class="k">if</span> <span class="n">wizard_id</span> <span class="ow">in</span> <span class="n">sys</span><span class="o">.</span><span class="n">modules</span><span class="p">:</span>
<a id="__codelineno-18-35" name="__codelineno-18-35" href="#__codelineno-18-35"></a>                <span class="n">importlib</span><span class="o">.</span><span class="n">reload</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">modules</span><span class="p">[</span><span class="n">wizard_id</span><span class="p">])</span>
<a id="__codelineno-18-36" name="__codelineno-18-36" href="#__codelineno-18-36"></a>
<a id="__codelineno-18-37" name="__codelineno-18-37" href="#__codelineno-18-37"></a>            <span class="c1"># Re-register wizard</span>
<a id="__codelineno-18-38" name="__codelineno-18-38" href="#__codelineno-18-38"></a>            <span class="kn">from</span><span class="w"> </span><span class="nn">backend.api.wizard_api</span><span class="w"> </span><span class="kn">import</span> <span class="n">register_wizard</span><span class="p">,</span> <span class="n">WIZARDS</span>
<a id="__codelineno-18-39" name="__codelineno-18-39" href="#__codelineno-18-39"></a>            <span class="c1"># ... reload logic</span>
<a id="__codelineno-18-40" name="__codelineno-18-40" href="#__codelineno-18-40"></a>
<a id="__codelineno-18-41" name="__codelineno-18-41" href="#__codelineno-18-41"></a>            <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot; Reloaded </span><span class="si">{</span><span class="n">wizard_id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-18-42" name="__codelineno-18-42" href="#__codelineno-18-42"></a>
<a id="__codelineno-18-43" name="__codelineno-18-43" href="#__codelineno-18-43"></a>            <span class="c1"># Notify via WebSocket</span>
<a id="__codelineno-18-44" name="__codelineno-18-44" href="#__codelineno-18-44"></a>            <span class="k">await</span> <span class="n">notify_clients</span><span class="p">({</span><span class="s2">&quot;event&quot;</span><span class="p">:</span> <span class="s2">&quot;wizard_reloaded&quot;</span><span class="p">,</span> <span class="s2">&quot;wizard_id&quot;</span><span class="p">:</span> <span class="n">wizard_id</span><span class="p">})</span>
<a id="__codelineno-18-45" name="__codelineno-18-45" href="#__codelineno-18-45"></a>
<a id="__codelineno-18-46" name="__codelineno-18-46" href="#__codelineno-18-46"></a>        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
<a id="__codelineno-18-47" name="__codelineno-18-47" href="#__codelineno-18-47"></a>            <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Failed to reload </span><span class="si">{</span><span class="n">wizard_id</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-18-48" name="__codelineno-18-48" href="#__codelineno-18-48"></a>            <span class="k">await</span> <span class="n">notify_clients</span><span class="p">({</span><span class="s2">&quot;event&quot;</span><span class="p">:</span> <span class="s2">&quot;wizard_reload_failed&quot;</span><span class="p">,</span> <span class="s2">&quot;wizard_id&quot;</span><span class="p">:</span> <span class="n">wizard_id</span><span class="p">,</span> <span class="s2">&quot;error&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)})</span>
</code></pre></div></p>
<p><strong>Success Criteria:</strong>
- [ ] Wizards reload without server restart
- [ ] File changes detected within 1 second
- [ ] Reload failures don't crash server
- [ ] WebSocket notifications work
- [ ] Development mode can be toggled via env var</p>
<hr />
<h3 id="phase-3-risk-driven-test-generator-2-weeks">Phase 3: Risk-Driven Test Generator (2 weeks)<a class="headerlink" href="#phase-3-risk-driven-test-generator-2-weeks" title="Permanent link">&para;</a></h3>
<p><strong>Goal:</strong> Generate comprehensive tests for new wizards based on risk analysis</p>
<p><strong>Deliverables:</strong>
1. Test generator using Jinja2 templates
2. Risk-driven test coverage (prioritize high-risk paths)
3. Templates for unit, integration, and E2E tests
4. Fixture generation for common wizard patterns
5. CLI command: <code>empathy wizard generate-tests &lt;wizard_id&gt;</code></p>
<p><strong>Files to Create:</strong>
- <code>test_generator/__init__.py</code>
- <code>test_generator/generator.py</code> - TestGenerator class
- <code>test_generator/risk_analyzer.py</code> - Analyze wizard for high-risk paths
- <code>test_generator/templates/</code> - Jinja2 test templates
  - <code>unit_test.py.jinja2</code>
  - <code>integration_test.py.jinja2</code>
  - <code>e2e_test.py.jinja2</code>
- <code>test_generator/fixtures.py</code> - Common test fixtures
- <code>tests/integration/test_generator/</code></p>
<p><strong>Implementation:</strong>
<div class="highlight"><pre><span></span><code><a id="__codelineno-19-1" name="__codelineno-19-1" href="#__codelineno-19-1"></a><span class="c1"># test_generator/generator.py</span>
<a id="__codelineno-19-2" name="__codelineno-19-2" href="#__codelineno-19-2"></a><span class="kn">from</span><span class="w"> </span><span class="nn">jinja2</span><span class="w"> </span><span class="kn">import</span> <span class="n">Environment</span><span class="p">,</span> <span class="n">FileSystemLoader</span>
<a id="__codelineno-19-3" name="__codelineno-19-3" href="#__codelineno-19-3"></a><span class="kn">from</span><span class="w"> </span><span class="nn">pathlib</span><span class="w"> </span><span class="kn">import</span> <span class="n">Path</span>
<a id="__codelineno-19-4" name="__codelineno-19-4" href="#__codelineno-19-4"></a>
<a id="__codelineno-19-5" name="__codelineno-19-5" href="#__codelineno-19-5"></a><span class="k">class</span><span class="w"> </span><span class="nc">TestGenerator</span><span class="p">:</span>
<a id="__codelineno-19-6" name="__codelineno-19-6" href="#__codelineno-19-6"></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<a id="__codelineno-19-7" name="__codelineno-19-7" href="#__codelineno-19-7"></a>        <span class="n">template_dir</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="vm">__file__</span><span class="p">)</span><span class="o">.</span><span class="n">parent</span> <span class="o">/</span> <span class="s2">&quot;templates&quot;</span>
<a id="__codelineno-19-8" name="__codelineno-19-8" href="#__codelineno-19-8"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">env</span> <span class="o">=</span> <span class="n">Environment</span><span class="p">(</span><span class="n">loader</span><span class="o">=</span><span class="n">FileSystemLoader</span><span class="p">(</span><span class="n">template_dir</span><span class="p">))</span>
<a id="__codelineno-19-9" name="__codelineno-19-9" href="#__codelineno-19-9"></a>
<a id="__codelineno-19-10" name="__codelineno-19-10" href="#__codelineno-19-10"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">generate_tests</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">wizard_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">pattern_ids</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]:</span>
<a id="__codelineno-19-11" name="__codelineno-19-11" href="#__codelineno-19-11"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Generate tests for a wizard based on its patterns&quot;&quot;&quot;</span>
<a id="__codelineno-19-12" name="__codelineno-19-12" href="#__codelineno-19-12"></a>
<a id="__codelineno-19-13" name="__codelineno-19-13" href="#__codelineno-19-13"></a>        <span class="c1"># Analyze patterns for risk</span>
<a id="__codelineno-19-14" name="__codelineno-19-14" href="#__codelineno-19-14"></a>        <span class="n">risk_analysis</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_analyze_risks</span><span class="p">(</span><span class="n">pattern_ids</span><span class="p">)</span>
<a id="__codelineno-19-15" name="__codelineno-19-15" href="#__codelineno-19-15"></a>
<a id="__codelineno-19-16" name="__codelineno-19-16" href="#__codelineno-19-16"></a>        <span class="c1"># Generate unit tests (always)</span>
<a id="__codelineno-19-17" name="__codelineno-19-17" href="#__codelineno-19-17"></a>        <span class="n">unit_tests</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_generate_unit_tests</span><span class="p">(</span><span class="n">wizard_id</span><span class="p">,</span> <span class="n">pattern_ids</span><span class="p">,</span> <span class="n">risk_analysis</span><span class="p">)</span>
<a id="__codelineno-19-18" name="__codelineno-19-18" href="#__codelineno-19-18"></a>
<a id="__codelineno-19-19" name="__codelineno-19-19" href="#__codelineno-19-19"></a>        <span class="c1"># Generate integration tests (for multi-step wizards)</span>
<a id="__codelineno-19-20" name="__codelineno-19-20" href="#__codelineno-19-20"></a>        <span class="n">integration_tests</span> <span class="o">=</span> <span class="kc">None</span>
<a id="__codelineno-19-21" name="__codelineno-19-21" href="#__codelineno-19-21"></a>        <span class="k">if</span> <span class="s2">&quot;linear_flow&quot;</span> <span class="ow">in</span> <span class="n">pattern_ids</span> <span class="ow">or</span> <span class="s2">&quot;phased_processing&quot;</span> <span class="ow">in</span> <span class="n">pattern_ids</span><span class="p">:</span>
<a id="__codelineno-19-22" name="__codelineno-19-22" href="#__codelineno-19-22"></a>            <span class="n">integration_tests</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_generate_integration_tests</span><span class="p">(</span><span class="n">wizard_id</span><span class="p">,</span> <span class="n">pattern_ids</span><span class="p">)</span>
<a id="__codelineno-19-23" name="__codelineno-19-23" href="#__codelineno-19-23"></a>
<a id="__codelineno-19-24" name="__codelineno-19-24" href="#__codelineno-19-24"></a>        <span class="c1"># Generate E2E tests (for critical wizards)</span>
<a id="__codelineno-19-25" name="__codelineno-19-25" href="#__codelineno-19-25"></a>        <span class="n">e2e_tests</span> <span class="o">=</span> <span class="kc">None</span>
<a id="__codelineno-19-26" name="__codelineno-19-26" href="#__codelineno-19-26"></a>        <span class="k">if</span> <span class="n">risk_analysis</span><span class="p">[</span><span class="s2">&quot;critical_paths&quot;</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
<a id="__codelineno-19-27" name="__codelineno-19-27" href="#__codelineno-19-27"></a>            <span class="n">e2e_tests</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_generate_e2e_tests</span><span class="p">(</span><span class="n">wizard_id</span><span class="p">,</span> <span class="n">pattern_ids</span><span class="p">)</span>
<a id="__codelineno-19-28" name="__codelineno-19-28" href="#__codelineno-19-28"></a>
<a id="__codelineno-19-29" name="__codelineno-19-29" href="#__codelineno-19-29"></a>        <span class="k">return</span> <span class="p">{</span>
<a id="__codelineno-19-30" name="__codelineno-19-30" href="#__codelineno-19-30"></a>            <span class="s2">&quot;unit&quot;</span><span class="p">:</span> <span class="n">unit_tests</span><span class="p">,</span>
<a id="__codelineno-19-31" name="__codelineno-19-31" href="#__codelineno-19-31"></a>            <span class="s2">&quot;integration&quot;</span><span class="p">:</span> <span class="n">integration_tests</span><span class="p">,</span>
<a id="__codelineno-19-32" name="__codelineno-19-32" href="#__codelineno-19-32"></a>            <span class="s2">&quot;e2e&quot;</span><span class="p">:</span> <span class="n">e2e_tests</span><span class="p">,</span>
<a id="__codelineno-19-33" name="__codelineno-19-33" href="#__codelineno-19-33"></a>        <span class="p">}</span>
<a id="__codelineno-19-34" name="__codelineno-19-34" href="#__codelineno-19-34"></a>
<a id="__codelineno-19-35" name="__codelineno-19-35" href="#__codelineno-19-35"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_analyze_risks</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pattern_ids</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<a id="__codelineno-19-36" name="__codelineno-19-36" href="#__codelineno-19-36"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Analyze wizard patterns for risk&quot;&quot;&quot;</span>
<a id="__codelineno-19-37" name="__codelineno-19-37" href="#__codelineno-19-37"></a>        <span class="n">critical_paths</span> <span class="o">=</span> <span class="mi">0</span>
<a id="__codelineno-19-38" name="__codelineno-19-38" href="#__codelineno-19-38"></a>        <span class="n">high_risk_inputs</span> <span class="o">=</span> <span class="p">[]</span>
<a id="__codelineno-19-39" name="__codelineno-19-39" href="#__codelineno-19-39"></a>
<a id="__codelineno-19-40" name="__codelineno-19-40" href="#__codelineno-19-40"></a>        <span class="k">for</span> <span class="n">pattern_id</span> <span class="ow">in</span> <span class="n">pattern_ids</span><span class="p">:</span>
<a id="__codelineno-19-41" name="__codelineno-19-41" href="#__codelineno-19-41"></a>            <span class="n">pattern</span> <span class="o">=</span> <span class="n">get_pattern_registry</span><span class="p">()</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">pattern_id</span><span class="p">)</span>
<a id="__codelineno-19-42" name="__codelineno-19-42" href="#__codelineno-19-42"></a>
<a id="__codelineno-19-43" name="__codelineno-19-43" href="#__codelineno-19-43"></a>            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">pattern</span><span class="p">,</span> <span class="n">ApprovalPattern</span><span class="p">):</span>
<a id="__codelineno-19-44" name="__codelineno-19-44" href="#__codelineno-19-44"></a>                <span class="n">critical_paths</span> <span class="o">+=</span> <span class="mi">1</span>  <span class="c1"># Approval logic is critical</span>
<a id="__codelineno-19-45" name="__codelineno-19-45" href="#__codelineno-19-45"></a>                <span class="n">high_risk_inputs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;approval without preview&quot;</span><span class="p">)</span>
<a id="__codelineno-19-46" name="__codelineno-19-46" href="#__codelineno-19-46"></a>
<a id="__codelineno-19-47" name="__codelineno-19-47" href="#__codelineno-19-47"></a>            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">pattern</span><span class="p">,</span> <span class="n">RiskAssessmentPattern</span><span class="p">):</span>
<a id="__codelineno-19-48" name="__codelineno-19-48" href="#__codelineno-19-48"></a>                <span class="n">critical_paths</span> <span class="o">+=</span> <span class="mi">1</span>  <span class="c1"># Risk assessment logic is critical</span>
<a id="__codelineno-19-49" name="__codelineno-19-49" href="#__codelineno-19-49"></a>
<a id="__codelineno-19-50" name="__codelineno-19-50" href="#__codelineno-19-50"></a>            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">pattern</span><span class="p">,</span> <span class="n">PhasedProcessingPattern</span><span class="p">):</span>
<a id="__codelineno-19-51" name="__codelineno-19-51" href="#__codelineno-19-51"></a>                <span class="n">critical_paths</span> <span class="o">+=</span> <span class="nb">len</span><span class="p">(</span><span class="n">pattern</span><span class="o">.</span><span class="n">phases</span><span class="p">)</span>  <span class="c1"># Each phase is a critical path</span>
<a id="__codelineno-19-52" name="__codelineno-19-52" href="#__codelineno-19-52"></a>
<a id="__codelineno-19-53" name="__codelineno-19-53" href="#__codelineno-19-53"></a>        <span class="k">return</span> <span class="p">{</span>
<a id="__codelineno-19-54" name="__codelineno-19-54" href="#__codelineno-19-54"></a>            <span class="s2">&quot;critical_paths&quot;</span><span class="p">:</span> <span class="n">critical_paths</span><span class="p">,</span>
<a id="__codelineno-19-55" name="__codelineno-19-55" href="#__codelineno-19-55"></a>            <span class="s2">&quot;high_risk_inputs&quot;</span><span class="p">:</span> <span class="n">high_risk_inputs</span><span class="p">,</span>
<a id="__codelineno-19-56" name="__codelineno-19-56" href="#__codelineno-19-56"></a>            <span class="s2">&quot;recommended_coverage&quot;</span><span class="p">:</span> <span class="nb">min</span><span class="p">(</span><span class="mi">95</span><span class="p">,</span> <span class="mi">70</span> <span class="o">+</span> <span class="n">critical_paths</span> <span class="o">*</span> <span class="mi">5</span><span class="p">),</span>  <span class="c1"># 70% base + 5% per critical path</span>
<a id="__codelineno-19-57" name="__codelineno-19-57" href="#__codelineno-19-57"></a>        <span class="p">}</span>
<a id="__codelineno-19-58" name="__codelineno-19-58" href="#__codelineno-19-58"></a>
<a id="__codelineno-19-59" name="__codelineno-19-59" href="#__codelineno-19-59"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_generate_unit_tests</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">wizard_id</span><span class="p">,</span> <span class="n">pattern_ids</span><span class="p">,</span> <span class="n">risk_analysis</span><span class="p">):</span>
<a id="__codelineno-19-60" name="__codelineno-19-60" href="#__codelineno-19-60"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Generate unit tests from template&quot;&quot;&quot;</span>
<a id="__codelineno-19-61" name="__codelineno-19-61" href="#__codelineno-19-61"></a>        <span class="n">template</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">env</span><span class="o">.</span><span class="n">get_template</span><span class="p">(</span><span class="s2">&quot;unit_test.py.jinja2&quot;</span><span class="p">)</span>
<a id="__codelineno-19-62" name="__codelineno-19-62" href="#__codelineno-19-62"></a>
<a id="__codelineno-19-63" name="__codelineno-19-63" href="#__codelineno-19-63"></a>        <span class="k">return</span> <span class="n">template</span><span class="o">.</span><span class="n">render</span><span class="p">(</span>
<a id="__codelineno-19-64" name="__codelineno-19-64" href="#__codelineno-19-64"></a>            <span class="n">wizard_id</span><span class="o">=</span><span class="n">wizard_id</span><span class="p">,</span>
<a id="__codelineno-19-65" name="__codelineno-19-65" href="#__codelineno-19-65"></a>            <span class="n">patterns</span><span class="o">=</span><span class="n">pattern_ids</span><span class="p">,</span>
<a id="__codelineno-19-66" name="__codelineno-19-66" href="#__codelineno-19-66"></a>            <span class="n">risk_analysis</span><span class="o">=</span><span class="n">risk_analysis</span><span class="p">,</span>
<a id="__codelineno-19-67" name="__codelineno-19-67" href="#__codelineno-19-67"></a>            <span class="n">critical_paths</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_get_critical_test_cases</span><span class="p">(</span><span class="n">pattern_ids</span><span class="p">),</span>
<a id="__codelineno-19-68" name="__codelineno-19-68" href="#__codelineno-19-68"></a>        <span class="p">)</span>
</code></pre></div></p>
<p><strong>Test Template Example:</strong>
<div class="highlight"><pre><span></span><code><a id="__codelineno-20-1" name="__codelineno-20-1" href="#__codelineno-20-1"></a>{# test_generator/templates/unit_test.py.jinja2 #}
<a id="__codelineno-20-2" name="__codelineno-20-2" href="#__codelineno-20-2"></a>&quot;&quot;&quot;Unit tests for {{ wizard_id }} wizard
<a id="__codelineno-20-3" name="__codelineno-20-3" href="#__codelineno-20-3"></a>
<a id="__codelineno-20-4" name="__codelineno-20-4" href="#__codelineno-20-4"></a>Auto-generated by Attune AI Test Generator
<a id="__codelineno-20-5" name="__codelineno-20-5" href="#__codelineno-20-5"></a>Risk Analysis: {{ risk_analysis.critical_paths }} critical paths identified
<a id="__codelineno-20-6" name="__codelineno-20-6" href="#__codelineno-20-6"></a>Target Coverage: {{ risk_analysis.recommended_coverage }}%
<a id="__codelineno-20-7" name="__codelineno-20-7" href="#__codelineno-20-7"></a>&quot;&quot;&quot;
<a id="__codelineno-20-8" name="__codelineno-20-8" href="#__codelineno-20-8"></a>
<a id="__codelineno-20-9" name="__codelineno-20-9" href="#__codelineno-20-9"></a>import pytest
<a id="__codelineno-20-10" name="__codelineno-20-10" href="#__codelineno-20-10"></a>from {{ wizard_module }} import {{ wizard_class }}
<a id="__codelineno-20-11" name="__codelineno-20-11" href="#__codelineno-20-11"></a>
<a id="__codelineno-20-12" name="__codelineno-20-12" href="#__codelineno-20-12"></a>class Test{{ wizard_class }}:
<a id="__codelineno-20-13" name="__codelineno-20-13" href="#__codelineno-20-13"></a>    &quot;&quot;&quot;Test {{ wizard_id }} wizard&quot;&quot;&quot;
<a id="__codelineno-20-14" name="__codelineno-20-14" href="#__codelineno-20-14"></a>
<a id="__codelineno-20-15" name="__codelineno-20-15" href="#__codelineno-20-15"></a>    @pytest.fixture
<a id="__codelineno-20-16" name="__codelineno-20-16" href="#__codelineno-20-16"></a>    def wizard(self):
<a id="__codelineno-20-17" name="__codelineno-20-17" href="#__codelineno-20-17"></a>        &quot;&quot;&quot;Create wizard instance&quot;&quot;&quot;
<a id="__codelineno-20-18" name="__codelineno-20-18" href="#__codelineno-20-18"></a>        return {{ wizard_class }}()
<a id="__codelineno-20-19" name="__codelineno-20-19" href="#__codelineno-20-19"></a>
<a id="__codelineno-20-20" name="__codelineno-20-20" href="#__codelineno-20-20"></a>    {% for pattern_id in patterns %}
<a id="__codelineno-20-21" name="__codelineno-20-21" href="#__codelineno-20-21"></a>    {% if pattern_id == &quot;approval&quot; %}
<a id="__codelineno-20-22" name="__codelineno-20-22" href="#__codelineno-20-22"></a>    def test_cannot_save_without_preview(self, wizard):
<a id="__codelineno-20-23" name="__codelineno-20-23" href="#__codelineno-20-23"></a>        &quot;&quot;&quot;CRITICAL: Saving without preview should fail&quot;&quot;&quot;
<a id="__codelineno-20-24" name="__codelineno-20-24" href="#__codelineno-20-24"></a>        with pytest.raises(HTTPException) as exc:
<a id="__codelineno-20-25" name="__codelineno-20-25" href="#__codelineno-20-25"></a>            await wizard.save(wizard_id=&quot;test&quot;, approval={&quot;user_approved&quot;: True})
<a id="__codelineno-20-26" name="__codelineno-20-26" href="#__codelineno-20-26"></a>
<a id="__codelineno-20-27" name="__codelineno-20-27" href="#__codelineno-20-27"></a>        assert exc.value.status_code == 400
<a id="__codelineno-20-28" name="__codelineno-20-28" href="#__codelineno-20-28"></a>        assert &quot;preview&quot; in exc.value.detail.lower()
<a id="__codelineno-20-29" name="__codelineno-20-29" href="#__codelineno-20-29"></a>
<a id="__codelineno-20-30" name="__codelineno-20-30" href="#__codelineno-20-30"></a>    def test_cannot_save_without_approval(self, wizard):
<a id="__codelineno-20-31" name="__codelineno-20-31" href="#__codelineno-20-31"></a>        &quot;&quot;&quot;CRITICAL: Saving without user approval should fail&quot;&quot;&quot;
<a id="__codelineno-20-32" name="__codelineno-20-32" href="#__codelineno-20-32"></a>        # Generate preview first
<a id="__codelineno-20-33" name="__codelineno-20-33" href="#__codelineno-20-33"></a>        await wizard.preview(wizard_id=&quot;test&quot;)
<a id="__codelineno-20-34" name="__codelineno-20-34" href="#__codelineno-20-34"></a>
<a id="__codelineno-20-35" name="__codelineno-20-35" href="#__codelineno-20-35"></a>        # Try to save without approval
<a id="__codelineno-20-36" name="__codelineno-20-36" href="#__codelineno-20-36"></a>        with pytest.raises(HTTPException) as exc:
<a id="__codelineno-20-37" name="__codelineno-20-37" href="#__codelineno-20-37"></a>            await wizard.save(wizard_id=&quot;test&quot;, approval={&quot;user_approved&quot;: False})
<a id="__codelineno-20-38" name="__codelineno-20-38" href="#__codelineno-20-38"></a>
<a id="__codelineno-20-39" name="__codelineno-20-39" href="#__codelineno-20-39"></a>        assert exc.value.status_code == 400
<a id="__codelineno-20-40" name="__codelineno-20-40" href="#__codelineno-20-40"></a>        assert &quot;approval&quot; in exc.value.detail.lower()
<a id="__codelineno-20-41" name="__codelineno-20-41" href="#__codelineno-20-41"></a>    {% endif %}
<a id="__codelineno-20-42" name="__codelineno-20-42" href="#__codelineno-20-42"></a>
<a id="__codelineno-20-43" name="__codelineno-20-43" href="#__codelineno-20-43"></a>    {% if pattern_id == &quot;linear_flow&quot; %}
<a id="__codelineno-20-44" name="__codelineno-20-44" href="#__codelineno-20-44"></a>    def test_cannot_skip_steps(self, wizard):
<a id="__codelineno-20-45" name="__codelineno-20-45" href="#__codelineno-20-45"></a>        &quot;&quot;&quot;CRITICAL: Steps must be completed in order&quot;&quot;&quot;
<a id="__codelineno-20-46" name="__codelineno-20-46" href="#__codelineno-20-46"></a>        session = await wizard.start()
<a id="__codelineno-20-47" name="__codelineno-20-47" href="#__codelineno-20-47"></a>        wizard_id = session[&quot;wizard_id&quot;]
<a id="__codelineno-20-48" name="__codelineno-20-48" href="#__codelineno-20-48"></a>
<a id="__codelineno-20-49" name="__codelineno-20-49" href="#__codelineno-20-49"></a>        # Try to skip to step 3
<a id="__codelineno-20-50" name="__codelineno-20-50" href="#__codelineno-20-50"></a>        with pytest.raises(HTTPException) as exc:
<a id="__codelineno-20-51" name="__codelineno-20-51" href="#__codelineno-20-51"></a>            await wizard.submit_step(wizard_id, {&quot;step&quot;: 3, &quot;data&quot;: {}})
<a id="__codelineno-20-52" name="__codelineno-20-52" href="#__codelineno-20-52"></a>
<a id="__codelineno-20-53" name="__codelineno-20-53" href="#__codelineno-20-53"></a>        assert exc.value.status_code == 422
<a id="__codelineno-20-54" name="__codelineno-20-54" href="#__codelineno-20-54"></a>        assert &quot;expected step 1&quot; in exc.value.detail.lower()
<a id="__codelineno-20-55" name="__codelineno-20-55" href="#__codelineno-20-55"></a>    {% endif %}
<a id="__codelineno-20-56" name="__codelineno-20-56" href="#__codelineno-20-56"></a>    {% endfor %}
</code></pre></div></p>
<p><strong>Success Criteria:</strong>
- [ ] Generates unit tests for all pattern types
- [ ] Risk analysis identifies critical paths
- [ ] Generated tests achieve 80%+ coverage
- [ ] Templates support customization
- [ ] CLI command works: <code>empathy wizard generate-tests &lt;wizard_id&gt;</code></p>
<hr />
<h3 id="phase-4-methodology-scaffolding-1-week">Phase 4: Methodology Scaffolding (1 week)<a class="headerlink" href="#phase-4-methodology-scaffolding-1-week" title="Permanent link">&para;</a></h3>
<p><strong>Goal:</strong> CLI tool to scaffold new wizards using proven methodologies</p>
<p><strong>Deliverables:</strong>
1. CLI command: <code>empathy wizard create &lt;name&gt; --methodology &lt;method&gt;</code>
2. 5 methodology templates (TDD-First, Pattern-Compose, Prototype-Refine, Risk-Driven, Empathy-Centered)
3. Interactive wizard creation flow
4. File generation for wizard, tests, docs
5. Automatic pattern recommendation</p>
<p><strong>Files to Create:</strong>
- <code>scaffolding/__init__.py</code>
- <code>scaffolding/cli.py</code> - Click-based CLI
- <code>scaffolding/methodologies/</code> - Methodology templates
  - <code>tdd_first.py</code>
  - <code>pattern_compose.py</code>
  - <code>prototype_refine.py</code>
  - <code>risk_driven.py</code>
  - <code>empathy_centered.py</code>
- <code>scaffolding/templates/</code> - File templates
  - <code>wizard.py.jinja2</code>
  - <code>test_wizard.py.jinja2</code>
  - <code>README.md.jinja2</code>
- <code>tests/integration/test_scaffolding.py</code></p>
<p><strong>Implementation:</strong>
<div class="highlight"><pre><span></span><code><a id="__codelineno-21-1" name="__codelineno-21-1" href="#__codelineno-21-1"></a><span class="c1"># scaffolding/cli.py</span>
<a id="__codelineno-21-2" name="__codelineno-21-2" href="#__codelineno-21-2"></a><span class="kn">import</span><span class="w"> </span><span class="nn">click</span>
<a id="__codelineno-21-3" name="__codelineno-21-3" href="#__codelineno-21-3"></a><span class="kn">from</span><span class="w"> </span><span class="nn">.methodologies</span><span class="w"> </span><span class="kn">import</span> <span class="n">TDDFirst</span><span class="p">,</span> <span class="n">PatternCompose</span><span class="p">,</span> <span class="n">PrototypeRefine</span><span class="p">,</span> <span class="n">RiskDriven</span><span class="p">,</span> <span class="n">EmpathyCentered</span>
<a id="__codelineno-21-4" name="__codelineno-21-4" href="#__codelineno-21-4"></a>
<a id="__codelineno-21-5" name="__codelineno-21-5" href="#__codelineno-21-5"></a><span class="nd">@click</span><span class="o">.</span><span class="n">group</span><span class="p">()</span>
<a id="__codelineno-21-6" name="__codelineno-21-6" href="#__codelineno-21-6"></a><span class="k">def</span><span class="w"> </span><span class="nf">wizard</span><span class="p">():</span>
<a id="__codelineno-21-7" name="__codelineno-21-7" href="#__codelineno-21-7"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Wizard creation and management&quot;&quot;&quot;</span>
<a id="__codelineno-21-8" name="__codelineno-21-8" href="#__codelineno-21-8"></a>    <span class="k">pass</span>
<a id="__codelineno-21-9" name="__codelineno-21-9" href="#__codelineno-21-9"></a>
<a id="__codelineno-21-10" name="__codelineno-21-10" href="#__codelineno-21-10"></a><span class="nd">@wizard</span><span class="o">.</span><span class="n">command</span><span class="p">()</span>
<a id="__codelineno-21-11" name="__codelineno-21-11" href="#__codelineno-21-11"></a><span class="nd">@click</span><span class="o">.</span><span class="n">argument</span><span class="p">(</span><span class="s1">&#39;name&#39;</span><span class="p">)</span>
<a id="__codelineno-21-12" name="__codelineno-21-12" href="#__codelineno-21-12"></a><span class="nd">@click</span><span class="o">.</span><span class="n">option</span><span class="p">(</span><span class="s1">&#39;--methodology&#39;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="n">click</span><span class="o">.</span><span class="n">Choice</span><span class="p">([</span><span class="s1">&#39;tdd&#39;</span><span class="p">,</span> <span class="s1">&#39;pattern&#39;</span><span class="p">,</span> <span class="s1">&#39;prototype&#39;</span><span class="p">,</span> <span class="s1">&#39;risk&#39;</span><span class="p">,</span> <span class="s1">&#39;empathy&#39;</span><span class="p">]),</span> <span class="n">default</span><span class="o">=</span><span class="s1">&#39;pattern&#39;</span><span class="p">)</span>
<a id="__codelineno-21-13" name="__codelineno-21-13" href="#__codelineno-21-13"></a><span class="nd">@click</span><span class="o">.</span><span class="n">option</span><span class="p">(</span><span class="s1">&#39;--domain&#39;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">str</span><span class="p">,</span> <span class="n">prompt</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<a id="__codelineno-21-14" name="__codelineno-21-14" href="#__codelineno-21-14"></a><span class="nd">@click</span><span class="o">.</span><span class="n">option</span><span class="p">(</span><span class="s1">&#39;--type&#39;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="n">click</span><span class="o">.</span><span class="n">Choice</span><span class="p">([</span><span class="s1">&#39;domain&#39;</span><span class="p">,</span> <span class="s1">&#39;coach&#39;</span><span class="p">,</span> <span class="s1">&#39;ai&#39;</span><span class="p">]),</span> <span class="n">prompt</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<a id="__codelineno-21-15" name="__codelineno-21-15" href="#__codelineno-21-15"></a><span class="k">def</span><span class="w"> </span><span class="nf">create</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">methodology</span><span class="p">,</span> <span class="n">domain</span><span class="p">,</span> <span class="nb">type</span><span class="p">):</span>
<a id="__codelineno-21-16" name="__codelineno-21-16" href="#__codelineno-21-16"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Create a new wizard using a methodology</span>
<a id="__codelineno-21-17" name="__codelineno-21-17" href="#__codelineno-21-17"></a>
<a id="__codelineno-21-18" name="__codelineno-21-18" href="#__codelineno-21-18"></a><span class="sd">    Methodologies:</span>
<a id="__codelineno-21-19" name="__codelineno-21-19" href="#__codelineno-21-19"></a><span class="sd">    - tdd: Test-Driven Development (write tests first)</span>
<a id="__codelineno-21-20" name="__codelineno-21-20" href="#__codelineno-21-20"></a><span class="sd">    - pattern: Pattern-Compose (select patterns, compose wizard)</span>
<a id="__codelineno-21-21" name="__codelineno-21-21" href="#__codelineno-21-21"></a><span class="sd">    - prototype: Prototype-Refine (quick prototype, then refactor)</span>
<a id="__codelineno-21-22" name="__codelineno-21-22" href="#__codelineno-21-22"></a><span class="sd">    - risk: Risk-Driven (focus on high-risk paths first)</span>
<a id="__codelineno-21-23" name="__codelineno-21-23" href="#__codelineno-21-23"></a><span class="sd">    - empathy: Empathy-Centered (design for user experience)</span>
<a id="__codelineno-21-24" name="__codelineno-21-24" href="#__codelineno-21-24"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-21-25" name="__codelineno-21-25" href="#__codelineno-21-25"></a>
<a id="__codelineno-21-26" name="__codelineno-21-26" href="#__codelineno-21-26"></a>    <span class="n">click</span><span class="o">.</span><span class="n">echo</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Creating wizard &#39;</span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">&#39; using </span><span class="si">{</span><span class="n">methodology</span><span class="si">}</span><span class="s2"> methodology...&quot;</span><span class="p">)</span>
<a id="__codelineno-21-27" name="__codelineno-21-27" href="#__codelineno-21-27"></a>
<a id="__codelineno-21-28" name="__codelineno-21-28" href="#__codelineno-21-28"></a>    <span class="n">methodology_map</span> <span class="o">=</span> <span class="p">{</span>
<a id="__codelineno-21-29" name="__codelineno-21-29" href="#__codelineno-21-29"></a>        <span class="s1">&#39;tdd&#39;</span><span class="p">:</span> <span class="n">TDDFirst</span><span class="p">(),</span>
<a id="__codelineno-21-30" name="__codelineno-21-30" href="#__codelineno-21-30"></a>        <span class="s1">&#39;pattern&#39;</span><span class="p">:</span> <span class="n">PatternCompose</span><span class="p">(),</span>
<a id="__codelineno-21-31" name="__codelineno-21-31" href="#__codelineno-21-31"></a>        <span class="s1">&#39;prototype&#39;</span><span class="p">:</span> <span class="n">PrototypeRefine</span><span class="p">(),</span>
<a id="__codelineno-21-32" name="__codelineno-21-32" href="#__codelineno-21-32"></a>        <span class="s1">&#39;risk&#39;</span><span class="p">:</span> <span class="n">RiskDriven</span><span class="p">(),</span>
<a id="__codelineno-21-33" name="__codelineno-21-33" href="#__codelineno-21-33"></a>        <span class="s1">&#39;empathy&#39;</span><span class="p">:</span> <span class="n">EmpathyCentered</span><span class="p">(),</span>
<a id="__codelineno-21-34" name="__codelineno-21-34" href="#__codelineno-21-34"></a>    <span class="p">}</span>
<a id="__codelineno-21-35" name="__codelineno-21-35" href="#__codelineno-21-35"></a>
<a id="__codelineno-21-36" name="__codelineno-21-36" href="#__codelineno-21-36"></a>    <span class="n">method</span> <span class="o">=</span> <span class="n">methodology_map</span><span class="p">[</span><span class="n">methodology</span><span class="p">]</span>
<a id="__codelineno-21-37" name="__codelineno-21-37" href="#__codelineno-21-37"></a>
<a id="__codelineno-21-38" name="__codelineno-21-38" href="#__codelineno-21-38"></a>    <span class="c1"># Run methodology-specific creation flow</span>
<a id="__codelineno-21-39" name="__codelineno-21-39" href="#__codelineno-21-39"></a>    <span class="n">wizard_config</span> <span class="o">=</span> <span class="n">method</span><span class="o">.</span><span class="n">create_wizard</span><span class="p">(</span>
<a id="__codelineno-21-40" name="__codelineno-21-40" href="#__codelineno-21-40"></a>        <span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span>
<a id="__codelineno-21-41" name="__codelineno-21-41" href="#__codelineno-21-41"></a>        <span class="n">domain</span><span class="o">=</span><span class="n">domain</span><span class="p">,</span>
<a id="__codelineno-21-42" name="__codelineno-21-42" href="#__codelineno-21-42"></a>        <span class="n">wizard_type</span><span class="o">=</span><span class="nb">type</span><span class="p">,</span>
<a id="__codelineno-21-43" name="__codelineno-21-43" href="#__codelineno-21-43"></a>    <span class="p">)</span>
<a id="__codelineno-21-44" name="__codelineno-21-44" href="#__codelineno-21-44"></a>
<a id="__codelineno-21-45" name="__codelineno-21-45" href="#__codelineno-21-45"></a>    <span class="n">click</span><span class="o">.</span><span class="n">echo</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2"> Wizard &#39;</span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">&#39; created successfully!&quot;</span><span class="p">)</span>
<a id="__codelineno-21-46" name="__codelineno-21-46" href="#__codelineno-21-46"></a>    <span class="n">click</span><span class="o">.</span><span class="n">echo</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Generated files:&quot;</span><span class="p">)</span>
<a id="__codelineno-21-47" name="__codelineno-21-47" href="#__codelineno-21-47"></a>    <span class="k">for</span> <span class="n">file_path</span> <span class="ow">in</span> <span class="n">wizard_config</span><span class="p">[</span><span class="s1">&#39;files&#39;</span><span class="p">]:</span>
<a id="__codelineno-21-48" name="__codelineno-21-48" href="#__codelineno-21-48"></a>        <span class="n">click</span><span class="o">.</span><span class="n">echo</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;  - </span><span class="si">{</span><span class="n">file_path</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-21-49" name="__codelineno-21-49" href="#__codelineno-21-49"></a>
<a id="__codelineno-21-50" name="__codelineno-21-50" href="#__codelineno-21-50"></a>    <span class="n">click</span><span class="o">.</span><span class="n">echo</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Next steps:&quot;</span><span class="p">)</span>
<a id="__codelineno-21-51" name="__codelineno-21-51" href="#__codelineno-21-51"></a>    <span class="k">for</span> <span class="n">step</span> <span class="ow">in</span> <span class="n">wizard_config</span><span class="p">[</span><span class="s1">&#39;next_steps&#39;</span><span class="p">]:</span>
<a id="__codelineno-21-52" name="__codelineno-21-52" href="#__codelineno-21-52"></a>        <span class="n">click</span><span class="o">.</span><span class="n">echo</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;  </span><span class="si">{</span><span class="n">step</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-21-53" name="__codelineno-21-53" href="#__codelineno-21-53"></a>
<a id="__codelineno-21-54" name="__codelineno-21-54" href="#__codelineno-21-54"></a>
<a id="__codelineno-21-55" name="__codelineno-21-55" href="#__codelineno-21-55"></a><span class="c1"># scaffolding/methodologies/pattern_compose.py</span>
<a id="__codelineno-21-56" name="__codelineno-21-56" href="#__codelineno-21-56"></a><span class="k">class</span><span class="w"> </span><span class="nc">PatternCompose</span><span class="p">:</span>
<a id="__codelineno-21-57" name="__codelineno-21-57" href="#__codelineno-21-57"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Pattern-Compose methodology: Select patterns, compose wizard&quot;&quot;&quot;</span>
<a id="__codelineno-21-58" name="__codelineno-21-58" href="#__codelineno-21-58"></a>
<a id="__codelineno-21-59" name="__codelineno-21-59" href="#__codelineno-21-59"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">create_wizard</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">domain</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">wizard_type</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<a id="__codelineno-21-60" name="__codelineno-21-60" href="#__codelineno-21-60"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Create wizard by composing patterns&quot;&quot;&quot;</span>
<a id="__codelineno-21-61" name="__codelineno-21-61" href="#__codelineno-21-61"></a>
<a id="__codelineno-21-62" name="__codelineno-21-62" href="#__codelineno-21-62"></a>        <span class="c1"># Get pattern recommendations</span>
<a id="__codelineno-21-63" name="__codelineno-21-63" href="#__codelineno-21-63"></a>        <span class="n">registry</span> <span class="o">=</span> <span class="n">get_pattern_registry</span><span class="p">()</span>
<a id="__codelineno-21-64" name="__codelineno-21-64" href="#__codelineno-21-64"></a>        <span class="n">recommended_patterns</span> <span class="o">=</span> <span class="n">registry</span><span class="o">.</span><span class="n">recommend_for_wizard</span><span class="p">(</span><span class="n">wizard_type</span><span class="p">,</span> <span class="n">domain</span><span class="p">)</span>
<a id="__codelineno-21-65" name="__codelineno-21-65" href="#__codelineno-21-65"></a>
<a id="__codelineno-21-66" name="__codelineno-21-66" href="#__codelineno-21-66"></a>        <span class="n">click</span><span class="o">.</span><span class="n">echo</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Recommended patterns:&quot;</span><span class="p">)</span>
<a id="__codelineno-21-67" name="__codelineno-21-67" href="#__codelineno-21-67"></a>        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">pattern</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">recommended_patterns</span><span class="p">,</span> <span class="mi">1</span><span class="p">):</span>
<a id="__codelineno-21-68" name="__codelineno-21-68" href="#__codelineno-21-68"></a>            <span class="n">click</span><span class="o">.</span><span class="n">echo</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">. </span><span class="si">{</span><span class="n">pattern</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2"> - </span><span class="si">{</span><span class="n">pattern</span><span class="o">.</span><span class="n">description</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-21-69" name="__codelineno-21-69" href="#__codelineno-21-69"></a>
<a id="__codelineno-21-70" name="__codelineno-21-70" href="#__codelineno-21-70"></a>        <span class="c1"># Let user select patterns</span>
<a id="__codelineno-21-71" name="__codelineno-21-71" href="#__codelineno-21-71"></a>        <span class="n">selected</span> <span class="o">=</span> <span class="n">click</span><span class="o">.</span><span class="n">prompt</span><span class="p">(</span>
<a id="__codelineno-21-72" name="__codelineno-21-72" href="#__codelineno-21-72"></a>            <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Select patterns (comma-separated numbers, or &#39;all&#39;)&quot;</span><span class="p">,</span>
<a id="__codelineno-21-73" name="__codelineno-21-73" href="#__codelineno-21-73"></a>            <span class="n">default</span><span class="o">=</span><span class="s2">&quot;all&quot;</span>
<a id="__codelineno-21-74" name="__codelineno-21-74" href="#__codelineno-21-74"></a>        <span class="p">)</span>
<a id="__codelineno-21-75" name="__codelineno-21-75" href="#__codelineno-21-75"></a>
<a id="__codelineno-21-76" name="__codelineno-21-76" href="#__codelineno-21-76"></a>        <span class="k">if</span> <span class="n">selected</span> <span class="o">==</span> <span class="s2">&quot;all&quot;</span><span class="p">:</span>
<a id="__codelineno-21-77" name="__codelineno-21-77" href="#__codelineno-21-77"></a>            <span class="n">patterns</span> <span class="o">=</span> <span class="n">recommended_patterns</span>
<a id="__codelineno-21-78" name="__codelineno-21-78" href="#__codelineno-21-78"></a>        <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-21-79" name="__codelineno-21-79" href="#__codelineno-21-79"></a>            <span class="n">indices</span> <span class="o">=</span> <span class="p">[</span><span class="nb">int</span><span class="p">(</span><span class="n">i</span><span class="o">.</span><span class="n">strip</span><span class="p">())</span> <span class="o">-</span> <span class="mi">1</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">selected</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="p">)]</span>
<a id="__codelineno-21-80" name="__codelineno-21-80" href="#__codelineno-21-80"></a>            <span class="n">patterns</span> <span class="o">=</span> <span class="p">[</span><span class="n">recommended_patterns</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">indices</span><span class="p">]</span>
<a id="__codelineno-21-81" name="__codelineno-21-81" href="#__codelineno-21-81"></a>
<a id="__codelineno-21-82" name="__codelineno-21-82" href="#__codelineno-21-82"></a>        <span class="n">click</span><span class="o">.</span><span class="n">echo</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Selected </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">patterns</span><span class="p">)</span><span class="si">}</span><span class="s2"> patterns:&quot;</span><span class="p">)</span>
<a id="__codelineno-21-83" name="__codelineno-21-83" href="#__codelineno-21-83"></a>        <span class="k">for</span> <span class="n">pattern</span> <span class="ow">in</span> <span class="n">patterns</span><span class="p">:</span>
<a id="__codelineno-21-84" name="__codelineno-21-84" href="#__codelineno-21-84"></a>            <span class="n">click</span><span class="o">.</span><span class="n">echo</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;   </span><span class="si">{</span><span class="n">pattern</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-21-85" name="__codelineno-21-85" href="#__codelineno-21-85"></a>
<a id="__codelineno-21-86" name="__codelineno-21-86" href="#__codelineno-21-86"></a>        <span class="c1"># Generate wizard code</span>
<a id="__codelineno-21-87" name="__codelineno-21-87" href="#__codelineno-21-87"></a>        <span class="n">wizard_code</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_compose_wizard</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">domain</span><span class="p">,</span> <span class="n">wizard_type</span><span class="p">,</span> <span class="n">patterns</span><span class="p">)</span>
<a id="__codelineno-21-88" name="__codelineno-21-88" href="#__codelineno-21-88"></a>
<a id="__codelineno-21-89" name="__codelineno-21-89" href="#__codelineno-21-89"></a>        <span class="c1"># Generate tests</span>
<a id="__codelineno-21-90" name="__codelineno-21-90" href="#__codelineno-21-90"></a>        <span class="kn">from</span><span class="w"> </span><span class="nn">test_generator</span><span class="w"> </span><span class="kn">import</span> <span class="n">TestGenerator</span>
<a id="__codelineno-21-91" name="__codelineno-21-91" href="#__codelineno-21-91"></a>        <span class="n">test_generator</span> <span class="o">=</span> <span class="n">TestGenerator</span><span class="p">()</span>
<a id="__codelineno-21-92" name="__codelineno-21-92" href="#__codelineno-21-92"></a>        <span class="n">tests</span> <span class="o">=</span> <span class="n">test_generator</span><span class="o">.</span><span class="n">generate_tests</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="p">[</span><span class="n">p</span><span class="o">.</span><span class="n">id</span> <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">patterns</span><span class="p">])</span>
<a id="__codelineno-21-93" name="__codelineno-21-93" href="#__codelineno-21-93"></a>
<a id="__codelineno-21-94" name="__codelineno-21-94" href="#__codelineno-21-94"></a>        <span class="c1"># Write files</span>
<a id="__codelineno-21-95" name="__codelineno-21-95" href="#__codelineno-21-95"></a>        <span class="n">wizard_file</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;wizards/</span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">_wizard.py&quot;</span>
<a id="__codelineno-21-96" name="__codelineno-21-96" href="#__codelineno-21-96"></a>        <span class="n">test_file</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;tests/unit/wizards/test_</span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">_wizard.py&quot;</span>
<a id="__codelineno-21-97" name="__codelineno-21-97" href="#__codelineno-21-97"></a>
<a id="__codelineno-21-98" name="__codelineno-21-98" href="#__codelineno-21-98"></a>        <span class="n">Path</span><span class="p">(</span><span class="n">wizard_file</span><span class="p">)</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">mkdir</span><span class="p">(</span><span class="n">parents</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">exist_ok</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<a id="__codelineno-21-99" name="__codelineno-21-99" href="#__codelineno-21-99"></a>        <span class="n">Path</span><span class="p">(</span><span class="n">wizard_file</span><span class="p">)</span><span class="o">.</span><span class="n">write_text</span><span class="p">(</span><span class="n">wizard_code</span><span class="p">)</span>
<a id="__codelineno-21-100" name="__codelineno-21-100" href="#__codelineno-21-100"></a>
<a id="__codelineno-21-101" name="__codelineno-21-101" href="#__codelineno-21-101"></a>        <span class="n">Path</span><span class="p">(</span><span class="n">test_file</span><span class="p">)</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">mkdir</span><span class="p">(</span><span class="n">parents</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">exist_ok</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<a id="__codelineno-21-102" name="__codelineno-21-102" href="#__codelineno-21-102"></a>        <span class="n">Path</span><span class="p">(</span><span class="n">test_file</span><span class="p">)</span><span class="o">.</span><span class="n">write_text</span><span class="p">(</span><span class="n">tests</span><span class="p">[</span><span class="s1">&#39;unit&#39;</span><span class="p">])</span>
<a id="__codelineno-21-103" name="__codelineno-21-103" href="#__codelineno-21-103"></a>
<a id="__codelineno-21-104" name="__codelineno-21-104" href="#__codelineno-21-104"></a>        <span class="c1"># Generate README</span>
<a id="__codelineno-21-105" name="__codelineno-21-105" href="#__codelineno-21-105"></a>        <span class="n">readme</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_generate_readme</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">domain</span><span class="p">,</span> <span class="n">patterns</span><span class="p">)</span>
<a id="__codelineno-21-106" name="__codelineno-21-106" href="#__codelineno-21-106"></a>        <span class="n">readme_file</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;wizards/</span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">_README.md&quot;</span>
<a id="__codelineno-21-107" name="__codelineno-21-107" href="#__codelineno-21-107"></a>        <span class="n">Path</span><span class="p">(</span><span class="n">readme_file</span><span class="p">)</span><span class="o">.</span><span class="n">write_text</span><span class="p">(</span><span class="n">readme</span><span class="p">)</span>
<a id="__codelineno-21-108" name="__codelineno-21-108" href="#__codelineno-21-108"></a>
<a id="__codelineno-21-109" name="__codelineno-21-109" href="#__codelineno-21-109"></a>        <span class="k">return</span> <span class="p">{</span>
<a id="__codelineno-21-110" name="__codelineno-21-110" href="#__codelineno-21-110"></a>            <span class="s1">&#39;files&#39;</span><span class="p">:</span> <span class="p">[</span><span class="n">wizard_file</span><span class="p">,</span> <span class="n">test_file</span><span class="p">,</span> <span class="n">readme_file</span><span class="p">],</span>
<a id="__codelineno-21-111" name="__codelineno-21-111" href="#__codelineno-21-111"></a>            <span class="s1">&#39;next_steps&#39;</span><span class="p">:</span> <span class="p">[</span>
<a id="__codelineno-21-112" name="__codelineno-21-112" href="#__codelineno-21-112"></a>                <span class="s2">&quot;1. Review generated wizard code&quot;</span><span class="p">,</span>
<a id="__codelineno-21-113" name="__codelineno-21-113" href="#__codelineno-21-113"></a>                <span class="s2">&quot;2. Run tests: pytest &quot;</span> <span class="o">+</span> <span class="n">test_file</span><span class="p">,</span>
<a id="__codelineno-21-114" name="__codelineno-21-114" href="#__codelineno-21-114"></a>                <span class="sa">f</span><span class="s2">&quot;3. Register wizard in wizard_api.py: register_wizard(&#39;</span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">&#39;, </span><span class="si">{</span><span class="n">name</span><span class="o">.</span><span class="n">title</span><span class="p">()</span><span class="si">}</span><span class="s2">Wizard)&quot;</span><span class="p">,</span>
<a id="__codelineno-21-115" name="__codelineno-21-115" href="#__codelineno-21-115"></a>                <span class="s2">&quot;4. Test via API: POST /api/wizard/</span><span class="si">{name}</span><span class="s2">/process&quot;</span><span class="p">,</span>
<a id="__codelineno-21-116" name="__codelineno-21-116" href="#__codelineno-21-116"></a>            <span class="p">],</span>
<a id="__codelineno-21-117" name="__codelineno-21-117" href="#__codelineno-21-117"></a>        <span class="p">}</span>
<a id="__codelineno-21-118" name="__codelineno-21-118" href="#__codelineno-21-118"></a>
<a id="__codelineno-21-119" name="__codelineno-21-119" href="#__codelineno-21-119"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_compose_wizard</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">domain</span><span class="p">,</span> <span class="n">wizard_type</span><span class="p">,</span> <span class="n">patterns</span><span class="p">):</span>
<a id="__codelineno-21-120" name="__codelineno-21-120" href="#__codelineno-21-120"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Generate wizard code by composing patterns&quot;&quot;&quot;</span>
<a id="__codelineno-21-121" name="__codelineno-21-121" href="#__codelineno-21-121"></a>        <span class="kn">from</span><span class="w"> </span><span class="nn">jinja2</span><span class="w"> </span><span class="kn">import</span> <span class="n">Environment</span><span class="p">,</span> <span class="n">FileSystemLoader</span>
<a id="__codelineno-21-122" name="__codelineno-21-122" href="#__codelineno-21-122"></a>
<a id="__codelineno-21-123" name="__codelineno-21-123" href="#__codelineno-21-123"></a>        <span class="n">env</span> <span class="o">=</span> <span class="n">Environment</span><span class="p">(</span><span class="n">loader</span><span class="o">=</span><span class="n">FileSystemLoader</span><span class="p">(</span><span class="s2">&quot;scaffolding/templates&quot;</span><span class="p">))</span>
<a id="__codelineno-21-124" name="__codelineno-21-124" href="#__codelineno-21-124"></a>        <span class="n">template</span> <span class="o">=</span> <span class="n">env</span><span class="o">.</span><span class="n">get_template</span><span class="p">(</span><span class="s2">&quot;wizard.py.jinja2&quot;</span><span class="p">)</span>
<a id="__codelineno-21-125" name="__codelineno-21-125" href="#__codelineno-21-125"></a>
<a id="__codelineno-21-126" name="__codelineno-21-126" href="#__codelineno-21-126"></a>        <span class="k">return</span> <span class="n">template</span><span class="o">.</span><span class="n">render</span><span class="p">(</span>
<a id="__codelineno-21-127" name="__codelineno-21-127" href="#__codelineno-21-127"></a>            <span class="n">wizard_name</span><span class="o">=</span><span class="n">name</span><span class="o">.</span><span class="n">title</span><span class="p">()</span> <span class="o">+</span> <span class="s2">&quot;Wizard&quot;</span><span class="p">,</span>
<a id="__codelineno-21-128" name="__codelineno-21-128" href="#__codelineno-21-128"></a>            <span class="n">domain</span><span class="o">=</span><span class="n">domain</span><span class="p">,</span>
<a id="__codelineno-21-129" name="__codelineno-21-129" href="#__codelineno-21-129"></a>            <span class="n">patterns</span><span class="o">=</span><span class="n">patterns</span><span class="p">,</span>
<a id="__codelineno-21-130" name="__codelineno-21-130" href="#__codelineno-21-130"></a>            <span class="n">wizard_type</span><span class="o">=</span><span class="n">wizard_type</span><span class="p">,</span>
<a id="__codelineno-21-131" name="__codelineno-21-131" href="#__codelineno-21-131"></a>        <span class="p">)</span>
</code></pre></div></p>
<p><strong>Success Criteria:</strong>
- [ ] CLI creates fully functional wizard
- [ ] All 5 methodologies implemented
- [ ] Generated wizards pass tests
- [ ] Pattern recommendation works
- [ ] Interactive flow is user-friendly</p>
<hr />
<h2 id="5-implementation-timeline">5. Implementation Timeline<a class="headerlink" href="#5-implementation-timeline" title="Permanent link">&para;</a></h2>
<table>
<thead>
<tr>
<th>Phase</th>
<th>Duration</th>
<th>Start</th>
<th>End</th>
<th>Deliverables</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Phase 1: Pattern Library</strong></td>
<td>2 weeks</td>
<td>Week 1</td>
<td>Week 2</td>
<td>Pydantic patterns, Registry, Tests</td>
</tr>
<tr>
<td><strong>Phase 2: Hot-Reload</strong></td>
<td>1 week</td>
<td>Week 3</td>
<td>Week 3</td>
<td>Watchdog, WebSocket, Dev mode</td>
</tr>
<tr>
<td><strong>Phase 3: Test Generator</strong></td>
<td>2 weeks</td>
<td>Week 4</td>
<td>Week 5</td>
<td>Risk-driven tests, Templates, CLI</td>
</tr>
<tr>
<td><strong>Phase 4: Scaffolding</strong></td>
<td>1 week</td>
<td>Week 6</td>
<td>Week 6</td>
<td>Methodologies, CLI, File generation</td>
</tr>
</tbody>
</table>
<p><strong>Total:</strong> 6 weeks (vs. original 4-5 week estimate)</p>
<hr />
<h2 id="6-success-metrics">6. Success Metrics<a class="headerlink" href="#6-success-metrics" title="Permanent link">&para;</a></h2>
<h3 id="pattern-library-phase-1">Pattern Library (Phase 1)<a class="headerlink" href="#pattern-library-phase-1" title="Permanent link">&para;</a></h3>
<ul>
<li>[ ] 15+ patterns documented with Pydantic</li>
<li>[ ] Pattern registry supports search by category, name, description</li>
<li>[ ] Pattern recommendation achieves 80%+ accuracy (validated against existing wizards)</li>
<li>[ ] Code generation works for top 3 patterns (linear_flow, phased_processing, approval)</li>
<li>[ ] 90%+ test coverage</li>
</ul>
<h3 id="hot-reload-phase-2">Hot-Reload (Phase 2)<a class="headerlink" href="#hot-reload-phase-2" title="Permanent link">&para;</a></h3>
<ul>
<li>[ ] Wizard reload time &lt; 2 seconds</li>
<li>[ ] Zero server downtime during development</li>
<li>[ ] Reload failures are gracefully handled</li>
<li>[ ] WebSocket notifications delivered &lt; 500ms after file change</li>
</ul>
<h3 id="test-generator-phase-3">Test Generator (Phase 3)<a class="headerlink" href="#test-generator-phase-3" title="Permanent link">&para;</a></h3>
<ul>
<li>[ ] Generated tests achieve 80%+ coverage for new wizards</li>
<li>[ ] Risk analysis identifies 95%+ of critical paths</li>
<li>[ ] Test generation time &lt; 10 seconds for typical wizard</li>
<li>[ ] Templates support all pattern types</li>
</ul>
<h3 id="scaffolding-phase-4">Scaffolding (Phase 4)<a class="headerlink" href="#scaffolding-phase-4" title="Permanent link">&para;</a></h3>
<ul>
<li>[ ] Wizard creation time reduced from 2 hours  10 minutes</li>
<li>[ ] Generated wizards work without modification for simple use cases</li>
<li>[ ] All 5 methodologies implemented and tested</li>
<li>[ ] CLI is intuitive (user testing with 3+ developers)</li>
</ul>
<hr />
<h2 id="7-comparison-with-original-proposal">7. Comparison with Original Proposal<a class="headerlink" href="#7-comparison-with-original-proposal" title="Permanent link">&para;</a></h2>
<table>
<thead>
<tr>
<th>Aspect</th>
<th>Original Proposal</th>
<th>This Discovery-Based Approach</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Pattern Source</strong></td>
<td>Abstract design</td>
<td>Extracted from 78 real wizards</td>
</tr>
<tr>
<td><strong>Schema Format</strong></td>
<td>XML</td>
<td>Pydantic (native Python)</td>
</tr>
<tr>
<td><strong>Timeline</strong></td>
<td>4-5 weeks</td>
<td>6 weeks (more realistic)</td>
</tr>
<tr>
<td><strong>Risk</strong></td>
<td>High (unvalidated patterns)</td>
<td>Low (proven patterns)</td>
</tr>
<tr>
<td><strong>Adoption</strong></td>
<td>Uncertain</td>
<td>High (based on existing code)</td>
</tr>
<tr>
<td><strong>Dependencies</strong></td>
<td>XML parser, lxml</td>
<td>Pydantic (already used)</td>
</tr>
<tr>
<td><strong>Learning Curve</strong></td>
<td>Steep (XML + schemas)</td>
<td>Gentle (Python + Pydantic)</td>
</tr>
<tr>
<td><strong>IDE Support</strong></td>
<td>Minimal</td>
<td>Full autocomplete + type hints</td>
</tr>
<tr>
<td><strong>Validation</strong></td>
<td>Manual</td>
<td>Automatic (Pydantic)</td>
</tr>
</tbody>
</table>
<p><strong>Decision:</strong> Proceed with Discovery-Based Approach using Pydantic.</p>
<hr />
<h2 id="8-next-steps">8. Next Steps<a class="headerlink" href="#8-next-steps" title="Permanent link">&para;</a></h2>
<ol>
<li><strong>Get User Approval:</strong> Review this discovery report and approve approach</li>
<li><strong>Phase 1 Kickoff:</strong> Start implementing Pattern Library with Pydantic</li>
<li><strong>Spike:</strong> Prototype LinearFlowPattern code generation (2 days)</li>
<li><strong>Validation:</strong> Generate a new wizard using the pattern library to validate approach</li>
</ol>
<hr />
<h2 id="9-appendices">9. Appendices<a class="headerlink" href="#9-appendices" title="Permanent link">&para;</a></h2>
<h3 id="a-complete-wizard-list-78-total">A. Complete Wizard List (78 Total)<a class="headerlink" href="#a-complete-wizard-list-78-total" title="Permanent link">&para;</a></h3>
<p><strong>Healthcare Wizards (16):</strong>
1. SOAP Note Documentation
2. SBAR Communication
3. Shift Handoff
4. Admission Assessment
5. Discharge Summary
6. Discharge Planning
7. Care Planning
8. Clinical Assessment
9. Nursing Assessment
10. Treatment Planning
11. Patient Education
12. Medication Reconciliation
13. Dosage Calculation
14. Quality Improvement
15. Incident Reporting</p>
<p><strong>Domain Wizards (16):</strong>
1. Healthcare
2. Finance
3. Legal
4. Education
5. Customer Support
6. HR
7. Sales
8. Real Estate
9. Insurance
10. Accounting
11. Research
12. Government
13. Retail
14. Manufacturing
15. Logistics
16. Technology</p>
<p><strong>Coach Wizards (16):</strong>
1. Debugging
2. Testing
3. Security
4. Documentation
5. Performance
6. Refactoring
7. Database
8. API Design
9. Compliance
10. Monitoring
11. CI/CD
12. Accessibility
13. Localization
14. Migration
15. Observability
16. Scaling</p>
<p><strong>AI Software Wizards (12):</strong>
1. Advanced Debugging
2. Agent Orchestration
3. AI Collaboration
4. AI Context Window
5. AI Documentation
6. Enhanced Testing
7. Multi-Model
8. Performance Profiling
9. Prompt Engineering
10. RAG Pattern
11. Security Analysis</p>
<p><strong>Coach Examples (18):</strong>
1-18. Reference implementations</p>
<h3 id="b-pattern-frequency-analysis">B. Pattern Frequency Analysis<a class="headerlink" href="#b-pattern-frequency-analysis" title="Permanent link">&para;</a></h3>
<table>
<thead>
<tr>
<th>Pattern</th>
<th>Frequency</th>
<th>Reusability Score</th>
<th>Category</th>
</tr>
</thead>
<tbody>
<tr>
<td>Empathy Level</td>
<td>16</td>
<td>1.0</td>
<td>Empathy</td>
</tr>
<tr>
<td>Linear Flow</td>
<td>16</td>
<td>0.9</td>
<td>Structural</td>
</tr>
<tr>
<td>Structured Fields</td>
<td>16</td>
<td>0.9</td>
<td>Input</td>
</tr>
<tr>
<td>User Approval</td>
<td>16</td>
<td>0.95</td>
<td>Validation</td>
</tr>
<tr>
<td>Educational Banner</td>
<td>16</td>
<td>1.0</td>
<td>Empathy</td>
</tr>
<tr>
<td>Risk Assessment</td>
<td>16</td>
<td>0.8</td>
<td>Behavior</td>
</tr>
<tr>
<td>Prediction (Level 4)</td>
<td>16</td>
<td>0.8</td>
<td>Behavior</td>
</tr>
<tr>
<td>Code Analysis Input</td>
<td>16</td>
<td>0.9</td>
<td>Input</td>
</tr>
<tr>
<td>Phased Processing</td>
<td>12</td>
<td>0.85</td>
<td>Structural</td>
</tr>
<tr>
<td>Context-Based Input</td>
<td>12</td>
<td>0.8</td>
<td>Input</td>
</tr>
<tr>
<td>AI Enhancement</td>
<td>16</td>
<td>0.7</td>
<td>Behavior</td>
</tr>
<tr>
<td>Fix Application</td>
<td>8</td>
<td>0.75</td>
<td>Behavior</td>
</tr>
<tr>
<td>Config Validation</td>
<td>16</td>
<td>0.9</td>
<td>Validation</td>
</tr>
<tr>
<td>Step Validation</td>
<td>16</td>
<td>0.9</td>
<td>Validation</td>
</tr>
</tbody>
</table>
<h3 id="c-references">C. References<a class="headerlink" href="#c-references" title="Permanent link">&para;</a></h3>
<ul>
<li><a href="../../backend/api/wizard_api.py">Backend Wizard API</a></li>
<li><a href="../../attune_llm/wizards/base_wizard.py">Base Wizard</a></li>
<li><a href="../../wizards/soap_note_wizard.py">SOAP Note Wizard</a></li>
<li><a href="../../empathy_software_plugin/wizards/advanced_debugging_wizard.py">Advanced Debugging Wizard</a></li>
<li><a href="../../coach_wizards/testing_wizard.py">Testing Wizard</a></li>
</ul>
<hr />
<p><strong>End of Discovery Report</strong></p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2025 Smart-AI-Memory
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        
<div class="md-social">
  
    
    
    
    
      
      
    
    <a href="https://github.com/Smart-AI-Memory/attune-ai" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://pypi.org/project/attune-ai/" target="_blank" rel="noopener" title="pypi.org" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.8 200.5c-7.7-30.9-22.3-54.2-53.4-54.2h-40.1v47.4c0 36.8-31.2 67.8-66.8 67.8H172.7c-29.2 0-53.4 25-53.4 54.3v101.8c0 29 25.2 46 53.4 54.3 33.8 9.9 66.3 11.7 106.8 0 26.9-7.8 53.4-23.5 53.4-54.3v-40.7H226.2v-13.6h160.2c31.1 0 42.6-21.7 53.4-54.2 11.2-33.5 10.7-65.7 0-108.6M286.2 444.7a20.4 20.4 0 1 1 0-40.7 20.4 20.4 0 1 1 0 40.7M167.8 248.1h106.8c29.7 0 53.4-24.5 53.4-54.3V91.9c0-29-24.4-50.7-53.4-55.6-35.8-5.9-74.7-5.6-106.8.1-45.2 8-53.4 24.7-53.4 55.6v40.7h106.9v13.6h-147c-31.1 0-58.3 18.7-66.8 54.2-9.8 40.7-10.2 66.1 0 108.6 7.6 31.6 25.7 54.2 56.8 54.2H101v-48.8c0-35.3 30.5-66.4 66.8-66.4m-6.6-183.4a20.4 20.4 0 1 1 0 40.8 20.4 20.4 0 1 1 0-40.8"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      
      <script id="__config" type="application/json">{"annotate": null, "base": "../..", "features": ["navigation.instant", "navigation.tracking", "navigation.tabs", "navigation.sections", "navigation.expand", "navigation.top", "search.suggest", "search.highlight", "content.code.copy"], "search": "../../assets/javascripts/workers/search.7a47a382.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../assets/javascripts/bundle.e71a0d61.min.js"></script>
      
    
  </body>
</html>
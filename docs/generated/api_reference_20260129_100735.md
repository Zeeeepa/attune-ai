---
description: Cache Statistics and Performance Reporting - API Reference Documentation API reference: > **Module:** `attune.cache_analyzer` > **Version:** 1.0 > **License
---

# Cache Statistics and Performance Reporting - API Reference Documentation

> **Module:** `attune.cache_analyzer`
> **Version:** 1.0
> **License:** Apache License 2.0
> **Copyright:** 2025 Smart AI Memory, LLC

---

## 1. Overview

### 1.1 Introduction

The Cache Statistics and Performance Reporting module provides comprehensive analysis and health monitoring for cache systems within the Empathy OS framework. This module enables developers to:

- **Analyze cache performance** through detailed metrics collection and health scoring
- **Monitor cache effectiveness** with confidence-weighted assessments based on request volume
- **Receive actionable recommendations** for cache optimization and tuning
- **Track system-wide cache health** across all registered caches

**Key Capabilities:**

| Capability | Description |
|------------|-------------|
| Multi-level health scoring | Four-tier assessment: excellent, good, fair, poor |
| Confidence-weighted assessments | Three-tier confidence: high, medium, low |
| Automated recommendations | Context-aware optimization suggestions |
| Serialization support | JSON-ready output for logging and APIs |

**Target Use Cases:**
- Performance optimization and bottleneck identification
- Cache tuning and configuration adjustment
- Production monitoring and alerting
- Capacity planning and resource allocation

---

### 1.2 Quick Start

```python
from attune.cache_analyzer import CacheAnalyzer, CacheHealthScore

# Analyze a specific cache
health = CacheAnalyzer.analyze_cache("ast_parse")
if health:
    print(f"Status: {health.health} ({health.confidence} confidence)")
    print(f"Hit Rate: {health.hit_rate:.2%}")
    print(f"Action: {health.recommendation}")

    # Access detailed reasons
    for reason in health.reasons:
        print(f"  - {reason}")
else:
    print("Cache not found or no statistics available")

# Analyze all caches in the system
all_health = CacheAnalyzer.analyze_all()
for name, score in all_health.items():
    print(f"{name}: {score.health} - {score.hit_rate:.1%} hit rate")
```

**Expected Output:**
```
Status: excellent (high confidence)
Hit Rate: 85.23%
Action: Cache is performing well. Consider monitoring for memory usage as it grows.
  - Strong hit rate indicates good cache effectiveness
```

---

### 1.3 Prerequisites

**System Requirements:**
- Python 3.10 or higher
- Type hints support enabled

**Dependencies:**
- `attune.cache_monitor` module (provides `CacheMonitor` and `CacheStats`)
- Standard library: `dataclasses`, `typing`

**Required Imports:**
```python
from attune.cache_monitor import CacheMonitor, CacheStats
from attune.cache_analyzer import CacheAnalyzer, CacheHealthScore
```

---

### 1.4 Installation & Setup

```python
from attune.cache_monitor import CacheMonitor, CacheStats
from attune.cache_analyzer import CacheAnalyzer, CacheHealthScore

# Ensure monitor is initialized (typically done at application startup)
monitor = CacheMonitor.get_instance()

# Verify cache registration
all_stats = monitor.get_all_stats()
print(f"Registered caches: {list(all_stats.keys())}")

# The analyzer uses static methods - no instantiation required
health = CacheAnalyzer.analyze_cache("my_cache")
```

> **Note:** The `CacheMonitor` must be initialized and caches must be registered before analysis. The analyzer retrieves statistics from the singleton monitor instance.

---

## 2. Core Concepts

### 2.1 Health Scoring System

The health scoring system provides a standardized way to assess cache performance with confidence weighting based on statistical significance.

#### Health Levels

| Level | Description | Typical Hit Rate Range |
|-------|-------------|----------------------|
| `excellent` | Cache is highly effective | ≥60% (high confidence) |
| `good` | Cache is performing adequately | 40-59% (high confidence) |
| `fair` | Cache shows limited effectiveness | 20-39% (high confidence) |
| `poor` | Cache is ineffective | <20% (high confidence) |

#### Confidence Levels

| Level | Request Count | Interpretation |
|-------|--------------|----------------|
| `low` | < 10 requests | Insufficient data for reliable assessment |
| `medium` | 10-99 requests | Moderate statistical significance |
| `high` | ≥ 100 requests | High statistical confidence |

#### Confidence-Adjusted Thresholds

The confidence level adjusts health thresholds based on request volume. With fewer requests, thresholds are more lenient to avoid premature negative assessments:

```python
# Low confidence (< 10 requests): Lenient thresholds
#   excellent: ≥ 80% hit rate
#   good:      ≥ 60% hit rate
#   fair:      < 60% hit rate (no "poor" at low confidence)

# Medium confidence (10-99 requests): Moderate thresholds
#   excellent: ≥ 70% hit rate
#   good:      ≥ 50% hit rate
#   fair:      ≥ 30% hit rate
#   poor:      < 30% hit rate

# High confidence (≥ 100 requests): Production thresholds
#   excellent: ≥ 60% hit rate
#   good:      ≥ 40% hit rate
#   fair:      ≥ 20% hit rate
#   poor:      < 20% hit rate
```

#### Interpretation Guidelines

| Guideline | Description |
|-----------|-------------|
| Low confidence | Treat as preliminary indicators; gather more data before acting |
| Medium confidence | Reasonable guidance for optimization; monitor trends |
| High confidence | Statistically reliable for production decisions |
| Always read recommendations | The recommendation text provides context beyond the score |

---

### 2.2 Performance Metrics

The analyzer evaluates three primary metrics from `CacheStats`:

#### Hit Rate (`hit_rate: float`)
- **Range:** 0.0 to 1.0
- **Purpose:** Primary indicator of cache effectiveness
- **Calculation:** `hits / (hits + misses

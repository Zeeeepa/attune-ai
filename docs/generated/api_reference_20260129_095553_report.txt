============================================================
DOCUMENTATION GENERATION REPORT
============================================================

Document Type: Api Reference
Target Audience: Developers

------------------------------------------------------------
DOCUMENT OUTLINE
------------------------------------------------------------
# Empathy Framework - Cross-Platform Utilities API Reference

## Documentation Outline

---

## 1. Overview & Introduction

### 1.1 Purpose
- What this module provides
...

------------------------------------------------------------
GENERATED DOCUMENTATION
------------------------------------------------------------

# Empathy Framework - Cross-Platform Utilities API Reference

**Version:** 1.0.0  
**License:** Fair Source License 0.9  
**Copyright:** 2025 Smart-AI-Memory

---

## Table of Contents

1. [Overview & Introduction](#1-overview--introduction)
2. [Platform Detection Functions](#2-platform-detection-functions)
3. [Directory Utilities](#3-directory-utilities)
4. [Asyncio Configuration](#4-asyncio-configuration)
5. [File Handling](#5-file-handling)
6. [Best Practices](#6-best-practices)
7. [Troubleshooting](#7-troubleshooting)

---

## 1. Overview & Introduction

### 1.1 Purpose

The `empathy_os.platform_utils` module provides cross-platform utilities for the Empathy Framework, abstracting platform-specific differences to ensure consistent behavior across Windows, macOS, and Linux systems.

**Core Capabilities:**
- **Platform Detection**: Identify the operating system at runtime
- **Directory Management**: Get platform-appropriate directories for logs, data, config, and cache
- **Asyncio Configuration**: Handle platform-specific event loop requirements
- **File Operations**: Ensure consistent file encoding across platforms

**Why Cross-Platform Utilities Matter:**
- **Consistency**: Users expect applications to follow platform conventions
- **Compatibility**: Different platforms have different filesystem layouts and APIs
- **Maintainability**: Centralized platform logic reduces code duplication
- **User Experience**: Files stored in expected locations improve usability

**Key Use Cases in the Empathy Framework:**
- Setting up logging directories that respect OS conventions
- Storing user data in platform-appropriate locations
- Handling asyncio event loops correctly on Windows
- Reading/writing configuration files with consistent encoding

### 1.2 Quick Start

```python
from empathy_os.platform_utils import (
    get_default_log_dir,
    get_default_data_dir,
    setup_asyncio_policy,
    is_windows,
    safe_run_async
)

# Initialize platform-specific asyncio settings (call early in application)
setup_asyncio_policy()

# Get platform-appropriate directories
log_dir = get_default_log_dir()
data_dir = get_default_data_dir()

# Create directories if they don't exist
log_dir.mkdir(parents=True, exist_ok=True)
data_dir.mkdir(parents=True, exist_ok=True)

# Platform-specific behavior
if is_windows():
    print(f"Windows log directory: {log_dir}")
    # Windows: C:\Users\<user>\AppData\Roaming\empathy\logs

# Run async code safely across platforms
async def main():
    print("Running async code...")
    return "Complete"

result = safe_run_async(main())
print(result)  # Output: "Complete"
```

### 1.3 Installation & Requirements

**Python Version:**
- Python 3.10 or higher required
- Type hints use modern syntax (`str | Path`)

**Dependencies:**
```python
# Standard library only - no external dependencies
import asyncio
import os
import platform
from pathlib import Path
from typing import Any
```

**Import Statement:**
```python
# Import specific functions (recommended)
from empathy_os.platform_utils import (
    is_windows,
    is_macos,
    is_linux,
    get_default_log_dir,
    get_default_data_dir,
    get_default_config_dir,
    get_default_cache_dir,
    setup_asyncio_policy,
    safe_run_async,
    open_text_file
)

# Or import the module
import empathy_os.platform_utils as platform_utils
```

**Internal Dependencies:**
- `empathy_os.config._validate_file_path` - File path validation

### 1.4 Module Structure

**Platform Detection Functions:**
- `is_windows()` - Detect Windows platform
- `is_macos()` - Detect macOS platform
- `is_linux()` - Detect Linux platform

**Directory Utilities:**
- `get_default_log_dir()` - Platform-appropriate log directory
- `get_default_data_dir()` - Platform-appropriate data directory
- `get_default_config_dir()` - Platform-appropriate config directory
- `get_default_cache_dir()` - Platform-appropriate cache directory

**Asyncio Configuration:**
- `setup_asyncio_policy()` - Configure event loop policy
- `safe_run_async()` - Run coroutines with proper platform handling

**File Handling:**
- `open_text_file()` - Open files with consistent UTF-8 encoding

---

## 2. Platform Detection Functions

### 2.1 `is_windows()`

**Function Signature:**
```python
def is_windows() -> bool
```

**Description:**
Detects if the current platform is Windows by checking the system platform identifier.

**Returns:**
- `bool`: `True` if running on Windows, `False` otherwise

**Implementation Details:**
- Uses `platform.system()` which returns `"Windows"` on all Windows versions
- Reliable across Windows 7, 8, 10, 11, and Server editions
- Does not distinguish between Windows versions (use `platform.version()` for version-specific logic)

**Usage Examples:**

**Basic Platform Detection:**
```python
from empathy_os.platform_utils import is_windows

if is_windows():
    print("Running on Windows")
    # Use Windows-specific code paths
else:
    print("Not running on Windows")
```

**Conditional Import Pattern:**
```python
from empathy_os.platform_utils import is_windows

if is_windows():
    import winreg  # Windows-only module
    
    def read_registry_key(key_path: str) -> str:
        """Read Windows registry key."""
        try:
            key = winreg.OpenKey(winreg.HKEY_CURRENT_USER, key_path)
            value, _ = winreg.QueryValueEx(key, "")
            winreg.CloseKey(key)
            return value
        except WindowsError as e:
            raise RuntimeError(f"Failed to read registry: {e}")
else:
    def read_registry_key(key_path: str) -> str:
        raise NotImplementedError("Registry only available on Windows")
```

------------------------------------------------------------
STATISTICS
------------------------------------------------------------
Word Count: 607
Section Count: ~8

============================================================
Generated using premium tier model
============================================================
---
description: Cache Statistics and Performance Reporting - API Reference API reference: **Version:** 1.0 **Module:** `attune.cache_analyzer` **Copyright:** 2025 Smart AI 
---

# Cache Statistics and Performance Reporting - API Reference

**Version:** 1.0  
**Module:** `attune.cache_analyzer`  
**Copyright:** 2025 Smart AI Memory, LLC  
**License:** Fair Source 0.9

---

## 1. Overview

### 1.1 Introduction

The Cache Analyzer module provides comprehensive cache performance analysis and health monitoring for the Empathy OS caching system. It evaluates cache effectiveness based on hit rates, request patterns, and memory usage, then provides actionable recommendations for optimization.

**Purpose:**
- Automated cache performance analysis
- Health scoring with confidence levels
- Actionable recommendations for cache optimization
- System-wide cache monitoring and reporting

**Key Capabilities:**
- Single cache analysis with detailed metrics
- Bulk analysis across all registered caches
- Confidence-weighted health scoring based on request volume
- Context-aware recommendations
- Serializable health reports for logging and APIs

**Target Use Cases:**
- Performance optimization and tuning
- Cache effectiveness monitoring
- Identifying underperforming caches
- Memory usage optimization
- Production health dashboards

---

### 1.2 Quick Start

```python
from attune.cache_analyzer import CacheAnalyzer

# Analyze a specific cache
health = CacheAnalyzer.analyze_cache("ast_parse")

if health:
    print(f"Status: {health.health} ({health.confidence} confidence)")
    print(f"Hit Rate: {health.hit_rate:.2%}")
    print(f"Action: {health.recommendation}")
else:
    print("Cache not found or has no statistics")

# Analyze all caches in the system
all_health = CacheAnalyzer.analyze_all()
for name, score in all_health.items():
    print(f"{name}: {score.health} - {score.hit_rate:.1%} hit rate")
```

**Expected Output:**
```
Status: excellent (high confidence)
Hit Rate: 73.50%
Action: Cache is performing well. Consider monitoring for memory usage as it grows.
```

---

### 1.3 Prerequisites

**Python Version:**
- Python 3.10 or higher (required for union type syntax `X | None`)

**Dependencies:**
- `attune.cache_monitor` — Provides `CacheMonitor` and `CacheStats` classes
- Standard library: `dataclasses`, `typing`

**Required Imports:**
```python
from attune.cache_analyzer import CacheAnalyzer, CacheHealthScore
from attune.cache_monitor import CacheMonitor, CacheStats
from typing import Any
```

---

### 1.4 Installation & Setup

```python
from attune.cache_monitor import CacheMonitor
from attune.cache_analyzer import CacheAnalyzer, CacheHealthScore

# Ensure CacheMonitor is initialized (typically done at application startup)
monitor = CacheMonitor.get_instance()

# The analyzer uses static methods - no instantiation required
health = CacheAnalyzer.analyze_cache("my_cache")
```

> **Note:** The `CacheAnalyzer` class uses static methods exclusively and does not require instantiation. All methods access the singleton `CacheMonitor` instance internally.

---

## 2. Core Concepts

### 2.1 Health Scoring System

The health scoring system evaluates cache effectiveness using a multi-dimensional approach that considers both performance metrics and statistical confidence.

#### Health Levels

| Level | Description | Action Required |
|-------|-------------|-----------------|
| `excellent` | Cache is highly effective | Monitor only |
| `good` | Cache is performing adequately | Optional tuning |
| `fair` | Cache shows marginal effectiveness | Review strategy |
| `poor` | Cache is ineffective | Immediate action needed |

#### Confidence Levels

Confidence reflects the statistical reliability of the health assessment based on request volume:

| Confidence | Request Count | Interpretation |
|------------|---------------|----------------|
| `low` | < 10 requests | Limited data; assessment may change significantly |
| `medium` | 10–99 requests | Moderate data; trends are emerging |
| `high` | ≥ 100 requests | Substantial data; assessment is reliable |

#### Health Thresholds by Confidence

The system uses adaptive thresholds that become stricter as confidence increases:

| Confidence | Excellent | Good | Fair | Poor |
|------------|-----------|------|------|------|
| **Low** (< 10 requests) | ≥ 80% | ≥ 60% | < 60% | — |
| **Medium** (10–99 requests) | ≥ 70% | ≥ 50% | ≥ 30% | < 30% |
| **High** (≥ 100 requests) | ≥ 60% | ≥ 40% | ≥ 20% | < 20% |

> **Design Rationale:** With more data, we can be more confident that lower hit rates indicate genuine problems rather than statistical noise. This prevents premature optimization based on limited samples.

---

### 2.2 Performance Metrics

| Metric | Definition | Range | Source |
|--------|------------|-------|--------|
| **Hit Rate** | Ratio of cache hits to total requests | 0.0–1.0 | `stats.hit_rate` |
| **Total Requests** | Sum of all cache hits and misses | 0–∞ | `stats.total_requests` |
| **Utilization** | Ratio of current size to maximum size | 0.0–1.0 | `stats.utilization` |

#### How Metrics Combine

```
┌─────────────────────────────────────────────────────────────┐
│                    Health Assessment Flow                    │
├─────────────────────────────────────────────────────────────┤
│  Total Requests ──► Confidence Level                        │
│        │                   │                                │
│        ▼                   ▼                                │
│  Hit Rate ────────► Threshold Selection ──► Health Level    │
│        │                                                    │
│        ▼                                                    │
│  Utilization ──► Additional Warnings ──► Recommendation     │
└─────────────────────────────────────────────────────────────┘
```

---

### 2